import{a as VE,b as ul,c as jE,d as UE,e as BE,f as $E,g as kp,h as qE,i as Ga,j as Op,k as cl,l as zE,m as HE,n as Fp,o as $e,p as ji,q as qn,r as ll,s as Wa,t as Lp,u as GE,v as WE,w as Ka,x as dl,y as sn,z as qt}from"./chunk-UNSEJGY7.js";import{a as G,b as Ve,f as Pp,g as N}from"./chunk-ALMH3RT4.js";function zR(t,e){return Object.is(t,e)}var dt=null,hl=!1,fl=1,Ui=Symbol("SIGNAL");function _e(t){let e=dt;return dt=t,e}var Vp={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function KE(t){if(hl)throw new Error("");if(dt===null)return;dt.consumerOnSignalRead(t);let e=dt.nextProducerIndex++;if(Bo(dt),e<dt.producerNode.length&&dt.producerNode[e]!==t&&Qa(dt)){let n=dt.producerNode[e];pl(n,dt.producerIndexOfThis[e])}dt.producerNode[e]!==t&&(dt.producerNode[e]=t,dt.producerIndexOfThis[e]=Qa(dt)?eD(t,dt,e):0),dt.producerLastReadVersion[e]=t.version}function HR(){fl++}function GR(t){if(!(Qa(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===fl)){if(!t.producerMustRecompute(t)&&!jp(t)){t.dirty=!1,t.lastCleanEpoch=fl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=fl}}function QE(t){if(t.liveConsumerNode===void 0)return;let e=hl;hl=!0;try{for(let n of t.liveConsumerNode)n.dirty||WR(n)}finally{hl=e}}function YE(){return dt?.consumerAllowSignalWrites!==!1}function WR(t){t.dirty=!0,QE(t),t.consumerMarkedDirty?.(t)}function ZE(t){return t&&(t.nextProducerIndex=0),_e(t)}function JE(t,e){if(_e(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Qa(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)pl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function jp(t){Bo(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(GR(n),r!==n.version))return!0}return!1}function XE(t){if(Bo(t),Qa(t))for(let e=0;e<t.producerNode.length;e++)pl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function eD(t,e,n){if(tD(t),Bo(t),t.liveConsumerNode.length===0)for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=eD(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function pl(t,e){if(tD(t),Bo(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)pl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Bo(i),i.producerIndexOfThis[r]=e}}function Qa(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Bo(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function tD(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function KR(){throw new Error}var nD=KR;function rD(){nD()}function iD(t){nD=t}var QR=null;function oD(t){let e=Object.create(aD);e.value=t;let n=()=>(KE(e),e.value);return n[Ui]=e,n}function Up(t,e){YE()||rD(),t.equal(t.value,e)||(t.value=e,YR(t))}function sD(t,e){YE()||rD(),Up(t,e(t.value))}var aD=Ve(G({},Vp),{equal:zR,value:void 0});function YR(t){t.version++,HR(),QE(t),QR?.()}function ne(t){return typeof t=="function"}function $o(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var gl=$o(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Bi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ke=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(o){e=o instanceof gl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{uD(o)}catch(s){e=e??[],s instanceof gl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new gl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)uD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Bi(n,e)}remove(e){let{_finalizers:n}=this;n&&Bi(n,e),e instanceof t&&e._removeParent(this)}};Ke.EMPTY=(()=>{let t=new Ke;return t.closed=!0,t})();var Bp=Ke.EMPTY;function ml(t){return t instanceof Ke||t&&"closed"in t&&ne(t.remove)&&ne(t.add)&&ne(t.unsubscribe)}function uD(t){ne(t)?t():t.unsubscribe()}var Dn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qo={setTimeout(t,e,...n){let{delegate:r}=qo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=qo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function yl(t){qo.setTimeout(()=>{let{onUnhandledError:e}=Dn;if(e)e(t);else throw t})}function Ya(){}var cD=$p("C",void 0,void 0);function lD(t){return $p("E",void 0,t)}function dD(t){return $p("N",t,void 0)}function $p(t,e,n){return{kind:t,value:e,error:n}}var $i=null;function zo(t){if(Dn.useDeprecatedSynchronousErrorHandling){let e=!$i;if(e&&($i={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=$i;if($i=null,n)throw r}}else t()}function hD(t){Dn.useDeprecatedSynchronousErrorHandling&&$i&&($i.errorThrown=!0,$i.error=t)}var qi=class extends Ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ml(e)&&e.add(this)):this.destination=XR}static create(e,n,r){return new vr(e,n,r)}next(e){this.isStopped?zp(dD(e),this):this._next(e)}error(e){this.isStopped?zp(lD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zp(cD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},ZR=Function.prototype.bind;function qp(t,e){return ZR.call(t,e)}var Hp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){vl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){vl(r)}else vl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){vl(n)}}},vr=class extends qi{constructor(e,n,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Dn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&qp(e.next,o),error:e.error&&qp(e.error,o),complete:e.complete&&qp(e.complete,o)}):i=e}this.destination=new Hp(i)}};function vl(t){Dn.useDeprecatedSynchronousErrorHandling?hD(t):yl(t)}function JR(t){throw t}function zp(t,e){let{onStoppedNotification:n}=Dn;n&&qo.setTimeout(()=>n(t,e))}var XR={closed:!0,next:Ya,error:JR,complete:Ya};var Ho=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(t){return t}function Gp(...t){return Wp(t)}function Wp(t){return t.length===0?Nt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var oe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=tN(n)?n:new vr(n,r,i);return zo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=fD(r),new r((i,o)=>{let s=new vr({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ho](){return this}pipe(...n){return Wp(n)(this)}toPromise(n){return n=fD(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function fD(t){var e;return(e=t??Dn.Promise)!==null&&e!==void 0?e:Promise}function eN(t){return t&&ne(t.next)&&ne(t.error)&&ne(t.complete)}function tN(t){return t&&t instanceof qi||eN(t)&&ml(t)}function Kp(t){return ne(t?.lift)}function ae(t){return e=>{if(Kp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new Qp(t,e,n,r,i)}var Qp=class extends qi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Go(){return ae((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Wo=class extends oe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Kp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ke;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ke.EMPTY)}return e}refCount(){return Go()(this)}};var pD=$o(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=(()=>{class t extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new wl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new pD}next(n){zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){zo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Bp:(this.currentObservers=null,o.push(n),new Ke(()=>{this.currentObservers=null,Bi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new oe;return n.source=this,n}}return t.create=(e,n)=>new wl(e,n),t})(),wl=class extends je{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Bp}};var yt=class extends je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Za={now(){return(Za.delegate||Date).now()},delegate:void 0};var _l=class extends je{constructor(e=1/0,n=1/0,r=Za){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Il=class extends Ke{constructor(e,n){super()}schedule(e,n=0){return this}};var Ja={setInterval(t,e,...n){let{delegate:r}=Ja;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ja;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ko=class extends Il{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ja.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ja.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Bi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Qo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Qo.now=Za.now;var Yo=class extends Qo{constructor(e,n=Qo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Xa=new Yo(Ko);var El=class extends Ko{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Dl=class extends Yo{};var Yp=new Dl(El);var Pt=new oe(t=>t.complete());function gD(t){return t&&ne(t.schedule)}function Zp(t){return t[t.length-1]}function Tl(t){return ne(Zp(t))?t.pop():void 0}function zn(t){return gD(Zp(t))?t.pop():void 0}function mD(t,e){return typeof Zp(t)=="number"?t.pop():e}var bl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Cl(t){return ne(t?.then)}function Al(t){return ne(t[Ho])}function Sl(t){return Symbol.asyncIterator&&ne(t?.[Symbol.asyncIterator])}function xl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function nN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ml=nN();function Rl(t){return ne(t?.[Ml])}function Nl(t){return jE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ul(n.read());if(i)return yield ul(void 0);yield yield ul(r)}}finally{n.releaseLock()}})}function Pl(t){return ne(t?.getReader)}function Oe(t){if(t instanceof oe)return t;if(t!=null){if(Al(t))return rN(t);if(bl(t))return iN(t);if(Cl(t))return oN(t);if(Sl(t))return yD(t);if(Rl(t))return sN(t);if(Pl(t))return aN(t)}throw xl(t)}function rN(t){return new oe(e=>{let n=t[Ho]();if(ne(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function iN(t){return new oe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function oN(t){return new oe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,yl)})}function sN(t){return new oe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function yD(t){return new oe(e=>{uN(t,e).catch(n=>e.error(n))})}function aN(t){return yD(Nl(t))}function uN(t,e){var n,r,i,o;return VE(this,void 0,void 0,function*(){try{for(n=UE(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function zt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Jt(t,e=0){return ae((n,r)=>{n.subscribe(ue(r,i=>zt(r,t,()=>r.next(i),e),()=>zt(r,t,()=>r.complete(),e),i=>zt(r,t,()=>r.error(i),e)))})}function an(t,e=0){return ae((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function vD(t,e){return Oe(t).pipe(an(e),Jt(e))}function wD(t,e){return Oe(t).pipe(an(e),Jt(e))}function _D(t,e){return new oe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function ID(t,e){return new oe(n=>{let r;return zt(n,e,()=>{r=t[Ml](),zt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function kl(t,e){if(!t)throw new Error("Iterable cannot be null");return new oe(n=>{zt(n,e,()=>{let r=t[Symbol.asyncIterator]();zt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ED(t,e){return kl(Nl(t),e)}function DD(t,e){if(t!=null){if(Al(t))return vD(t,e);if(bl(t))return _D(t,e);if(Cl(t))return wD(t,e);if(Sl(t))return kl(t,e);if(Rl(t))return ID(t,e);if(Pl(t))return ED(t,e)}throw xl(t)}function ve(t,e){return e?DD(t,e):Oe(t)}function Y(...t){let e=zn(t);return ve(t,e)}function Zo(t,e){let n=ne(t)?t:()=>t,r=i=>i.error(n());return new oe(e?i=>e.schedule(r,0,i):r)}function Jp(t){return!!t&&(t instanceof oe||ne(t.lift)&&ne(t.subscribe))}var wr=$o(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function X(t,e){return ae((n,r)=>{let i=0;n.subscribe(ue(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:cN}=Array;function lN(t,e){return cN(e)?t(...e):t(e)}function Ol(t){return X(e=>lN(t,e))}var{isArray:dN}=Array,{getPrototypeOf:hN,prototype:fN,keys:pN}=Object;function Fl(t){if(t.length===1){let e=t[0];if(dN(e))return{args:e,keys:null};if(gN(e)){let n=pN(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function gN(t){return t&&typeof t=="object"&&hN(t)===fN}function Ll(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function eu(...t){let e=zn(t),n=Tl(t),{args:r,keys:i}=Fl(t);if(r.length===0)return ve([],e);let o=new oe(mN(r,e,i?s=>Ll(i,s):Nt));return n?o.pipe(Ol(n)):o}function mN(t,e,n=Nt){return r=>{TD(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)TD(e,()=>{let l=ve(t[u],e),d=!1;l.subscribe(ue(r,f=>{o[u]=f,d||(d=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function TD(t,e,n){t?zt(n,t,e):e()}function bD(t,e,n,r,i,o,s,a){let u=[],l=0,d=0,f=!1,g=()=>{f&&!u.length&&!l&&e.complete()},y=S=>l<r?b(S):u.push(S),b=S=>{o&&e.next(S),l++;let C=!1;Oe(n(S,d++)).subscribe(ue(e,P=>{i?.(P),o?y(P):e.next(P)},()=>{C=!0},void 0,()=>{if(C)try{for(l--;u.length&&l<r;){let P=u.shift();s?zt(e,s,()=>b(P)):b(P)}g()}catch(P){e.error(P)}}))};return t.subscribe(ue(e,y,()=>{f=!0,g()})),()=>{a?.()}}function Xe(t,e,n=1/0){return ne(e)?Xe((r,i)=>X((o,s)=>e(r,o,i,s))(Oe(t(r,i))),n):(typeof e=="number"&&(n=e),ae((r,i)=>bD(r,i,t,n)))}function Kr(t=1/0){return Xe(Nt,t)}function CD(){return Kr(1)}function Jo(...t){return CD()(ve(t,zn(t)))}function Vl(t){return new oe(e=>{Oe(t()).subscribe(e)})}function yN(...t){let e=Tl(t),{args:n,keys:r}=Fl(t),i=new oe(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let d=0;d<s;d++){let f=!1;Oe(n[d]).subscribe(ue(o,g=>{f||(f=!0,l--),a[d]=g},()=>u--,void 0,()=>{(!u||!f)&&(l||o.next(r?Ll(r,a):a),o.complete())}))}});return e?i.pipe(Ol(e)):i}function Xp(...t){let e=zn(t),n=mD(t,1/0),r=t;return r.length?r.length===1?Oe(r[0]):Kr(n)(ve(r,e)):Pt}function ut(t,e){return ae((n,r)=>{let i=0;n.subscribe(ue(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Qr(t){return ae((e,n)=>{let r=null,i=!1,o;r=e.subscribe(ue(n,void 0,void 0,s=>{o=Oe(t(s,Qr(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function AD(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(ue(s,d=>{let f=l++;u=a?t(u,d,f):(a=!0,d),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function _r(t,e){return ne(e)?Xe(t,e,1):Xe(t,1)}function Yr(t){return ae((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ir(t){return t<=0?()=>Pt:ae((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function eg(t){return X(()=>t)}function tg(t,e=Nt){return t=t??vN,ae((n,r)=>{let i,o=!0;n.subscribe(ue(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function vN(t,e){return t===e}function jl(t=wN){return ae((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function wN(){return new wr}function Zr(t){return ae((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function un(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ut((i,o)=>t(i,o,r)):Nt,Ir(1),n?Yr(e):jl(()=>new wr))}function Xo(t){return t<=0?()=>Pt:ae((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function ng(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ut((i,o)=>t(i,o,r)):Nt,Xo(1),n?Yr(e):jl(()=>new wr))}function tu(){return ae((t,e)=>{let n,r=!1;t.subscribe(ue(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function zi(t,e){return ae(AD(t,e,arguments.length>=2,!0))}function SD(t={}){let{connector:e=()=>new je,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,d=f=!1},b=()=>{let S=s;y(),S?.unsubscribe()};return ae((S,C)=>{l++,!f&&!d&&g();let P=u=u??e();C.add(()=>{l--,l===0&&!f&&!d&&(a=rg(b,i))}),P.subscribe(C),!s&&l>0&&(s=new vr({next:$=>P.next($),error:$=>{f=!0,g(),a=rg(y,n,$),P.error($)},complete:()=>{d=!0,g(),a=rg(y,r),P.complete()}}),Oe(S).subscribe(s))})(o)}}function rg(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new vr({next:()=>{r.unsubscribe(),t()}});return Oe(e(...n)).subscribe(r)}function Ul(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,SD({connector:()=>new _l(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Hi(...t){let e=zn(t);return ae((n,r)=>{(e?Jo(t,n,e):Jo(t,n)).subscribe(r)})}function Fe(t,e){return ae((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(ue(r,u=>{i?.unsubscribe();let l=0,d=o++;Oe(t(u,d)).subscribe(i=ue(r,f=>r.next(e?e(u,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Bl(t,e){return ne(e)?Fe(()=>t,e):Fe(()=>t)}function ig(t){return ae((e,n)=>{Oe(t).subscribe(ue(n,()=>n.complete(),Ya)),!n.closed&&e.subscribe(n)})}function et(t,e,n){let r=ne(t)||e||n?{next:t,error:e,complete:n}:t;return r?ae((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ue(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Nt}var mT="https://g.co/ng/security#xss",Z=class extends Error{constructor(e,n){super(_d(e,n)),this.code=e}};function _d(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function fu(t){return{toString:t}.toString()}var $l="__parameters__";function _N(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function yT(t,e,n){return fu(()=>{let r=_N(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,d){let f=u.hasOwnProperty($l)?u[$l]:Object.defineProperty(u,$l,{value:[]})[$l];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Xt=globalThis;function Ce(t){for(let e in t)if(t[e]===Ce)return e;throw Error("Could not find renamed property on target object.")}function IN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ot(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ot).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Ig(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var EN=Ce({__forward_ref__:Ce});function vT(t){return t.__forward_ref__=vT,t.toString=function(){return Ot(this())},t}function kt(t){return wT(t)?t():t}function wT(t){return typeof t=="function"&&t.hasOwnProperty(EN)&&t.__forward_ref__===vT}function W(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ln(t){return{providers:t.providers||[],imports:t.imports||[]}}function Id(t){return xD(t,IT)||xD(t,ET)}function _T(t){return Id(t)!==null}function xD(t,e){return t.hasOwnProperty(e)?t[e]:null}function DN(t){let e=t&&(t[IT]||t[ET]);return e||null}function MD(t){return t&&(t.hasOwnProperty(RD)||t.hasOwnProperty(TN))?t[RD]:null}var IT=Ce({\u0275prov:Ce}),RD=Ce({\u0275inj:Ce}),ET=Ce({ngInjectableDef:Ce}),TN=Ce({ngInjectorDef:Ce}),H=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=W({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function DT(t){return t&&!!t.\u0275providers}var bN=Ce({\u0275cmp:Ce}),CN=Ce({\u0275dir:Ce}),AN=Ce({\u0275pipe:Ce}),SN=Ce({\u0275mod:Ce}),Xl=Ce({\u0275fac:Ce}),nu=Ce({__NG_ELEMENT_ID__:Ce}),ND=Ce({__NG_ENV_ID__:Ce});function Wn(t){return typeof t=="string"?t:t==null?"":String(t)}function xN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Wn(t)}function MN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Z(-200,t)}function ym(t,e){throw new Z(-201,!1)}var ce=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ce||{}),Eg;function TT(){return Eg}function Ht(t){let e=Eg;return Eg=t,e}function bT(t,e,n){let r=Id(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ce.Optional)return null;if(e!==void 0)return e;ym(t,"Injector")}var RN={},ru=RN,Dg="__NG_DI_FLAG__",ed="ngTempTokenPath",NN="ngTokenPath",PN=/\n/gm,kN="\u0275",PD="__source",is;function ON(){return is}function Jr(t){let e=is;return is=t,e}function FN(t,e=ce.Default){if(is===void 0)throw new Z(-203,!1);return is===null?bT(t,void 0,e):is.get(t,e&ce.Optional?null:void 0,e)}function L(t,e=ce.Default){return(TT()||FN)(kt(t),e)}function V(t,e=ce.Default){return L(t,Ed(e))}function Ed(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Tg(t){let e=[];for(let n=0;n<t.length;n++){let r=kt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let i,o=ce.Default;for(let s=0;s<r.length;s++){let a=r[s],u=LN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(L(i,o))}else e.push(L(r))}return e}function CT(t,e){return t[Dg]=e,t.prototype[Dg]=e,t}function LN(t){return t[Dg]}function VN(t,e,n,r){let i=t[ed];throw e[PD]&&i.unshift(e[PD]),t.message=jN(`
`+t.message,i,n,r),t[NN]=i,t[ed]=null,t}function jN(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==kN?t.slice(2):t;let i=Ot(e);if(Array.isArray(e))i=e.map(Ot).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ot(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(PN,`
  `)}`}var br=CT(yT("Optional"),8);var vm=CT(yT("SkipSelf"),4);function Qi(t,e){let n=t.hasOwnProperty(Xl);return n?t[Xl]:null}function wm(t,e){t.forEach(n=>Array.isArray(n)?wm(n,e):e(n))}function AT(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function td(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function UN(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function _m(t,e,n){let r=pu(t,e);return r>=0?t[r|1]=n:(r=~r,UN(t,r,e,n)),r}function og(t,e){let n=pu(t,e);if(n>=0)return t[n|1]}function pu(t,e){return BN(t,e,1)}function BN(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var ss={},Gt=[],as=new H(""),ST=new H("",-1),xT=new H(""),nd=class{get(e,n=ru){if(n===ru){let r=new Error(`NullInjectorError: No provider for ${Ot(e)}!`);throw r.name="NullInjectorError",r}return n}},MT=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(MT||{}),Kn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Kn||{}),Sn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Sn||{});function $N(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function bg(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];qN(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function RT(t){return t===3||t===4||t===6}function qN(t){return t.charCodeAt(0)===64}function iu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?kD(t,n,i,null,e[++r]):kD(t,n,i,null,null))}}return t}function kD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var NT="ng-template";function zN(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&$N(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Im(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Im(t){return t.type===4&&t.value!==NT}function HN(t,e,n){let r=t.type===4&&!n?NT:t.value;return e===r}function GN(t,e,n){let r=4,i=t.attrs,o=i!==null?QN(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Tn(r)&&!Tn(u))return!1;if(s&&Tn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!HN(t,u,n)||u===""&&e.length===1){if(Tn(r))return!1;s=!0}}else if(r&8){if(i===null||!zN(t,i,u,n)){if(Tn(r))return!1;s=!0}}else{let l=e[++a],d=WN(u,i,Im(t),n);if(d===-1){if(Tn(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Tn(r))return!1;s=!0}}}}return Tn(r)||s}function Tn(t){return(t&1)===0}function WN(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return YN(e,t)}function KN(t,e,n=!1){for(let r=0;r<e.length;r++)if(GN(t,e[r],n))return!0;return!1}function QN(t){for(let e=0;e<t.length;e++){let n=t[e];if(RT(n))return e}return t.length}function YN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function OD(t,e){return t?":not("+e.trim()+")":e}function ZN(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Tn(s)&&(e+=OD(o,i),i=""),r=s,o=o||!Tn(r);n++}return i!==""&&(e+=OD(o,i)),e}function JN(t){return t.map(ZN).join(",")}function XN(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Tn(i))break;i=o}r++}return{attrs:e,classes:n}}function gs(t){return fu(()=>{let e=VT(t),n=Ve(G({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===MT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Kn.Emulated,styles:t.styles||Gt,_:null,schemas:t.schemas||null,tView:null,id:""});jT(n);let r=t.dependencies;return n.directiveDefs=LD(r,!1),n.pipeDefs=LD(r,!0),n.id=nP(n),n})}function eP(t){return ei(t)||kT(t)}function tP(t){return t!==null}function dn(t){return fu(()=>({type:t.type,bootstrap:t.bootstrap||Gt,declarations:t.declarations||Gt,imports:t.imports||Gt,exports:t.exports||Gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function FD(t,e){if(t==null)return ss;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Sn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Sn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function ms(t){return fu(()=>{let e=VT(t);return jT(e),e})}function PT(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ei(t){return t[bN]||null}function kT(t){return t[CN]||null}function OT(t){return t[AN]||null}function FT(t){let e=ei(t)||kT(t)||OT(t);return e!==null?e.standalone:!1}function LT(t,e){let n=t[SN]||null;if(!n&&e===!0)throw new Error(`Type ${Ot(t)} does not have '\u0275mod' property.`);return n}function VT(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ss,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Gt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:FD(t.inputs,e),outputs:FD(t.outputs),debugInfo:null}}function jT(t){t.features?.forEach(e=>e(t))}function LD(t,e){if(!t)return null;let n=e?OT:eP;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(tP)}function nP(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ii(t){return{\u0275providers:t}}function rP(...t){return{\u0275providers:UT(!0,t),\u0275fromNgModule:!0}}function UT(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return wm(e,s=>{let a=s;Cg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&BT(i,o),n}function BT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Em(i,o=>{e(o,r)})}}function Cg(t,e,n,r){if(t=kt(t),!t)return!1;let i=null,o=MD(t),s=!o&&ei(t);if(!o&&!s){let u=t.ngModule;if(o=MD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Cg(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{wm(o.imports,d=>{Cg(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&BT(l,e)}if(!a){let l=Qi(i)||(()=>new i);e({provide:i,useFactory:l,deps:Gt},i),e({provide:xT,useValue:i,multi:!0},i),e({provide:as,useValue:()=>L(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Em(u,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Em(t,e){for(let n of t)DT(n)&&(n=n.\u0275providers),Array.isArray(n)?Em(n,e):e(n)}var iP=Ce({provide:String,useValue:Ce});function $T(t){return t!==null&&typeof t=="object"&&iP in t}function oP(t){return!!(t&&t.useExisting)}function sP(t){return!!(t&&t.useFactory)}function us(t){return typeof t=="function"}function aP(t){return!!t.useClass}var Dd=new H(""),Kl={},uP={},sg;function Dm(){return sg===void 0&&(sg=new nd),sg}var Tt=class{},ou=class extends Tt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sg(e,s=>this.processProvider(s)),this.records.set(ST,es(void 0,this)),i.has("environment")&&this.records.set(Tt,es(void 0,this));let o=this.records.get(Dd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(xT,Gt,ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=_e(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Jr(this),r=Ht(void 0),i;try{return e()}finally{Jr(n),Ht(r)}}get(e,n=ru,r=ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ND))return e[ND](this);r=Ed(r);let i,o=Jr(this),s=Ht(void 0);try{if(!(r&ce.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=fP(e)&&Id(e);l&&this.injectableDefInScope(l)?u=es(Ag(e),Kl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ce.Self?Dm():this.parent;return n=r&ce.Optional&&n===ru?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ed]=a[ed]||[]).unshift(Ot(e)),o)throw a;return VN(a,e,"R3InjectorError",this.source)}else throw a}finally{Ht(s),Jr(o)}}resolveInjectorInitializers(){let e=_e(null),n=Jr(this),r=Ht(void 0),i;try{let o=this.get(as,Gt,ce.Self);for(let s of o)s()}finally{Jr(n),Ht(r),_e(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ot(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Z(205,!1)}processProvider(e){e=kt(e);let n=us(e)?e:kt(e&&e.provide),r=lP(e);if(!us(e)&&e.multi===!0){let i=this.records.get(n);i||(i=es(void 0,Kl,!0),i.factory=()=>Tg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=_e(null);try{return n.value===Kl&&(n.value=uP,n.value=n.factory()),typeof n.value=="object"&&n.value&&hP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{_e(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=kt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ag(t){let e=Id(t),n=e!==null?e.factory:Qi(t);if(n!==null)return n;if(t instanceof H)throw new Z(204,!1);if(t instanceof Function)return cP(t);throw new Z(204,!1)}function cP(t){if(t.length>0)throw new Z(204,!1);let n=DN(t);return n!==null?()=>n.factory(t):()=>new t}function lP(t){if($T(t))return es(void 0,t.useValue);{let e=qT(t);return es(e,Kl)}}function qT(t,e,n){let r;if(us(t)){let i=kt(t);return Qi(i)||Ag(i)}else if($T(t))r=()=>kt(t.useValue);else if(sP(t))r=()=>t.useFactory(...Tg(t.deps||[]));else if(oP(t))r=()=>L(kt(t.useExisting));else{let i=kt(t&&(t.useClass||t.provide));if(dP(t))r=()=>new i(...Tg(t.deps));else return Qi(i)||Ag(i)}return r}function es(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function dP(t){return!!t.deps}function hP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function fP(t){return typeof t=="function"||typeof t=="object"&&t instanceof H}function Sg(t,e){for(let n of t)Array.isArray(n)?Sg(n,e):n&&DT(n)?Sg(n.\u0275providers,e):e(n)}function Nn(t,e){t instanceof ou&&t.assertNotDestroyed();let n,r=Jr(t),i=Ht(void 0);try{return e()}finally{Jr(r),Ht(i)}}function zT(){return TT()!==void 0||ON()!=null}function pP(t){if(!zT())throw new Z(-203,!1)}function gP(t){return typeof t=="function"}var Xn=0,de=1,te=2,bt=3,An=4,Pn=5,rd=6,su=7,xn=8,cs=9,Mn=10,Ue=11,au=12,VD=13,ys=14,Qn=15,Td=16,ts=17,ls=18,bd=19,HT=20,Xr=21,ag=22,Yi=23,Rn=25,Tm=1;var Zi=7,id=8,od=9,cn=10,bm=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(bm||{});function Wi(t){return Array.isArray(t)&&typeof t[Tm]=="object"}function Cr(t){return Array.isArray(t)&&t[Tm]===!0}function Cm(t){return(t.flags&4)!==0}function Cd(t){return t.componentOffset>-1}function Ad(t){return(t.flags&1)===1}function Er(t){return!!t.template}function mP(t){return(t[te]&512)!==0}var xg=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function GT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function no(){return WT}function WT(t){return t.type.prototype.ngOnChanges&&(t.setInput=vP),yP}no.ngInherit=!0;function yP(){let t=QT(this),e=t?.current;if(e){let n=t.previous;if(n===ss)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function vP(t,e,n,r,i){let o=this.declaredInputs[r],s=QT(t)||wP(t,{previous:ss,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new xg(l&&l.currentValue,n,u===ss),GT(t,e,i,n)}var KT="__ngSimpleChanges__";function QT(t){return t[KT]||null}function wP(t,e){return t[KT]=e}var jD=null;var Hn=function(t,e,n){jD?.(t,e,n)},_P="svg",IP="math",EP=!1;function DP(){return EP}function Yn(t){for(;Array.isArray(t);)t=t[Xn];return t}function TP(t){for(;Array.isArray(t);){if(typeof t[Tm]=="object")return t;t=t[Xn]}return null}function YT(t,e){return Yn(e[t])}function hn(t,e){return Yn(e[t.index])}function ZT(t,e){return t.data[e]}function bP(t,e){return t[e]}function oi(t,e){let n=e[t];return Wi(n)?n:n[Xn]}function Am(t){return(t[te]&128)===128}function CP(t){return Cr(t[bt])}function ds(t,e){return e==null?null:t[e]}function JT(t){t[ts]=0}function AP(t){t[te]&1024||(t[te]|=1024,Am(t)&&uu(t))}function SP(t,e){for(;t>0;)e=e[ys],t--;return e}function Sm(t){return!!(t[te]&9216||t[Yi]?.dirty)}function Mg(t){t[Mn].changeDetectionScheduler?.notify(1),Sm(t)?uu(t):t[te]&64&&(DP()?(t[te]|=1024,uu(t)):t[Mn].changeDetectionScheduler?.notify())}function uu(t){t[Mn].changeDetectionScheduler?.notify();let e=cu(t);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!Am(e)));)e=cu(e)}function XT(t,e){if((t[te]&256)===256)throw new Z(911,!1);t[Xr]===null&&(t[Xr]=[]),t[Xr].push(e)}function xP(t,e){if(t[Xr]===null)return;let n=t[Xr].indexOf(e);n!==-1&&t[Xr].splice(n,1)}function cu(t){let e=t[bt];return Cr(e)?e[bt]:e}var le={lFrame:c0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function MP(){return le.lFrame.elementDepthCount}function RP(){le.lFrame.elementDepthCount++}function NP(){le.lFrame.elementDepthCount--}function e0(){return le.bindingsEnabled}function PP(){return le.skipHydrationRootTNode!==null}function kP(t){return le.skipHydrationRootTNode===t}function OP(){le.skipHydrationRootTNode=null}function fe(){return le.lFrame.lView}function tt(){return le.lFrame.tView}function Wt(t){return le.lFrame.contextLView=t,t[xn]}function Kt(t){return le.lFrame.contextLView=null,t}function Ft(){let t=t0();for(;t!==null&&t.type===64;)t=t.parent;return t}function t0(){return le.lFrame.currentTNode}function FP(){let t=le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ro(t,e){let n=le.lFrame;n.currentTNode=t,n.isParent=e}function xm(){return le.lFrame.isParent}function n0(){le.lFrame.isParent=!1}function r0(){let t=le.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function i0(){return le.lFrame.bindingIndex}function LP(t){return le.lFrame.bindingIndex=t}function gu(){return le.lFrame.bindingIndex++}function Sd(t){let e=le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function VP(){return le.lFrame.inI18n}function jP(t,e){let n=le.lFrame;n.bindingIndex=n.bindingRootIndex=t,Rg(e)}function UP(){return le.lFrame.currentDirectiveIndex}function Rg(t){le.lFrame.currentDirectiveIndex=t}function o0(t){let e=le.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function s0(t){le.lFrame.currentQueryIndex=t}function BP(t){let e=t[de];return e.type===2?e.declTNode:e.type===1?t[Pn]:null}function a0(t,e,n){if(n&ce.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&ce.Host);)if(i=BP(o),i===null||(o=o[ys],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=le.lFrame=u0();return r.currentTNode=e,r.lView=t,!0}function Mm(t){let e=u0(),n=t[de];le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function u0(){let t=le.lFrame,e=t===null?null:t.child;return e===null?c0(t):e}function c0(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function l0(){let t=le.lFrame;return le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var d0=l0;function Rm(){let t=l0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function $P(t){return(le.lFrame.contextLView=SP(t,le.lFrame.contextLView))[xn]}function Ar(){return le.lFrame.selectedIndex}function Ji(t){le.lFrame.selectedIndex=t}function vs(){let t=le.lFrame;return ZT(t.tView,t.selectedIndex)}function qP(){return le.lFrame.currentNamespace}var h0=!0;function xd(){return h0}function Md(t){h0=t}function zP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=WT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Rd(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function Ql(t,e,n){f0(t,e,3,n)}function Yl(t,e,n,r){(t[te]&3)===n&&f0(t,e,n,r)}function ug(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function f0(t,e,n,r){let i=r!==void 0?t[ts]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[ts]+=65536),(a<o||o==-1)&&(HP(t,n,e,u),t[ts]=(t[ts]&4294901760)+u+2),u++}function UD(t,e){Hn(4,t,e);let n=_e(null);try{e.call(t)}finally{_e(n),Hn(5,t,e)}}function HP(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[te]>>14<t[ts]>>16&&(t[te]&3)===e&&(t[te]+=16384,UD(a,o)):UD(a,o)}var os=-1,Xi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function GP(t){return t instanceof Xi}function WP(t){return(t.flags&8)!==0}function KP(t){return(t.flags&16)!==0}function p0(t){return t!==os}function sd(t){return t&32767}function QP(t){return t>>16}function ad(t,e){let n=QP(t),r=e;for(;n>0;)r=r[ys],n--;return r}var Ng=!0;function ud(t){let e=Ng;return Ng=t,e}var YP=256,g0=YP-1,m0=5,ZP=0,Gn={};function JP(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(nu)&&(r=n[nu]),r==null&&(r=n[nu]=ZP++);let i=r&g0,o=1<<i;e.data[t+(i>>m0)]|=o}function cd(t,e){let n=y0(t,e);if(n!==-1)return n;let r=e[de];r.firstCreatePass&&(t.injectorIndex=e.length,cg(r.data,t),cg(e,null),cg(r.blueprint,null));let i=Nm(t,e),o=t.injectorIndex;if(p0(i)){let s=sd(i),a=ad(i,e),u=a[de].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function cg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function y0(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Nm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=E0(i),r===null)return os;if(n++,i=i[ys],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return os}function Pg(t,e,n){JP(t,e,n)}function XP(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(RT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function v0(t,e,n){if(n&ce.Optional||t!==void 0)return t;ym(e,"NodeInjector")}function w0(t,e,n,r){if(n&ce.Optional&&r===void 0&&(r=null),!(n&(ce.Self|ce.Host))){let i=t[cs],o=Ht(void 0);try{return i?i.get(e,r,n&ce.Optional):bT(e,r,n&ce.Optional)}finally{Ht(o)}}return v0(r,e,n)}function _0(t,e,n,r=ce.Default,i){if(t!==null){if(e[te]&2048&&!(r&ce.Self)){let s=i1(t,e,n,r,Gn);if(s!==Gn)return s}let o=I0(t,e,n,r,Gn);if(o!==Gn)return o}return w0(e,n,r,i)}function I0(t,e,n,r,i){let o=n1(n);if(typeof o=="function"){if(!a0(e,t,r))return r&ce.Host?v0(i,n,r):w0(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&ce.Optional))ym(n);else return s}finally{d0()}}else if(typeof o=="number"){let s=null,a=y0(t,e),u=os,l=r&ce.Host?e[Qn][Pn]:null;for((a===-1||r&ce.SkipSelf)&&(u=a===-1?Nm(t,e):e[a+8],u===os||!$D(r,!1)?a=-1:(s=e[de],a=sd(u),e=ad(u,e)));a!==-1;){let d=e[de];if(BD(o,a,d.data)){let f=e1(a,e,n,s,r,l);if(f!==Gn)return f}u=e[a+8],u!==os&&$D(r,e[de].data[a+8]===l)&&BD(o,a,e)?(s=d,a=sd(u),e=ad(u,e)):a=-1}}return i}function e1(t,e,n,r,i,o){let s=e[de],a=s.data[t+8],u=r==null?Cd(a)&&Ng:r!=s&&(a.type&3)!==0,l=i&ce.Host&&o===a,d=t1(a,s,n,u,l);return d!==null?hs(e,s,d,a):Gn}function t1(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let b=s[y];if(y<u&&n===b||y>=u&&b.type===n)return y}if(i){let y=s[u];if(y&&Er(y)&&y.type===n)return u}return null}function hs(t,e,n,r){let i=t[n],o=e.data;if(GP(i)){let s=i;s.resolving&&MN(xN(o[n]));let a=ud(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Ht(s.injectImpl):null,d=a0(t,r,ce.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&zP(n,o[n],e)}finally{l!==null&&Ht(l),ud(a),s.resolving=!1,d0()}}return i}function n1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(nu)?t[nu]:void 0;return typeof e=="number"?e>=0?e&g0:r1:e}function BD(t,e,n){let r=1<<t;return!!(n[e+(t>>m0)]&r)}function $D(t,e){return!(t&ce.Self)&&!(t&ce.Host&&e)}var Ki=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return _0(this._tNode,this._lView,e,Ed(r),n)}};function r1(){return new Ki(Ft(),fe())}function Pm(t){return fu(()=>{let e=t.prototype.constructor,n=e[Xl]||kg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Xl]||kg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function kg(t){return wT(t)?()=>{let e=kg(kt(t));return e&&e()}:Qi(t)}function i1(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[te]&2048&&!(s[te]&512);){let a=I0(o,s,n,r|ce.Self,Gn);if(a!==Gn)return a;let u=o.parent;if(!u){let l=s[HT];if(l){let d=l.get(n,Gn,r);if(d!==Gn)return d}u=E0(s),s=s[ys]}o=u}return i}function E0(t){let e=t[de],n=e.type;return n===2?e.declTNode:n===1?t[Pn]:null}function km(t){return XP(Ft(),t)}function qD(t,e=null,n=null,r){let i=D0(t,e,n,r);return i.resolveInjectorInitializers(),i}function D0(t,e=null,n=null,r,i=new Set){let o=[n||Gt,rP(t)];return r=r||(typeof t=="object"?void 0:Ot(t)),new ou(o,e||Dm(),r||null,i)}var er=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return qD({name:""},i,r,"");{let o=r.name??"";return qD({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=ru,e.NULL=new nd,e.\u0275prov=W({token:e,providedIn:"any",factory:()=>L(ST)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var o1="ngOriginalError";function lg(t){return t[o1]}var Zn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&lg(e);for(;n&&lg(n);)n=lg(n);return n||null}},T0=new H("",{providedIn:"root",factory:()=>V(Zn).handleError.bind(void 0)}),Om=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=s1,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Og=class extends Om{constructor(e){super(),this._lView=e}onDestroy(e){return XT(this._lView,e),()=>xP(this._lView,e)}};function s1(){return new Og(fe())}function a1(){return Nd(Ft(),fe())}function Nd(t,e){return new mu(hn(t,e))}var mu=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=a1;let t=e;return t})();var Fg=class extends je{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,zT()&&(this.destroyRef=V(Om,{optional:!0})??void 0)}emit(e){let n=_e(null);try{super.next(e)}finally{_e(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=dg(o),i&&(i=dg(i)),s&&(s=dg(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ke&&e.add(a),a}};function dg(t){return e=>{setTimeout(t,void 0,e)}}var Cn=Fg;function b0(t){return(t.flags&128)===128}var C0=new Map,u1=0;function c1(){return u1++}function l1(t){C0.set(t[bd],t)}function d1(t){C0.delete(t[bd])}var zD="__ngContext__";function ti(t,e){Wi(e)?(t[zD]=e[bd],l1(e)):t[zD]=e}function A0(t){return x0(t[au])}function S0(t){return x0(t[An])}function x0(t){for(;t!==null&&!Cr(t);)t=t[An];return t}var Lg;function M0(t){Lg=t}function R0(){if(Lg!==void 0)return Lg;if(typeof document<"u")return document;throw new Z(210,!1)}var Fm=new H("",{providedIn:"root",factory:()=>h1}),h1="ng",Lm=new H(""),ht=new H("",{providedIn:"platform",factory:()=>"unknown"});var Vm=new H("",{providedIn:"root",factory:()=>R0().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var f1="h",p1="b";var g1=()=>null;function jm(t,e,n=!1){return g1(t,e,n)}var N0=!1,m1=new H("",{providedIn:"root",factory:()=>N0});var ql;function y1(){if(ql===void 0&&(ql=null,Xt.trustedTypes))try{ql=Xt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ql}function Pd(t){return y1()?.createHTML(t)||t}var zl;function P0(){if(zl===void 0&&(zl=null,Xt.trustedTypes))try{zl=Xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return zl}function HD(t){return P0()?.createHTML(t)||t}function GD(t){return P0()?.createScriptURL(t)||t}var Dr=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${mT})`}},Vg=class extends Dr{getTypeName(){return"HTML"}},jg=class extends Dr{getTypeName(){return"Style"}},Ug=class extends Dr{getTypeName(){return"Script"}},Bg=class extends Dr{getTypeName(){return"URL"}},$g=class extends Dr{getTypeName(){return"ResourceURL"}};function fn(t){return t instanceof Dr?t.changingThisBreaksApplicationSecurity:t}function Sr(t,e){let n=v1(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${mT})`)}return n===e}function v1(t){return t instanceof Dr&&t.getTypeName()||null}function k0(t){return new Vg(t)}function O0(t){return new jg(t)}function F0(t){return new Ug(t)}function L0(t){return new Bg(t)}function V0(t){return new $g(t)}function w1(t){let e=new zg(t);return _1()?new qg(e):e}var qg=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(Pd(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},zg=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=Pd(e),n}};function _1(){try{return!!new window.DOMParser().parseFromString(Pd(""),"text/html")}catch{return!1}}var I1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function kd(t){return t=String(t),t.match(I1)?t:"unsafe:"+t}function xr(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function yu(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var j0=xr("area,br,col,hr,img,wbr"),U0=xr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),B0=xr("rp,rt"),E1=yu(B0,U0),D1=yu(U0,xr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),T1=yu(B0,xr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),WD=yu(j0,D1,T1,E1),$0=xr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),b1=xr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),C1=xr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),A1=yu($0,b1,C1),S1=xr("script,style,template"),Hg=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0,i=[];for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){i.push(n),n=R1(n);continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let o=M1(n);if(o){n=o;break}n=i.pop()}}return this.buf.join("")}startElement(e){let n=KD(e).toLowerCase();if(!WD.hasOwnProperty(n))return this.sanitizedSomething=!0,!S1.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!A1.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=o.value;$0[a]&&(u=kd(u)),this.buf.push(" ",s,'="',QD(u),'"')}return this.buf.push(">"),!0}endElement(e){let n=KD(e).toLowerCase();WD.hasOwnProperty(n)&&!j0.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(QD(e))}};function x1(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function M1(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw q0(e);return e}function R1(t){let e=t.firstChild;if(e&&x1(t,e))throw q0(e);return e}function KD(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function q0(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var N1=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P1=/([^\#-~ |!])/g;function QD(t){return t.replace(/&/g,"&amp;").replace(N1,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(P1,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Hl;function Um(t,e){let n=null;try{Hl=Hl||w1(t);let r=e?String(e):"";n=Hl.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Hl.getInertBodyElement(r)}while(r!==o);let a=new Hg().sanitizeChildren(YD(n)||n);return Pd(a)}finally{if(n){let r=YD(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function YD(t){return"content"in t&&k1(t)?t.content:null}function k1(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var kn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(kn||{});function z3(t){let e=Bm();return e?HD(e.sanitize(kn.HTML,t)||""):Sr(t,"HTML")?HD(fn(t)):Um(R0(),Wn(t))}function O1(t){let e=Bm();return e?e.sanitize(kn.URL,t)||"":Sr(t,"URL")?fn(t):kd(Wn(t))}function F1(t){let e=Bm();if(e)return GD(e.sanitize(kn.RESOURCE_URL,t)||"");if(Sr(t,"ResourceURL"))return GD(fn(t));throw new Z(904,!1)}function L1(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?F1:O1}function z0(t,e,n){return L1(e,n)(t)}function Bm(){let t=fe();return t&&t[Mn].sanitizer}var V1=/^>|^->|<!--|-->|--!>|<!-$/g,j1=/(<|>)/g,U1="\u200B$1\u200B";function B1(t){return t.replace(V1,e=>e.replace(j1,U1))}function H0(t){return t instanceof Function?t():t}function $1(t){return(t??V(er)).get(ht)==="browser"}var Tr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Tr||{}),q1;function $m(t,e){return q1(t,e)}function ns(t,e,n,r,i){if(r!=null){let o,s=!1;Cr(r)?o=r:Wi(r)&&(s=!0,r=r[Xn]);let a=Yn(r);t===0&&n!==null?i==null?Y0(e,n,a):ld(e,n,a,i||null,!0):t===1&&n!==null?ld(e,n,a,i||null,!0):t===2?ak(e,a,s):t===3&&e.destroyNode(a),o!=null&&ck(e,t,o,n,i)}}function z1(t,e){return t.createText(e)}function H1(t,e,n){t.setValue(e,n)}function G1(t,e){return t.createComment(B1(e))}function G0(t,e,n){return t.createElement(e,n)}function W1(t,e){W0(t,e),e[Xn]=null,e[Pn]=null}function K1(t,e,n,r,i,o){r[Xn]=i,r[Pn]=e,Fd(t,r,n,1,i,o)}function W0(t,e){e[Mn].changeDetectionScheduler?.notify(1),Fd(t,e,e[Ue],2,null,null)}function Q1(t){let e=t[au];if(!e)return hg(t[de],t);for(;e;){let n=null;if(Wi(e))n=e[au];else{let r=e[cn];r&&(n=r)}if(!n){for(;e&&!e[An]&&e!==t;)Wi(e)&&hg(e[de],e),e=e[bt];e===null&&(e=t),Wi(e)&&hg(e[de],e),n=e&&e[An]}e=n}}function Y1(t,e,n,r){let i=cn+r,o=n.length;r>0&&(n[i-1][An]=e),r<o-cn?(e[An]=n[i],AT(n,cn+r,e)):(n.push(e),e[An]=null),e[bt]=n;let s=e[Td];s!==null&&n!==s&&Z1(s,e);let a=e[ls];a!==null&&a.insertView(t),Mg(e),e[te]|=128}function Z1(t,e){let n=t[od],i=e[bt][bt][Qn];e[Qn]!==i&&(t[te]|=bm.HasTransplantedViews),n===null?t[od]=[e]:n.push(e)}function K0(t,e){let n=t[od],r=n.indexOf(e);n.splice(r,1)}function Gg(t,e){if(t.length<=cn)return;let n=cn+e,r=t[n];if(r){let i=r[Td];i!==null&&i!==t&&K0(i,r),e>0&&(t[n-1][An]=r[An]);let o=td(t,cn+e);W1(r[de],r);let s=o[ls];s!==null&&s.detachView(o[de]),r[bt]=null,r[An]=null,r[te]&=-129}return r}function Q0(t,e){if(!(e[te]&256)){let n=e[Ue];n.destroyNode&&Fd(t,e,n,3,null,null),Q1(e)}}function hg(t,e){if(e[te]&256)return;let n=_e(null);try{e[te]&=-129,e[te]|=256,e[Yi]&&XE(e[Yi]),X1(t,e),J1(t,e),e[de].type===1&&e[Ue].destroy();let r=e[Td];if(r!==null&&Cr(e[bt])){r!==e[bt]&&K0(r,e);let i=e[ls];i!==null&&i.detachView(t)}d1(e)}finally{_e(n)}}function J1(t,e){let n=t.cleanup,r=e[su];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[su]=null);let i=e[Xr];if(i!==null){e[Xr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function X1(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Xi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Hn(4,a,u);try{u.call(a)}finally{Hn(5,a,u)}}else{Hn(4,i,o);try{o.call(i)}finally{Hn(5,i,o)}}}}}function ek(t,e,n){return tk(t,e.parent,n)}function tk(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Xn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Kn.None||o===Kn.Emulated)return null}return hn(r,n)}}function ld(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Y0(t,e,n){t.appendChild(e,n)}function ZD(t,e,n,r,i){r!==null?ld(t,e,n,r,i):Y0(t,e,n)}function nk(t,e,n,r){t.removeChild(e,n,r)}function qm(t,e){return t.parentNode(e)}function rk(t,e){return t.nextSibling(e)}function ik(t,e,n){return sk(t,e,n)}function ok(t,e,n){return t.type&40?hn(t,n):null}var sk=ok,JD;function Od(t,e,n,r){let i=ek(t,r,e),o=e[Ue],s=r.parent||e[Pn],a=ik(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)ZD(o,i,n[u],a,!1);else ZD(o,i,n,a,!1);JD!==void 0&&JD(o,r,e,n,i)}function Zl(t,e){if(e!==null){let n=e.type;if(n&3)return hn(e,t);if(n&4)return Wg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Zl(t,r);{let i=t[e.index];return Cr(i)?Wg(-1,i):Yn(i)}}else{if(n&32)return $m(e,t)()||Yn(t[e.index]);{let r=Z0(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=cu(t[Qn]);return Zl(i,r)}else return Zl(t,e.next)}}}return null}function Z0(t,e){if(e!==null){let r=t[Qn][Pn],i=e.projection;return r.projection[i]}return null}function Wg(t,e){let n=cn+t+1;if(n<e.length){let r=e[n],i=r[de].firstChild;if(i!==null)return Zl(r,i)}return e[Zi]}function ak(t,e,n){let r=qm(t,e);r&&nk(t,r,e,n)}function zm(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],u=n.type;if(s&&e===0&&(a&&ti(Yn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)zm(t,e,n.child,r,i,o,!1),ns(e,t,i,a,o);else if(u&32){let l=$m(n,r),d;for(;d=l();)ns(e,t,i,d,o);ns(e,t,i,a,o)}else u&16?uk(t,e,r,n,i,o):ns(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Fd(t,e,n,r,i,o){zm(n,r,t.firstChild,e,i,o,!1)}function uk(t,e,n,r,i,o){let s=n[Qn],u=s[Pn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let d=u[l];ns(e,t,i,d,o)}else{let l=u,d=s[bt];b0(r)&&(l.flags|=128),zm(t,e,l,d,i,o,!0)}}function ck(t,e,n,r,i){let o=n[Zi],s=Yn(n);o!==s&&ns(e,t,r,o,i);for(let a=cn;a<n.length;a++){let u=n[a];Fd(u[de],u,t,e,r,o)}}function lk(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Tr.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Tr.Important),t.setStyle(n,r,i,o))}}function dk(t,e,n){t.setAttribute(e,"style",n)}function J0(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function X0(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&bg(t,e,r),i!==null&&J0(t,e,i),o!==null&&dk(t,e,o)}var Ct={};function At(t=1){eb(tt(),fe(),Ar()+t,!1)}function eb(t,e,n,r){if(!r)if((e[te]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Ql(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Yl(e,o,0,n)}Ji(n)}function He(t,e=ce.Default){let n=fe();if(n===null)return L(t,e);let r=Ft();return _0(r,n,kt(t),e)}function tb(){let t="invalid";throw new Error(t)}function nb(t,e,n,r,i,o){let s=_e(null);try{let a=null;i&Sn.SignalBased&&(a=e[r][Ui]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Sn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):GT(e,a,r,o)}finally{_e(s)}}function hk(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ji(~i);else{let o=i,s=n[++r],a=n[++r];jP(s,o);let u=e[o];a(2,u)}}}finally{Ji(-1)}}function Ld(t,e,n,r,i,o,s,a,u,l,d){let f=e.blueprint.slice();return f[Xn]=i,f[te]=r|4|128|8|64,(l!==null||t&&t[te]&2048)&&(f[te]|=2048),JT(f),f[bt]=f[ys]=t,f[xn]=n,f[Mn]=s||t&&t[Mn],f[Ue]=a||t&&t[Ue],f[cs]=u||t&&t[cs]||null,f[Pn]=o,f[bd]=c1(),f[rd]=d,f[HT]=l,f[Qn]=e.type==2?t[Qn]:f,f}function vu(t,e,n,r,i){let o=t.data[e];if(o===null)o=fk(t,e,n,r,i),VP()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=FP();o.injectorIndex=s===null?-1:s.injectorIndex}return ro(o,!0),o}function fk(t,e,n,r,i){let o=t0(),s=xm(),a=s?o:o&&o.parent,u=t.data[e]=vk(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function rb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ib(t,e,n,r,i){let o=Ar(),s=r&2;try{Ji(-1),s&&e.length>Rn&&eb(t,e,Rn,!1),Hn(s?2:0,i),n(r,i)}finally{Ji(o),Hn(s?3:1,i)}}function Hm(t,e,n){if(Cm(e)){let r=_e(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{_e(r)}}}function Gm(t,e,n){e0()&&(Tk(t,e,n,hn(n,e)),(n.flags&64)===64&&ab(t,e,n))}function Wm(t,e,n=hn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function ob(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Km(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Km(t,e,n,r,i,o,s,a,u,l,d){let f=Rn+r,g=f+i,y=pk(f,g),b=typeof l=="function"?l():l;return y[de]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:d}}function pk(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ct);return n}function gk(t,e,n,r){let o=r.get(m1,N0)||n===Kn.ShadowDom,s=t.selectRootElement(e,o);return mk(s),s}function mk(t){yk(t)}var yk=()=>null;function vk(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return PP()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function XD(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Sn.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?eT(r,n,l,a,u):eT(r,n,l,a)}return r}function eT(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function wk(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,l=null;for(let d=r;d<i;d++){let f=o[d],g=n?n.get(f):null,y=g?g.inputs:null,b=g?g.outputs:null;u=XD(0,f.inputs,d,u,y),l=XD(1,f.outputs,d,l,b);let S=u!==null&&s!==null&&!Im(e)?Ok(u,d,s):null;a.push(S)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function _k(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function wu(t,e,n,r,i,o,s,a){let u=hn(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Ym(t,n,d,r,i),Cd(e)&&Ik(n,e.index)):e.type&3?(r=_k(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function Ik(t,e){let n=oi(e,t);n[te]&16||(n[te]|=64)}function Qm(t,e,n,r){if(e0()){let i=r===null?null:{"":-1},o=Ck(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&sb(t,e,n,s,i,a),i&&Ak(n,r,i)}n.mergedAttrs=iu(n.mergedAttrs,n.attrs)}function sb(t,e,n,r,i,o){for(let l=0;l<r.length;l++)Pg(cd(n,e),t,r[l].type);xk(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,u=rb(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=iu(n.mergedAttrs,d.hostAttrs),Mk(t,n,e,u,d),Sk(u,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}wk(t,n,o)}function Ek(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Dk(s)!=a&&s.push(a),s.push(n,r,o)}}function Dk(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Tk(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Cd(n)&&Rk(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||cd(n,e),ti(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],l=hs(e,t,a,n);if(ti(l,e),s!==null&&kk(e,a-i,l,u,n,s),Er(u)){let d=oi(n.index,e);d[xn]=hs(e,t,a,n)}}}function ab(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=UP();try{Ji(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Rg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&bk(u,l)}}finally{Ji(-1),Rg(s)}}function bk(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Ck(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(KN(e,s.selectors,!1))if(r||(r=[]),Er(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Kg(t,e,u)}else r.unshift(s),Kg(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Kg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Ak(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new Z(-301,!1);r.push(e[i],o)}}}function Sk(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Er(e)&&(n[""]=t)}}function xk(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Mk(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Qi(i.type,!0)),s=new Xi(o,Er(i),He);t.blueprint[r]=s,n[r]=s,Ek(t,e,r,rb(t,n,i.hostVars,Ct),i)}function Rk(t,e,n){let r=hn(e,t),i=ob(n),o=t[Mn].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Vd(t,Ld(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function Nk(t,e,n,r,i,o){let s=hn(t,e);Pk(e[Ue],s,o,t.value,n,r,i)}function Pk(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Wn(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function kk(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],d=s[a++],f=s[a++];nb(r,n,u,l,d,f)}}function Ok(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function ub(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function cb(t,e){let n=t.contentQueries;if(n!==null){let r=_e(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];s0(o),a.contentQueries(2,e[s],s)}}}finally{_e(r)}}}function Vd(t,e){return t[au]?t[VD][An]=e:t[au]=e,t[VD]=e,e}function Qg(t,e,n){s0(0);let r=_e(null);try{e(t,n)}finally{_e(r)}}function Fk(t){return t[su]||(t[su]=[])}function Lk(t){return t.cleanup||(t.cleanup=[])}function Vk(t,e,n){return(t===null||Er(t))&&(n=TP(n[e.index])),n[Ue]}function lb(t,e){let n=t[cs],r=n?n.get(Zn,null):null;r&&r.handleError(e)}function Ym(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],l=e[s],d=t.data[s];nb(d,l,r,a,u,i)}}function Zm(t,e,n){let r=YT(e,t);H1(t[Ue],r,n)}function jk(t,e){let n=oi(e,t),r=n[de];Uk(r,n);let i=n[Xn];i!==null&&n[rd]===null&&(n[rd]=jm(i,n[cs])),Jm(r,n,n[xn])}function Uk(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Jm(t,e,n){Mm(e);try{let r=t.viewQuery;r!==null&&Qg(1,r,n);let i=t.template;i!==null&&ib(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ls]?.finishViewCreation(t),t.staticContentQueries&&cb(t,e),t.staticViewQueries&&Qg(2,t.viewQuery,n);let o=t.components;o!==null&&Bk(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,Rm()}}function Bk(t,e){for(let n=0;n<e.length;n++)jk(t,e[n])}function $k(t,e,n,r){let i=_e(null);try{let o=e.tView,a=t[te]&4096?4096:16,u=Ld(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Td]=l;let d=t[ls];return d!==null&&(u[ls]=d.createEmbeddedView(o)),Jm(o,u,n),u}finally{_e(i)}}function tT(t,e){return!e||e.firstChild===null||b0(t)}function qk(t,e,n,r=!0){let i=e[de];if(Y1(i,e,t,n),r){let s=Wg(n,t),a=e[Ue],u=qm(a,t[Zi]);u!==null&&K1(i,t[Pn],a,e,u,s)}let o=e[rd];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function dd(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(Yn(o)),Cr(o)&&zk(o,r);let s=n.type;if(s&8)dd(t,e,n.child,r);else if(s&32){let a=$m(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=Z0(e,n);if(Array.isArray(a))r.push(...a);else{let u=cu(e[Qn]);dd(u[de],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function zk(t,e){for(let n=cn;n<t.length;n++){let r=t[n],i=r[de].firstChild;i!==null&&dd(r[de],r,i,e)}t[Zi]!==t[Xn]&&e.push(t[Zi])}var db=[];function Hk(t){return t[Yi]??Gk(t)}function Gk(t){let e=db.pop()??Object.create(Kk);return e.lView=t,e}function Wk(t){t.lView[Yi]!==t&&(t.lView=null,db.push(t))}var Kk=Ve(G({},Vp),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{uu(t.lView)},consumerOnSignalRead(){this.lView[Yi]=this}}),hb=100;function fb(t,e=!0,n=0){let r=t[Mn],i=r.rendererFactory,o=!1;o||i.begin?.();try{Qk(t,n)}catch(s){throw e&&lb(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function Qk(t,e){Yg(t,e);let n=0;for(;Sm(t);){if(n===hb)throw new Z(103,!1);n++,Yg(t,1)}}function Yk(t,e,n,r){let i=e[te];if((i&256)===256)return;let o=!1;!o&&e[Mn].inlineEffectRunner?.flush(),Mm(e);let s=null,a=null;!o&&Zk(t)&&(a=Hk(e),s=ZE(a));try{JT(e),LP(t.bindingStartIndex),n!==null&&ib(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let f=t.preOrderCheckHooks;f!==null&&Ql(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Yl(e,f,0,null),ug(e,0)}if(Jk(e),pb(e,0),t.contentQueries!==null&&cb(t,e),!o)if(u){let f=t.contentCheckHooks;f!==null&&Ql(e,f)}else{let f=t.contentHooks;f!==null&&Yl(e,f,1),ug(e,1)}hk(t,e);let l=t.components;l!==null&&mb(e,l,0);let d=t.viewQuery;if(d!==null&&Qg(2,d,r),!o)if(u){let f=t.viewCheckHooks;f!==null&&Ql(e,f)}else{let f=t.viewHooks;f!==null&&Yl(e,f,2),ug(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ag]){for(let f of e[ag])f();e[ag]=null}o||(e[te]&=-73)}catch(u){throw uu(e),u}finally{a!==null&&(JE(a,s),Wk(a)),Rm()}}function Zk(t){return t.type!==2}function pb(t,e){for(let n=A0(t);n!==null;n=S0(n))for(let r=cn;r<n.length;r++){let i=n[r];gb(i,e)}}function Jk(t){for(let e=A0(t);e!==null;e=S0(e)){if(!(e[te]&bm.HasTransplantedViews))continue;let n=e[od];for(let r=0;r<n.length;r++){let i=n[r],o=i[bt];AP(i)}}}function Xk(t,e,n){let r=oi(e,t);gb(r,n)}function gb(t,e){Am(t)&&Yg(t,e)}function Yg(t,e){let r=t[de],i=t[te],o=t[Yi],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&jp(o)),o&&(o.dirty=!1),t[te]&=-9217,s)Yk(r,t,r.template,t[xn]);else if(i&8192){pb(t,1);let a=r.components;a!==null&&mb(t,a,1)}}function mb(t,e,n){for(let r=0;r<e.length;r++)Xk(t,e[r],n)}function Xm(t){for(t[Mn].changeDetectionScheduler?.notify();t;){t[te]|=64;let e=cu(t);if(mP(t)&&!e)return t;t=e}return null}var eo=class{get rootNodes(){let e=this._lView,n=e[de];return dd(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[xn]}set context(e){this._lView[xn]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[bt];if(Cr(e)){let n=e[id],r=n?n.indexOf(this):-1;r>-1&&(Gg(e,r),td(n,r))}this._attachedToViewContainer=!1}Q0(this._lView[de],this._lView)}onDestroy(e){XT(this._lView,e)}markForCheck(){Xm(this._cdRefInjectingView||this._lView)}detach(){this._lView[te]&=-129}reattach(){Mg(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,fb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,W0(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e,Mg(this._lView)}},jd=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=nO;let t=e;return t})(),eO=jd,tO=class extends eO{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=$k(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new eo(i)}};function nO(){return rO(Ft(),fe())}function rO(t,e){return t.type&4?new tO(e,t,Nd(t,e)):null}var G3=new RegExp(`^(\\d+)*(${p1}|${f1})*(.*)`);var iO=()=>null;function nT(t,e){return iO(t,e)}var hd=class{},Zg=class{},fd=class{};function oO(t){let e=Error(`No component factory found for ${Ot(t)}.`);return e[sO]=t,e}var sO="ngComponent";var Jg=class{resolveComponentFactory(e){throw oO(e)}},Ud=(()=>{let e=class e{};e.NULL=new Jg;let t=e;return t})(),lu=class{},Bd=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>aO();let t=e;return t})();function aO(){let t=fe(),e=Ft(),n=oi(e.index,t);return(Wi(n)?n:t)[Ue]}var uO=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),fg={};var rT=new Set;function _u(t){rT.has(t)||(rT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function iT(...t){}function cO(){let t=typeof Xt.requestAnimationFrame=="function",e=Xt[t?"requestAnimationFrame":"setTimeout"],n=Xt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var pe=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cn(!1),this.onMicrotaskEmpty=new Cn(!1),this.onStable=new Cn(!1),this.onError=new Cn(!1),typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=cO().nativeRequestAnimationFrame,hO(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Z(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,lO,iT,iT);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},lO={};function ey(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function dO(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Xt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Xg(t),t.isCheckStableRunning=!0,ey(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Xg(t))}function hO(t){let e=()=>{dO(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(fO(a))return n.invokeTask(i,o,s,a);try{return oT(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),sT(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return oT(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),sT(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Xg(t),ey(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Xg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function oT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function sT(t){t._nesting--,ey(t)}function fO(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var rs=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(rs||{}),pO={destroy(){}};function $d(t,e){!e&&pP($d);let n=e?.injector??V(er);if(!$1(n))return pO;_u("NgAfterNextRender");let r=n.get(ty),i=r.handler??=new tm,o=e?.phase??rs.MixedReadWrite,s=()=>{i.unregister(u),a()},a=n.get(Om).onDestroy(s),u=Nn(n,()=>new em(o,()=>{s(),t()}));return i.register(u),{destroy:s}}var em=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=V(pe),this.errorHandler=V(Zn,{optional:!0}),V(hd,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},tm=class{constructor(){this.executingCallbacks=!1,this.buckets={[rs.EarlyRead]:new Set,[rs.Write]:new Set,[rs.MixedReadWrite]:new Set,[rs.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},ty=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function pd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Ig(i,a);else if(o==2){let u=a,l=e[++s];r=Ig(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var gd=class extends Ud{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ei(e);return new fs(n,this.ngModule)}};function aT(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function gO(t){let e=t.toLowerCase();return e==="svg"?_P:e==="math"?IP:null}var nm=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ed(r);let i=this.injector.get(e,fg,r);return i!==fg||n===fg?i:this.parentInjector.get(e,n,r)}},fs=class extends fd{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=aT(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return aT(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=JN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=_e(null);try{i=i||this.ngModule;let s=i instanceof Tt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new nm(e,s):e,u=a.get(lu,null);if(u===null)throw new Z(407,!1);let l=a.get(uO,null),d=a.get(ty,null),f=a.get(hd,null),g={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},y=u.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",S=r?gk(y,r,this.componentDef.encapsulation,a):G0(y,b,gO(b)),C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let P=null;S!==null&&(P=jm(S,a,!0));let $=Km(0,null,null,1,0,null,null,null,null,null,null),F=Ld(null,$,null,C,null,null,g,y,a,null,P);Mm(F);let q,ee;try{let Q=this.componentDef,I,v=null;Q.findHostDirectiveDefs?(I=[],v=new Map,Q.findHostDirectiveDefs(Q,I,v),I.push(Q)):I=[Q];let _=mO(F,S),E=yO(_,S,Q,I,F,g,y);ee=ZT($,Rn),S&&_O(y,Q,S,r),n!==void 0&&IO(ee,this.ngContentSelectors,n),q=wO(E,Q,I,v,F,[EO]),Jm($,F,null)}finally{Rm()}return new rm(this.componentType,q,Nd(ee,F),F,ee)}finally{_e(o)}}},rm=class extends Zg{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new eo(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Ym(o[de],o,i,e,n),this.previousInputValues.set(e,n);let s=oi(this._tNode.index,o);Xm(s)}}get injector(){return new Ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function mO(t,e){let n=t[de],r=Rn;return t[r]=e,vu(n,r,2,"#host",null)}function yO(t,e,n,r,i,o,s){let a=i[de];vO(r,t,e,s);let u=null;e!==null&&(u=jm(e,i[cs]));let l=o.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=Ld(i,ob(n),null,d,i[t.index],t,o,l,null,null,u);return a.firstCreatePass&&Kg(a,t,r.length-1),Vd(i,f),i[t.index]=f}function vO(t,e,n,r){for(let i of t)e.mergedAttrs=iu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(pd(e,e.mergedAttrs,!0),n!==null&&X0(r,n,e))}function wO(t,e,n,r,i,o){let s=Ft(),a=i[de],u=hn(s,i);sb(a,i,s,n,null,r);for(let d=0;d<n.length;d++){let f=s.directiveStart+d,g=hs(i,a,f,s);ti(g,i)}ab(a,i,s),u&&ti(u,i);let l=hs(i,a,s.directiveStart+s.componentOffset,s);if(t[xn]=i[xn]=l,o!==null)for(let d of o)d(l,e);return Hm(a,s,i),l}function _O(t,e,n,r){if(r)bg(t,n,["ng-version","17.3.11"]);else{let{attrs:i,classes:o}=XN(e.selectors[0]);i&&bg(t,n,i),o&&o.length>0&&J0(t,n,o.join(" "))}}function IO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function EO(){let t=Ft();Rd(fe()[de],t)}var ws=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=DO;let t=e;return t})();function DO(){let t=Ft();return bO(t,fe())}var TO=ws,yb=class extends TO{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Nd(this._hostTNode,this._hostLView)}get injector(){return new Ki(this._hostTNode,this._hostLView)}get parentInjector(){let e=Nm(this._hostTNode,this._hostLView);if(p0(e)){let n=ad(e,this._hostLView),r=sd(e),i=n[de].data[r+8];return new Ki(i,n)}else return new Ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=uT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-cn}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=nT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,tT(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!gP(e),a;if(s)a=n;else{let b=n||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new fs(ei(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let S=(s?l:this.parentInjector).get(Tt,null);S&&(o=S)}let d=ei(u.componentType??{}),f=nT(this._lContainer,d?.id??null),g=f?.firstChild??null,y=u.create(l,i,g,o);return this.insertImpl(y.hostView,a,tT(this._hostTNode,f)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(CP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[bt],l=new yb(u,u[Pn],u[bt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return qk(s,i,o,r),e.attachToViewContainerRef(),AT(pg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=uT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Gg(this._lContainer,n);r&&(td(pg(this._lContainer),n),Q0(r[de],r))}detach(e){let n=this._adjustIndex(e,-1),r=Gg(this._lContainer,n);return r&&td(pg(this._lContainer),n)!=null?new eo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function uT(t){return t[id]}function pg(t){return t[id]||(t[id]=[])}function bO(t,e){let n,r=e[t.index];return Cr(r)?n=r:(n=ub(r,e,null,t),e[t.index]=n,Vd(e,n)),AO(n,e,t,r),new yb(n,t,e)}function CO(t,e){let n=t[Ue],r=n.createComment(""),i=hn(e,t),o=qm(n,i);return ld(n,o,r,rk(n,i),!1),r}var AO=MO,SO=()=>!1;function xO(t,e,n){return SO(t,e,n)}function MO(t,e,n,r){if(t[Zi])return;let i;n.type&8?i=Yn(r):i=CO(e,n),t[Zi]=i}function RO(t){return typeof t=="function"&&t[Ui]!==void 0}function K3(t,e){_u("NgSignals");let n=oD(t),r=n[Ui];return e?.equal&&(r.equal=e.equal),n.set=i=>Up(r,i),n.update=i=>sD(r,i),n.asReadonly=NO.bind(n),n}function NO(){let t=this[Ui];if(t.readonlyFn===void 0){let e=()=>this();e[Ui]=t,t.readonlyFn=e}return t.readonlyFn}function vb(t){return RO(t)&&typeof t.set=="function"}function PO(t){return Object.getPrototypeOf(t.prototype).constructor}function kO(t){let e=PO(t.type),n=!0,r=[t];for(;e;){let i;if(Er(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Z(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Gl(t.inputs),s.inputTransforms=Gl(t.inputTransforms),s.declaredInputs=Gl(t.declaredInputs),s.outputs=Gl(t.outputs);let a=i.hostBindings;a&&jO(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&LO(t,u),l&&VO(t,l),OO(t,i),IN(t.outputs,i.outputs),Er(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===kO&&(n=!1)}}e=Object.getPrototypeOf(e)}FO(r)}function OO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function FO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=iu(i.hostAttrs,n=iu(n,i.hostAttrs))}}function Gl(t){return t===ss?{}:t===Gt?[]:t}function LO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function VO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function jO(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function ny(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var ni=class{},du=class{};var im=class extends ni{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new gd(this);let i=LT(e);this._bootstrapComponents=H0(i.bootstrap),this._r3Injector=D0(e,n,[{provide:ni,useValue:this},{provide:Ud,useValue:this.componentFactoryResolver},...r],Ot(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},om=class extends du{constructor(e){super(),this.moduleType=e}create(e){return new im(this.moduleType,e,[])}};var md=class extends ni{constructor(e){super(),this.componentFactoryResolver=new gd(this),this.instance=null;let n=new ou([...e.providers,{provide:ni,useValue:this},{provide:Ud,useValue:this.componentFactoryResolver}],e.parent||Dm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function qd(t,e,n=null){return new md({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var io=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new yt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wb(t){return BO(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function UO(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function BO(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function _b(t,e,n){return t[e]=n}function $O(t,e){return t[e]}function Jn(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function ry(t,e,n,r){let i=Jn(t,e,n);return Jn(t,e+1,r)||i}function qO(t,e,n,r,i){let o=ry(t,e,n,r);return Jn(t,e+2,i)||o}function zO(t){return(t.flags&32)===32}function HO(t,e,n,r,i,o,s,a,u){let l=e.consts,d=vu(e,t,4,s||null,ds(l,a));Qm(e,n,d,ds(l,u)),Rd(e,d);let f=d.tView=Km(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function iy(t,e,n,r,i,o,s,a){let u=fe(),l=tt(),d=t+Rn,f=l.firstCreatePass?HO(d,l,u,e,n,r,i,o,s):l.data[d];ro(f,!1);let g=GO(l,u,f,t);xd()&&Od(l,u,g,f),ti(g,u);let y=ub(g,u,g,f);return u[d]=y,Vd(u,y),xO(y,f,u),Ad(f)&&Gm(l,u,f),s!=null&&Wm(u,f,a),iy}var GO=WO;function WO(t,e,n,r){return Md(!0),e[Ue].createComment("")}function oy(t,e,n,r){let i=fe(),o=gu();if(Jn(i,o,e)){let s=tt(),a=vs();Nk(a,i,t,e,n,r)}return oy}function Ib(t,e,n,r){return Jn(t,gu(),n)?e+Wn(n)+r:Ct}function Eb(t,e,n,r,i,o){let s=i0(),a=ry(t,s,n,i);return Sd(2),a?e+Wn(n)+r+Wn(i)+o:Ct}function KO(t,e,n,r,i,o,s,a){let u=i0(),l=qO(t,u,n,i,s);return Sd(3),l?e+Wn(n)+r+Wn(i)+o+Wn(s)+a:Ct}function Wl(t,e){return t<<17|e<<2}function to(t){return t>>17&32767}function QO(t){return(t&2)==2}function YO(t,e){return t&131071|e<<17}function sm(t){return t|2}function ps(t){return(t&131068)>>2}function gg(t,e){return t&-131069|e<<2}function ZO(t){return(t&1)===1}function am(t){return t|1}function JO(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=to(s),u=ps(s);t[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||pu(f,d)>0)&&(l=!0)}else d=n;if(i)if(u!==0){let g=to(t[a+1]);t[r+1]=Wl(g,a),g!==0&&(t[g+1]=gg(t[g+1],r)),t[a+1]=YO(t[a+1],r)}else t[r+1]=Wl(a,0),a!==0&&(t[a+1]=gg(t[a+1],r)),a=r;else t[r+1]=Wl(u,0),a===0?a=r:t[u+1]=gg(t[u+1],r),u=r;l&&(t[r+1]=sm(t[r+1])),cT(t,d,r,!0),cT(t,d,r,!1),XO(e,d,t,r,o),s=Wl(a,u),o?e.classBindings=s:e.styleBindings=s}function XO(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&pu(o,e)>=0&&(n[r+1]=am(n[r+1]))}function cT(t,e,n,r){let i=t[n+1],o=e===null,s=r?to(i):ps(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];eF(u,e)&&(a=!0,t[s+1]=r?am(l):sm(l)),s=r?to(l):ps(l)}a&&(t[n+1]=r?sm(i):am(i))}function eF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?pu(t,e)>=0:!1}var bn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function tF(t){return t.substring(bn.key,bn.keyEnd)}function nF(t){return rF(t),Db(t,Tb(t,0,bn.textEnd))}function Db(t,e){let n=bn.textEnd;return n===e?-1:(e=bn.keyEnd=iF(t,bn.key=e,n),Tb(t,e,n))}function rF(t){bn.key=0,bn.keyEnd=0,bn.value=0,bn.valueEnd=0,bn.textEnd=t.length}function Tb(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function iF(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Lt(t,e,n){let r=fe(),i=gu();if(Jn(r,i,e)){let o=tt(),s=vs();wu(o,s,r,t,e,r[Ue],n,!1)}return Lt}function um(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";Ym(t,n,o[s],s,r)}function bb(t,e,n){return Cb(t,e,n,!1),bb}function oF(t,e){return Cb(t,e,null,!0),oF}function Q3(t){aF(fF,sF,t,!0)}function sF(t,e){for(let n=nF(e);n>=0;n=Db(e,n))_m(t,tF(e),!0)}function Cb(t,e,n,r){let i=fe(),o=tt(),s=Sd(2);if(o.firstUpdatePass&&Sb(o,t,s,r),e!==Ct&&Jn(i,s,e)){let a=o.data[Ar()];xb(o,a,i,i[Ue],t,i[s+1]=gF(e,n),r,s)}}function aF(t,e,n,r){let i=tt(),o=Sd(2);i.firstUpdatePass&&Sb(i,null,o,r);let s=fe();if(n!==Ct&&Jn(s,o,n)){let a=i.data[Ar()];if(Mb(a,r)&&!Ab(i,o)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=Ig(u,n||"")),um(i,a,s,n,r)}else pF(i,a,s,s[Ue],s[o+1],s[o+1]=hF(t,e,n),r,o)}}function Ab(t,e){return e>=t.expandoStartIndex}function Sb(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Ar()],s=Ab(t,n);Mb(o,r)&&e===null&&!s&&(e=!1),e=uF(i,o,e,r),JO(i,o,e,n,s,r)}}function uF(t,e,n,r){let i=o0(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=mg(null,t,e,n,r),n=hu(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=mg(i,t,e,n,r),o===null){let u=cF(t,e,r);u!==void 0&&Array.isArray(u)&&(u=mg(null,t,e,u[1],r),u=hu(u,e.attrs,r),lF(t,e,r,u))}else o=dF(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function cF(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ps(r)!==0)return t[to(r)]}function lF(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[to(i)]=r}function dF(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=hu(r,s,n)}return hu(r,e.attrs,n)}function mg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=hu(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function hu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),_m(t,s,n?!0:e[++o]))}return t===void 0?null:t}function hF(t,e,n){if(n==null||n==="")return Gt;let r=[],i=fn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function fF(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&_m(t,r,n)}function pF(t,e,n,r,i,o,s,a){i===Ct&&(i=Gt);let u=0,l=0,d=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let g=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,b=null,S;d===f?(u+=2,l+=2,g!==y&&(b=f,S=y)):f===null||d!==null&&d<f?(u+=2,b=d):(l+=2,b=f,S=y),b!==null&&xb(t,e,n,r,b,S,s,a),d=u<i.length?i[u]:null,f=l<o.length?o[l]:null}}function xb(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],d=ZO(l)?lT(u,e,n,i,ps(l),s):void 0;if(!yd(d)){yd(o)||QO(l)&&(o=lT(u,null,n,i,a,s));let f=YT(Ar(),n);lk(r,s,f,i,o)}}function lT(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),d=l?u[1]:u,f=d===null,g=n[i+1];g===Ct&&(g=f?Gt:void 0);let y=f?og(g,r):d===r?g:void 0;if(l&&!yd(y)&&(y=og(u,r)),yd(y)&&(a=y,s))return a;let b=t[i+1];i=s?to(b):ps(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=og(u,r))}return a}function yd(t){return t!==void 0}function gF(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ot(fn(t)))),t}function Mb(t,e){return(t.flags&(e?8:16))!==0}function mF(t,e,n,r,i,o){let s=e.consts,a=ds(s,i),u=vu(e,t,2,r,a);return Qm(e,n,u,ds(s,o)),u.attrs!==null&&pd(u,u.attrs,!1),u.mergedAttrs!==null&&pd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Ae(t,e,n,r){let i=fe(),o=tt(),s=Rn+t,a=i[Ue],u=o.firstCreatePass?mF(s,o,i,e,n,r):o.data[s],l=yF(o,i,u,a,e,t);i[s]=l;let d=Ad(u);return ro(u,!0),X0(a,l,u),!zO(u)&&xd()&&Od(o,i,l,u),MP()===0&&ti(l,i),RP(),d&&(Gm(o,i,u),Hm(o,u,i)),r!==null&&Wm(i,u),Ae}function Se(){let t=Ft();xm()?n0():(t=t.parent,ro(t,!1));let e=t;kP(e)&&OP(),NP();let n=tt();return n.firstCreatePass&&(Rd(n,t),Cm(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&WP(e)&&um(n,e,fe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&KP(e)&&um(n,e,fe(),e.stylesWithoutHost,!1),Se}function Iu(t,e,n,r){return Ae(t,e,n,r),Se(),Iu}var yF=(t,e,n,r,i,o)=>(Md(!0),G0(r,i,qP()));function vF(t,e,n,r,i){let o=e.consts,s=ds(o,r),a=vu(e,t,8,"ng-container",s);s!==null&&pd(a,s,!0);let u=ds(o,i);return Qm(e,n,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function wF(t,e,n){let r=fe(),i=tt(),o=t+Rn,s=i.firstCreatePass?vF(o,i,r,e,n):i.data[o];ro(s,!0);let a=IF(i,r,s,t);return r[o]=a,xd()&&Od(i,r,a,s),ti(a,r),Ad(s)&&(Gm(i,r,s),Hm(i,s,r)),n!=null&&Wm(r,s),wF}function _F(){let t=Ft(),e=tt();return xm()?n0():(t=t.parent,ro(t,!1)),e.firstCreatePass&&(Rd(e,t),Cm(t)&&e.queries.elementEnd(t)),_F}var IF=(t,e,n,r)=>(Md(!0),G1(e[Ue],""));function pn(){return fe()}function EF(t,e,n){let r=fe(),i=gu();if(Jn(r,i,e)){let o=tt(),s=vs(),a=o0(o.data),u=Vk(a,s,r);wu(o,s,r,t,e,u,n,!0)}return EF}var Gi=void 0;function DF(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var TF=["en",[["a","p"],["AM","PM"],Gi],[["AM","PM"],Gi,Gi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gi,"{1} 'at' {0}",Gi],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",DF],yg={};function gn(t){let e=bF(t),n=dT(e);if(n)return n;let r=e.split("-")[0];if(n=dT(r),n)return n;if(r==="en")return TF;throw new Z(701,!1)}function dT(t){return t in yg||(yg[t]=Xt.ng&&Xt.ng.common&&Xt.ng.common.locales&&Xt.ng.common.locales[t]),yg[t]}var Qe=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Qe||{});function bF(t){return t.toLowerCase().replace(/_/g,"-")}var vd="en-US";var CF=vd;function AF(t){typeof t=="string"&&(CF=t.toLowerCase().replace(/_/g,"-"))}function ct(t,e,n,r){let i=fe(),o=tt(),s=Ft();return Rb(o,i,i[Ue],s,t,e,r),ct}function SF(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[su],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function Rb(t,e,n,r,i,o,s){let a=Ad(r),l=t.firstCreatePass&&Lk(t),d=e[xn],f=Fk(e),g=!0;if(r.type&3||s){let S=hn(r,e),C=s?s(S):S,P=f.length,$=s?q=>s(Yn(q[r.index])):r.index,F=null;if(!s&&a&&(F=SF(t,e,i,r.index)),F!==null){let q=F.__ngLastListenerFn__||F;q.__ngNextListenerFn__=o,F.__ngLastListenerFn__=o,g=!1}else{o=fT(r,e,d,o,!1);let q=n.listen(C,i,o);f.push(o,q),l&&l.push(i,$,P,P+1)}}else o=fT(r,e,d,o,!1);let y=r.outputs,b;if(g&&y!==null&&(b=y[i])){let S=b.length;if(S)for(let C=0;C<S;C+=2){let P=b[C],$=b[C+1],ee=e[P][$].subscribe(o),Q=f.length;f.push(o,ee),l&&l.push(i,r.index,Q,-(Q+1))}}}function hT(t,e,n,r){let i=_e(null);try{return Hn(6,e,n),n(r)!==!1}catch(o){return lb(t,o),!1}finally{Hn(7,e,n),_e(i)}}function fT(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?oi(t.index,e):e;Xm(a);let u=hT(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)u=hT(e,n,l,s)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}function Qt(t=1){return $P(t)}function xF(t,e,n){return Nb(t,"",e,"",n),xF}function Nb(t,e,n,r,i){let o=fe(),s=Ib(o,e,n,r);if(s!==Ct){let a=tt(),u=vs();wu(a,u,o,t,s,o[Ue],i,!1)}return Nb}function MF(t,e,n,r,i,o,s){let a=fe(),u=Eb(a,e,n,r,i,o);if(u!==Ct){let l=tt(),d=vs();wu(l,d,a,t,u,a[Ue],s,!1)}return MF}function RF(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Re(t,e=""){let n=fe(),r=tt(),i=t+Rn,o=r.firstCreatePass?vu(r,i,1,e,null):r.data[i],s=NF(r,n,o,e,t);n[i]=s,xd()&&Od(r,n,s,o),ro(o,!1)}var NF=(t,e,n,r,i)=>(Md(!0),z1(e[Ue],r));function PF(t){return Eu("",t,""),PF}function Eu(t,e,n){let r=fe(),i=Ib(r,t,e,n);return i!==Ct&&Zm(r,Ar(),i),Eu}function kF(t,e,n,r,i){let o=fe(),s=Eb(o,t,e,n,r,i);return s!==Ct&&Zm(o,Ar(),s),kF}function OF(t,e,n,r,i,o,s){let a=fe(),u=KO(a,t,e,n,r,i,o,s);return u!==Ct&&Zm(a,Ar(),u),OF}function FF(t,e,n){vb(e)&&(e=e());let r=fe(),i=gu();if(Jn(r,i,e)){let o=tt(),s=vs();wu(o,s,r,t,e,r[Ue],n,!1)}return FF}function Y3(t,e){let n=vb(t);return n&&t.set(e),n}function LF(t,e){let n=fe(),r=tt(),i=Ft();return Rb(r,n,n[Ue],i,t,e),LF}function VF(t,e,n){let r=tt();if(r.firstCreatePass){let i=Er(t);cm(n,r.data,r.blueprint,i,!0),cm(e,r.data,r.blueprint,i,!1)}}function cm(t,e,n,r,i){if(t=kt(t),Array.isArray(t))for(let o=0;o<t.length;o++)cm(t[o],e,n,r,i);else{let o=tt(),s=fe(),a=Ft(),u=us(t)?t:kt(t.provide),l=qT(t),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(us(t)||!t.multi){let y=new Xi(l,i,He),b=wg(u,e,i?d:d+g,f);b===-1?(Pg(cd(a,s),o,u),vg(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[b]=y,s[b]=y)}else{let y=wg(u,e,d+g,f),b=wg(u,e,d,d+g),S=y>=0&&n[y],C=b>=0&&n[b];if(i&&!C||!i&&!S){Pg(cd(a,s),o,u);let P=BF(i?UF:jF,n.length,i,r,l);!i&&C&&(n[b].providerFactory=P),vg(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),s.push(P)}else{let P=Pb(n[i?b:y],l,!i&&r);vg(o,t,y>-1?y:b,P)}!i&&r&&C&&n[b].componentProviders++}}}function vg(t,e,n,r){let i=us(e),o=aP(e);if(i||o){let u=(o?kt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(n);d===-1?l.push(n,[r,u]):l[d+1].push(r,u)}else l.push(n,u)}}}function Pb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function wg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function jF(t,e,n,r){return lm(this.multi,[])}function UF(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=hs(n,n[de],this.providerFactory.index,r);o=a.slice(0,s),lm(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],lm(i,o);return o}function lm(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function BF(t,e,n,r,i){let o=new Xi(t,n,He);return o.multi=[],o.index=e,o.componentProviders=0,Pb(o,i,r&&!n),o}function Z3(t,e=[]){return n=>{n.providersResolver=(r,i)=>VF(r,i?i(t):t,e)}}var $F=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=UT(!1,r.type),o=i.length>0?qd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=W({token:e,providedIn:"environment",factory:()=>new e(L(Tt))});let t=e;return t})();function _s(t){_u("NgStandalone"),t.getStandaloneInjector=e=>e.get($F).getOrCreateStandaloneInjector(t)}function kb(t,e,n){let r=r0()+t,i=fe();return i[r]===Ct?_b(i,r,n?e.call(n):e()):$O(i,r)}function qF(t,e){let n=t[e];return n===Ct?void 0:n}function zF(t,e,n,r,i,o,s){let a=e+n;return ry(t,a,i,o)?_b(t,a+2,s?r.call(s,i,o):r(i,o)):qF(t,a+2)}function J3(t,e){let n=tt(),r,i=t+Rn;n.firstCreatePass?(r=HF(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Qi(r.type,!0)),s,a=Ht(He);try{let u=ud(!1),l=o();return ud(u),RF(n,fe(),i,l),l}finally{Ht(a)}}function HF(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function X3(t,e,n,r){let i=t+Rn,o=fe(),s=bP(o,i);return GF(o,i)?zF(o,r0(),e,s.transform,n,r,s):s.transform(n,r)}function GF(t,e){return t[de].data[e].pure}var ri=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},zd=new ri("17.3.11"),Hd=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Ob=new H("");function Du(t){return!!t&&typeof t.then=="function"}function Fb(t){return!!t&&typeof t.subscribe=="function"}var Gd=new H(""),Lb=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=V(Gd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Du(s))r.push(s);else if(Fb(s)){let a=new Promise((u,l)=>{s.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Tu=new H("");function WF(){iD(()=>{throw new Z(600,!1)})}function KF(t){return t.isBoundToModule}function QF(t,e,n){try{let r=n();return Du(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Is=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=V(T0),this.afterRenderEffectManager=V(ty),this.externalTestViews=new Set,this.beforeRender=new je,this.afterTick=new je,this.componentTypes=[],this.components=[],this.isStable=V(io).hasPendingTasks.pipe(X(r=>!r)),this._injector=V(Tt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof fd;if(!this._injector.get(Lb).done){let y=!o&&FT(r),b=!1;throw new Z(405,b)}let a;o?a=r:a=this._injector.get(Ud).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=KF(a)?void 0:this._injector.get(ni),l=i||a.selector,d=a.create(er.NULL,[],l,u),f=d.location.nativeElement,g=d.injector.get(Ob,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),_g(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new Z(101,!1);let i=_e(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,_e(i)}}detectChangesInAttachedViews(r){let i=0,o=this.afterRenderEffectManager;for(;;){if(i===hb)throw new Z(103,!1);if(r){let s=i===0;this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:u}of this._views)YF(a,s,u)}if(i++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>dm(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>dm(s))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;_g(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Tu,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>_g(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new Z(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _g(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function YF(t,e,n){!e&&!dm(t)||ZF(t,n,e)}function dm(t){return Sm(t)}function ZF(t,e,n){let r;n?(r=0,t[te]|=1024):t[te]&64?r=0:r=1,fb(t,e,r)}var hm=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Wd=(()=>{let e=class e{compileModuleSync(r){return new om(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=LT(r),s=H0(o.declarations).reduce((a,u)=>{let l=ei(u);return l&&a.push(new fs(l)),a},[]);return new hm(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var JF=(()=>{let e=class e{constructor(){this.zone=V(pe),this.applicationRef=V(Is)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function XF(t){return[{provide:pe,useFactory:t},{provide:as,multi:!0,useFactory:()=>{let e=V(JF,{optional:!0});return()=>e.initialize()}},{provide:as,multi:!0,useFactory:()=>{let e=V(rL);return()=>{e.initialize()}}},{provide:T0,useFactory:eL}]}function eL(){let t=V(pe),e=V(Zn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function tL(t){let e=XF(()=>new pe(nL(t)));return ii([[],e])}function nL(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var rL=(()=>{let e=class e{constructor(){this.subscription=new Ke,this.initialized=!1,this.zone=V(pe),this.pendingTasks=V(io)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function iL(){return typeof $localize<"u"&&$localize.locale||vd}var Kd=new H("",{providedIn:"root",factory:()=>V(Kd,ce.Optional|ce.SkipSelf)||iL()});var Vb=new H("");var Jl=null;function oL(t=[],e){return er.create({name:e,providers:[{provide:Dd,useValue:"platform"},{provide:Vb,useValue:new Set([()=>Jl=null])},...t]})}function sL(t=[]){if(Jl)return Jl;let e=oL(t);return Jl=e,WF(),aL(e),e}function aL(t){t.get(Lm,null)?.forEach(n=>n())}function sy(){return!1}var bu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=uL;let t=e;return t})();function uL(t){return cL(Ft(),fe(),(t&16)===16)}function cL(t,e,n){if(Cd(t)&&!n){let r=oi(t.index,e);return new eo(r,r)}else if(t.type&47){let r=e[Qn];return new eo(r,e)}return null}var fm=class{constructor(){}supports(e){return wb(e)}create(e){return new pm(e)}},lL=(t,e)=>e,pm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||lL}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<pT(r,i,o)?n:r,a=pT(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=u-i;if(l!=d){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,b=y+g;d<=b&&b<l&&(o[g]=y+1)}let f=s.previousIndex;o[f]=d-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!wb(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,UO(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new gm(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new wd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new wd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},gm=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},mm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},wd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new mm,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function pT(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function gT(){return new ay([new fm])}var ay=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||gT()),deps:[[e,new vm,new br]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new Z(901,!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:gT});let t=e;return t})();function jb(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=sL(r),o=[tL(),...n||[]],a=new md({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(pe);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(Zn,null),d;u.runOutsideAngular(()=>{d=u.onError.subscribe({next:y=>{l.handleError(y)}})});let f=()=>a.destroy(),g=i.get(Vb);return g.add(f),a.onDestroy(()=>{d.unsubscribe(),g.delete(f)}),QF(l,u,()=>{let y=a.get(Lb);return y.runInitializers(),y.donePromise.then(()=>{let b=a.get(Kd,vd);AF(b||vd);let S=a.get(Is);return e!==void 0&&S.bootstrap(e),S})})})}catch(e){return Promise.reject(e)}}function Cu(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Ub(t){let e=ei(t);if(!e)return null;let n=new fs(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Gb=null;function Es(){return Gb}function Wb(t){Gb??=t}var rh=class{};var vt=new H(""),gy=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(dL),providedIn:"platform"});let t=e;return t})(),Kb=new H(""),dL=(()=>{let e=class e extends gy{constructor(){super(),this._doc=V(vt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Es().getBaseHref(this._doc)}onPopState(r){let i=Es().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Es().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function my(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Bb(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Rr(t){return t&&t[0]!=="?"?"?"+t:t}var tr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(yy),providedIn:"root"});let t=e;return t})(),Qb=new H(""),yy=(()=>{let e=class e extends tr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??V(vt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return my(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Rr(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Rr(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Rr(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(L(gy),L(Qb,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vy=(()=>{let e=class e extends tr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=my(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Rr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Rr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(L(gy),L(Qb,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Ts=(()=>{let e=class e{constructor(r){this._subject=new Cn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=pL(Bb($b(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Rr(i))}normalize(r){return e.stripTrailingSlash(fL(this._basePath,$b(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Rr(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Rr(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Rr,e.joinWithSlash=my,e.stripTrailingSlash=Bb,e.\u0275fac=function(i){return new(i||e)(L(tr))},e.\u0275prov=W({token:e,factory:()=>hL(),providedIn:"root"});let t=e;return t})();function hL(){return new Ts(L(tr))}function fL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function $b(t){return t.replace(/\/index.html$/,"")}function pL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Vt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Vt||{}),xe=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(xe||{}),en=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(en||{}),si={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function gL(t){return gn(t)[Qe.LocaleId]}function mL(t,e,n){let r=gn(t),i=[r[Qe.DayPeriodsFormat],r[Qe.DayPeriodsStandalone]],o=mn(i,e);return mn(o,n)}function yL(t,e,n){let r=gn(t),i=[r[Qe.DaysFormat],r[Qe.DaysStandalone]],o=mn(i,e);return mn(o,n)}function vL(t,e,n){let r=gn(t),i=[r[Qe.MonthsFormat],r[Qe.MonthsStandalone]],o=mn(i,e);return mn(o,n)}function wL(t,e){let r=gn(t)[Qe.Eras];return mn(r,e)}function Qd(t,e){let n=gn(t);return mn(n[Qe.DateFormat],e)}function Yd(t,e){let n=gn(t);return mn(n[Qe.TimeFormat],e)}function Zd(t,e){let r=gn(t)[Qe.DateTimeFormat];return mn(r,e)}function oh(t,e){let n=gn(t),r=n[Qe.NumberSymbols][e];if(typeof r>"u"){if(e===si.CurrencyDecimal)return n[Qe.NumberSymbols][si.Decimal];if(e===si.CurrencyGroup)return n[Qe.NumberSymbols][si.Group]}return r}function Yb(t){if(!t[Qe.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Qe.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function _L(t){let e=gn(t);return Yb(e),(e[Qe.ExtraData][2]||[]).map(r=>typeof r=="string"?uy(r):[uy(r[0]),uy(r[1])])}function IL(t,e,n){let r=gn(t);Yb(r);let i=[r[Qe.ExtraData][0],r[Qe.ExtraData][1]],o=mn(i,e)||[];return mn(o,n)||[]}function mn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function uy(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var EL=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Jd={},DL=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Nr=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Nr||{}),Ee=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(Ee||{}),Ie=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Ie||{});function TL(t,e,n,r){let i=PL(t);e=Mr(n,e)||e;let s=[],a;for(;e;)if(a=DL.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=Jb(r,u),i=NL(i,r,!0));let l="";return s.forEach(d=>{let f=ML(d);l+=f?f(i,n,u):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function ih(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Mr(t,e){let n=gL(t);if(Jd[n]??={},Jd[n][e])return Jd[n][e];let r="";switch(e){case"shortDate":r=Qd(t,en.Short);break;case"mediumDate":r=Qd(t,en.Medium);break;case"longDate":r=Qd(t,en.Long);break;case"fullDate":r=Qd(t,en.Full);break;case"shortTime":r=Yd(t,en.Short);break;case"mediumTime":r=Yd(t,en.Medium);break;case"longTime":r=Yd(t,en.Long);break;case"fullTime":r=Yd(t,en.Full);break;case"short":let i=Mr(t,"shortTime"),o=Mr(t,"shortDate");r=Xd(Zd(t,en.Short),[i,o]);break;case"medium":let s=Mr(t,"mediumTime"),a=Mr(t,"mediumDate");r=Xd(Zd(t,en.Medium),[s,a]);break;case"long":let u=Mr(t,"longTime"),l=Mr(t,"longDate");r=Xd(Zd(t,en.Long),[u,l]);break;case"full":let d=Mr(t,"fullTime"),f=Mr(t,"fullDate");r=Xd(Zd(t,en.Full),[d,f]);break}return r&&(Jd[n][e]=r),r}function Xd(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function Fn(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function bL(t,e){return Fn(t,3).substring(0,e)}function nt(t,e,n=0,r=!1,i=!1){return function(o,s){let a=CL(t,o);if((n>0||a>-n)&&(a+=n),t===Ee.Hours)a===0&&n===-12&&(a=12);else if(t===Ee.FractionalSeconds)return bL(a,e);let u=oh(s,si.MinusSign);return Fn(a,e,u,r,i)}}function CL(t,e){switch(t){case Ee.FullYear:return e.getFullYear();case Ee.Month:return e.getMonth();case Ee.Date:return e.getDate();case Ee.Hours:return e.getHours();case Ee.Minutes:return e.getMinutes();case Ee.Seconds:return e.getSeconds();case Ee.FractionalSeconds:return e.getMilliseconds();case Ee.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Ne(t,e,n=Vt.Format,r=!1){return function(i,o){return AL(i,o,t,e,n,r)}}function AL(t,e,n,r,i,o){switch(n){case Ie.Months:return vL(e,i,r)[t.getMonth()];case Ie.Days:return yL(e,i,r)[t.getDay()];case Ie.DayPeriods:let s=t.getHours(),a=t.getMinutes();if(o){let l=_L(e),d=IL(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[y,b]=g,S=s>=y.hours&&a>=y.minutes,C=s<b.hours||s===b.hours&&a<b.minutes;if(y.hours<b.hours){if(S&&C)return!0}else if(S||C)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return mL(e,i,r)[s<12?0:1];case Ie.Eras:return wL(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new Error(`unexpected translation type ${u}`)}}function eh(t){return function(e,n,r){let i=-1*r,o=oh(n,si.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Nr.Short:return(i>=0?"+":"")+Fn(s,2,o)+Fn(Math.abs(i%60),2,o);case Nr.ShortGMT:return"GMT"+(i>=0?"+":"")+Fn(s,1,o);case Nr.Long:return"GMT"+(i>=0?"+":"")+Fn(s,2,o)+":"+Fn(Math.abs(i%60),2,o);case Nr.Extended:return r===0?"Z":(i>=0?"+":"")+Fn(s,2,o)+":"+Fn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var SL=0,nh=4;function xL(t){let e=ih(t,SL,1).getDay();return ih(t,0,1+(e<=nh?nh:nh+7)-e)}function Zb(t){let e=t.getDay(),n=e===0?-3:nh-e;return ih(t.getFullYear(),t.getMonth(),t.getDate()+n)}function cy(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=Zb(n),s=xL(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Fn(i,t,oh(r,si.MinusSign))}}function th(t,e=!1){return function(n,r){let o=Zb(n).getFullYear();return Fn(o,t,oh(r,si.MinusSign),e)}}var ly={};function ML(t){if(ly[t])return ly[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ne(Ie.Eras,xe.Abbreviated);break;case"GGGG":e=Ne(Ie.Eras,xe.Wide);break;case"GGGGG":e=Ne(Ie.Eras,xe.Narrow);break;case"y":e=nt(Ee.FullYear,1,0,!1,!0);break;case"yy":e=nt(Ee.FullYear,2,0,!0,!0);break;case"yyy":e=nt(Ee.FullYear,3,0,!1,!0);break;case"yyyy":e=nt(Ee.FullYear,4,0,!1,!0);break;case"Y":e=th(1);break;case"YY":e=th(2,!0);break;case"YYY":e=th(3);break;case"YYYY":e=th(4);break;case"M":case"L":e=nt(Ee.Month,1,1);break;case"MM":case"LL":e=nt(Ee.Month,2,1);break;case"MMM":e=Ne(Ie.Months,xe.Abbreviated);break;case"MMMM":e=Ne(Ie.Months,xe.Wide);break;case"MMMMM":e=Ne(Ie.Months,xe.Narrow);break;case"LLL":e=Ne(Ie.Months,xe.Abbreviated,Vt.Standalone);break;case"LLLL":e=Ne(Ie.Months,xe.Wide,Vt.Standalone);break;case"LLLLL":e=Ne(Ie.Months,xe.Narrow,Vt.Standalone);break;case"w":e=cy(1);break;case"ww":e=cy(2);break;case"W":e=cy(1,!0);break;case"d":e=nt(Ee.Date,1);break;case"dd":e=nt(Ee.Date,2);break;case"c":case"cc":e=nt(Ee.Day,1);break;case"ccc":e=Ne(Ie.Days,xe.Abbreviated,Vt.Standalone);break;case"cccc":e=Ne(Ie.Days,xe.Wide,Vt.Standalone);break;case"ccccc":e=Ne(Ie.Days,xe.Narrow,Vt.Standalone);break;case"cccccc":e=Ne(Ie.Days,xe.Short,Vt.Standalone);break;case"E":case"EE":case"EEE":e=Ne(Ie.Days,xe.Abbreviated);break;case"EEEE":e=Ne(Ie.Days,xe.Wide);break;case"EEEEE":e=Ne(Ie.Days,xe.Narrow);break;case"EEEEEE":e=Ne(Ie.Days,xe.Short);break;case"a":case"aa":case"aaa":e=Ne(Ie.DayPeriods,xe.Abbreviated);break;case"aaaa":e=Ne(Ie.DayPeriods,xe.Wide);break;case"aaaaa":e=Ne(Ie.DayPeriods,xe.Narrow);break;case"b":case"bb":case"bbb":e=Ne(Ie.DayPeriods,xe.Abbreviated,Vt.Standalone,!0);break;case"bbbb":e=Ne(Ie.DayPeriods,xe.Wide,Vt.Standalone,!0);break;case"bbbbb":e=Ne(Ie.DayPeriods,xe.Narrow,Vt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ne(Ie.DayPeriods,xe.Abbreviated,Vt.Format,!0);break;case"BBBB":e=Ne(Ie.DayPeriods,xe.Wide,Vt.Format,!0);break;case"BBBBB":e=Ne(Ie.DayPeriods,xe.Narrow,Vt.Format,!0);break;case"h":e=nt(Ee.Hours,1,-12);break;case"hh":e=nt(Ee.Hours,2,-12);break;case"H":e=nt(Ee.Hours,1);break;case"HH":e=nt(Ee.Hours,2);break;case"m":e=nt(Ee.Minutes,1);break;case"mm":e=nt(Ee.Minutes,2);break;case"s":e=nt(Ee.Seconds,1);break;case"ss":e=nt(Ee.Seconds,2);break;case"S":e=nt(Ee.FractionalSeconds,1);break;case"SS":e=nt(Ee.FractionalSeconds,2);break;case"SSS":e=nt(Ee.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=eh(Nr.Short);break;case"ZZZZZ":e=eh(Nr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=eh(Nr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=eh(Nr.Long);break;default:return null}return ly[t]=e,e}function Jb(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function RL(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function NL(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),o=Jb(e,i);return RL(t,r*(o-i))}function PL(t){if(qb(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return ih(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(EL))return kL(r)}let e=new Date(t);if(!qb(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function kL(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function qb(t){return t instanceof Date&&!isNaN(t.valueOf())}function sh(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var dy=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},I6=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new dy(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let u=i.get(s);i.move(u,a),zb(u,o)}});for(let o=0,s=i.length;o<s;o++){let u=i.get(o).context;u.index=o,u.count=s,u.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);zb(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(He(ws),He(jd),He(ay))},e.\u0275dir=ms({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function zb(t,e){t.context.$implicit=e.item}var Xb=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new hy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Hb("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Hb("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(He(ws),He(jd))},e.\u0275dir=ms({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),hy=class{constructor(){this.$implicit=null,this.ngIf=null}};function Hb(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ot(e)}'.`)}function OL(t,e){return new Z(2100,!1)}var FL="mediumDate",LL=new H(""),VL=new H(""),E6=(()=>{let e=class e{constructor(r,i,o){this.locale=r,this.defaultTimezone=i,this.defaultOptions=o}transform(r,i,o,s){if(r==null||r===""||r!==r)return null;try{let a=i??this.defaultOptions?.dateFormat??FL,u=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return TL(r,a,s||this.locale,u)}catch(a){throw OL(e,a.message)}}};e.\u0275fac=function(i){return new(i||e)(He(Kd,16),He(LL,24),He(VL,24))},e.\u0275pipe=PT({name:"date",type:e,pure:!0,standalone:!0});let t=e;return t})();var jL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=dn({type:e}),e.\u0275inj=ln({});let t=e;return t})(),wy="browser",UL="server";function BL(t){return t===wy}function ai(t){return t===UL}var eC=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>BL(V(ht))?new fy(V(vt),window):new py});let t=e;return t})(),fy=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=$L(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function $L(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var py=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ds=class{};var Su=class{},uh=class{},oo=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Iy=class{encodeKey(e){return nC(e)}encodeValue(e){return nC(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function HL(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}var GL=/%(\d[a-f0-9])/gi,WL={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function nC(t){return encodeURIComponent(t).replace(GL,(e,n)=>WL[n]??e)}function ah(t){return`${t}`}var ui=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Iy,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=HL(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(ah):[ah(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(ah(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(ah(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Ey=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function KL(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function rC(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function iC(t){return typeof Blob<"u"&&t instanceof Blob}function oC(t){return typeof FormData<"u"&&t instanceof FormData}function QL(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Au=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(KL(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new oo,this.context??=new Ey,!this.params)this.params=new ui,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||rC(this.body)||iC(this.body)||oC(this.body)||QL(this.body)?this.body:this.body instanceof ui?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||oC(this.body)?null:iC(this.body)?this.body.type||null:rC(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ui?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,y)=>g.set(y,e.setHeaders[y]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,y)=>g.set(y,e.setParams[y]),d)),new t(n,r,s,{params:d,headers:l,context:f,reportProgress:u,responseType:i,withCredentials:a,transferCache:o})}},bs=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(bs||{}),xu=class{constructor(e,n=dh.Ok,r="OK"){this.headers=e.headers||new oo,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Dy=class t extends xu{constructor(e={}){super(e),this.type=bs.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ch=class t extends xu{constructor(e={}){super(e),this.type=bs.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},lh=class extends xu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},dh=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(dh||{});function _y(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var YL=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof Au)s=r;else{let l;o.headers instanceof oo?l=o.headers:l=new oo(o.headers);let d;o.params&&(o.params instanceof ui?d=o.params:d=new ui({fromObject:o.params})),s=new Au(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=Y(s).pipe(_r(l=>this.handler.handle(l)));if(r instanceof Au||o.observe==="events")return a;let u=a.pipe(ut(l=>l instanceof ch));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe(X(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return u.pipe(X(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return u.pipe(X(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return u.pipe(X(l=>l.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new ui().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,_y(o,i))}post(r,i,o={}){return this.request("POST",r,_y(o,i))}put(r,i,o={}){return this.request("PUT",r,_y(o,i))}};e.\u0275fac=function(i){return new(i||e)(L(Su))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function cC(t,e){return e(t)}function ZL(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function JL(t,e,n){return(r,i)=>Nn(n,()=>e(r,o=>t(o,i)))}var XL=new H(""),Ty=new H(""),eV=new H(""),tV=new H("");function nV(){let t=null;return(e,n)=>{t===null&&(t=(V(XL,{optional:!0})??[]).reduceRight(ZL,cC));let r=V(io),i=r.add();return t(e,n).pipe(Zr(()=>r.remove(i)))}}var sC=(()=>{let e=class e extends Su{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=V(io);let o=V(tV,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(Ty),...this.injector.get(eV,[])]));this.chain=o.reduceRight((s,a)=>JL(s,a,this.injector),cC)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(Zr(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(L(uh),L(Tt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();var rV=/^\)\]\}',?\n/;function iV(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var aC=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new Z(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ve(i.\u0275loadImpl()):Y(null)).pipe(Fe(()=>new oe(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((C,P)=>a.setRequestHeader(C,P.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let C=r.detectContentTypeHeader();C!==null&&a.setRequestHeader("Content-Type",C)}if(r.responseType){let C=r.responseType.toLowerCase();a.responseType=C!=="json"?C:"text"}let u=r.serializeBody(),l=null,d=()=>{if(l!==null)return l;let C=a.statusText||"OK",P=new oo(a.getAllResponseHeaders()),$=iV(a)||r.url;return l=new Dy({headers:P,status:a.status,statusText:C,url:$}),l},f=()=>{let{headers:C,status:P,statusText:$,url:F}=d(),q=null;P!==dh.NoContent&&(q=typeof a.response>"u"?a.responseText:a.response),P===0&&(P=q?dh.Ok:0);let ee=P>=200&&P<300;if(r.responseType==="json"&&typeof q=="string"){let Q=q;q=q.replace(rV,"");try{q=q!==""?JSON.parse(q):null}catch(I){q=Q,ee&&(ee=!1,q={error:I,text:q})}}ee?(s.next(new ch({body:q,headers:C,status:P,statusText:$,url:F||void 0})),s.complete()):s.error(new lh({error:q,headers:C,status:P,statusText:$,url:F||void 0}))},g=C=>{let{url:P}=d(),$=new lh({error:C,status:a.status||0,statusText:a.statusText||"Unknown Error",url:P||void 0});s.error($)},y=!1,b=C=>{y||(s.next(d()),y=!0);let P={type:bs.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(P.total=C.total),r.responseType==="text"&&a.responseText&&(P.partialText=a.responseText),s.next(P)},S=C=>{let P={type:bs.UploadProgress,loaded:C.loaded};C.lengthComputable&&(P.total=C.total),s.next(P)};return a.addEventListener("load",f),a.addEventListener("error",g),a.addEventListener("timeout",g),a.addEventListener("abort",g),r.reportProgress&&(a.addEventListener("progress",b),u!==null&&a.upload&&a.upload.addEventListener("progress",S)),a.send(u),s.next({type:bs.Sent}),()=>{a.removeEventListener("error",g),a.removeEventListener("abort",g),a.removeEventListener("load",f),a.removeEventListener("timeout",g),r.reportProgress&&(a.removeEventListener("progress",b),u!==null&&a.upload&&a.upload.removeEventListener("progress",S)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(L(Ds))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),lC=new H(""),oV="XSRF-TOKEN",sV=new H("",{providedIn:"root",factory:()=>oV}),aV="X-XSRF-TOKEN",uV=new H("",{providedIn:"root",factory:()=>aV}),hh=class{},cV=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=sh(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(L(vt),L(ht),L(sV))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function lV(t,e){let n=t.url.toLowerCase();if(!V(lC)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=V(hh).getToken(),i=V(uV);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var dC=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(dC||{});function dV(t,e){return{\u0275kind:t,\u0275providers:e}}function hV(...t){let e=[YL,aC,sC,{provide:Su,useExisting:sC},{provide:uh,useExisting:aC},{provide:Ty,useValue:lV,multi:!0},{provide:lC,useValue:!0},{provide:hh,useClass:cV}];for(let n of t)e.push(...n.\u0275providers);return ii(e)}var uC=new H("");function fV(){return dV(dC.LegacyInterceptors,[{provide:uC,useFactory:nV},{provide:Ty,useExisting:uC,multi:!0}])}var O6=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=dn({type:e}),e.\u0275inj=ln({providers:[hV(fV())]});let t=e;return t})();var Ay=class extends rh{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Sy=class t extends Ay{static makeCurrent(){Wb(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=pV();return n==null?null:gV(n)}resetBaseElement(){Mu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sh(document.cookie,e)}},Mu=null;function pV(){return Mu=Mu||document.querySelector("base"),Mu?Mu.getAttribute("href"):null}function gV(t){return new URL(t,document.baseURI).pathname}var mV=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),xy=new H(""),gC=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new Z(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(L(xy),L(pe))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),fh=class{constructor(e){this._doc=e}},by="ng-app-id",mC=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ai(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${by}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(by),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(by,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(L(vt),L(Fm),L(Vm,8),L(ht))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Cy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ry=/%COMP%/g,yC="%COMP%",yV=`_nghost-${yC}`,vV=`_ngcontent-${yC}`,wV=!0,_V=new H("",{providedIn:"root",factory:()=>wV});function IV(t){return vV.replace(Ry,t)}function EV(t){return yV.replace(Ry,t)}function vC(t,e){return e.map(n=>n.replace(Ry,t))}var hC=(()=>{let e=class e{constructor(r,i,o,s,a,u,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=ai(u),this.defaultRenderer=new Ru(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Kn.ShadowDom&&(i=Ve(G({},i),{encapsulation:Kn.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof ph?o.applyToHost(r):o instanceof Nu&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case Kn.Emulated:s=new ph(l,d,i,this.appId,f,a,u,g);break;case Kn.ShadowDom:return new My(l,d,r,i,a,u,this.nonce,g);default:s=new Nu(l,d,i,f,a,u,g);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(L(gC),L(mC),L(Fm),L(_V),L(vt),L(ht),L(pe),L(Vm))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),Ru=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Cy[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(fC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(fC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Cy[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Cy[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Tr.DashCase|Tr.Important)?e.style.setProperty(n,r,i&Tr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Tr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Es().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function fC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var My=class extends Ru{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=vC(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Nu=class extends Ru{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?vC(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ph=class extends Nu{constructor(e,n,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=IV(l),this.hostAttr=EV(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},DV=(()=>{let e=class e extends fh{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(L(vt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})(),pC=["alt","control","meta","shift"],TV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},CV=(()=>{let e=class e extends fh{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Es().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),pC.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=TV[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),pC.forEach(a=>{if(a!==o){let u=bV[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(L(vt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function X6(t,e){return jb(G({rootComponent:t},AV(e)))}function AV(t){return{appProviders:[...NV,...t?.providers??[]],platformProviders:RV}}function SV(){Sy.makeCurrent()}function xV(){return new Zn}function MV(){return M0(document),document}var RV=[{provide:ht,useValue:wy},{provide:Lm,useValue:SV,multi:!0},{provide:vt,useFactory:MV,deps:[]}];var NV=[{provide:Dd,useValue:"root"},{provide:Zn,useFactory:xV,deps:[]},{provide:xy,useClass:DV,multi:!0,deps:[vt,pe,ht]},{provide:xy,useClass:CV,multi:!0,deps:[vt]},hC,mC,gC,{provide:lu,useExisting:hC},{provide:Ds,useClass:mV,deps:[]},[]];var wC=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(L(vt))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var PV=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:function(i){let o=null;return i?o=new(i||e):o=L(kV),o},providedIn:"root"});let t=e;return t})(),kV=(()=>{let e=class e extends PV{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case kn.NONE:return i;case kn.HTML:return Sr(i,"HTML")?fn(i):Um(this._doc,String(i)).toString();case kn.STYLE:return Sr(i,"Style")?fn(i):i;case kn.SCRIPT:if(Sr(i,"Script"))return fn(i);throw new Z(5200,!1);case kn.URL:return Sr(i,"URL")?fn(i):kd(String(i));case kn.RESOURCE_URL:if(Sr(i,"ResourceURL"))return fn(i);throw new Z(5201,!1);default:throw new Z(5202,!1)}}bypassSecurityTrustHtml(r){return k0(r)}bypassSecurityTrustStyle(r){return O0(r)}bypassSecurityTrustScript(r){return F0(r)}bypassSecurityTrustUrl(r){return L0(r)}bypassSecurityTrustResourceUrl(r){return V0(r)}};e.\u0275fac=function(i){return new(i||e)(L(vt))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var se="primary",Ku=Symbol("RouteTitle"),Fy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ms(t){return new Fy(t)}function FV(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function LV(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!nr(t[n],e[n]))return!1;return!0}function nr(t,e){let n=t?Ly(t):void 0,r=e?Ly(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!SC(t[i],e[i]))return!1;return!0}function Ly(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function SC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function xC(t){return t.length>0?t[t.length-1]:null}function fi(t){return Jp(t)?t:Du(t)?ve(Promise.resolve(t)):Y(t)}var VV={exact:RC,subset:NC},MC={exact:jV,subset:UV,ignored:()=>!0};function _C(t,e,n){return VV[n.paths](t.root,e.root,n.matrixParams)&&MC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function jV(t,e){return nr(t,e)}function RC(t,e,n){if(!ao(t.segments,e.segments)||!yh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!RC(t.children[r],e.children[r],n))return!1;return!0}function UV(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>SC(t[n],e[n]))}function NC(t,e,n){return PC(t,e,e.segments,n)}function PC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ao(i,n)||e.hasChildren()||!yh(i,n,r))}else if(t.segments.length===n.length){if(!ao(t.segments,n)||!yh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!NC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ao(t.segments,i)||!yh(t.segments,i,r)||!t.children[se]?!1:PC(t.children[se],e,o,r)}}function yh(t,e,n){return e.every((r,i)=>MC[n](t[i].parameters,r.parameters))}var ci=class{constructor(e=new De([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ms(this.queryParams),this._queryParamMap}toString(){return qV.serialize(this)}},De=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vh(this)}},so=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ms(this.parameters),this._parameterMap}toString(){return OC(this)}};function BV(t,e){return ao(t,e)&&t.every((n,r)=>nr(n.parameters,e[r].parameters))}function ao(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function $V(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===se&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==se&&(n=n.concat(e(i,r)))}),n}var Qu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new ju,providedIn:"root"});let t=e;return t})(),ju=class{parse(e){let n=new jy(e);return new ci(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Pu(e.root,!0)}`,r=GV(e.queryParams),i=typeof e.fragment=="string"?`#${zV(e.fragment)}`:"";return`${n}${r}${i}`}},qV=new ju;function vh(t){return t.segments.map(e=>OC(e)).join("/")}function Pu(t,e){if(!t.hasChildren())return vh(t);if(e){let n=t.children[se]?Pu(t.children[se],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==se&&r.push(`${i}:${Pu(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=$V(t,(r,i)=>i===se?[Pu(t.children[se],!1)]:[`${i}:${Pu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[se]!=null?`${vh(t)}/${n[0]}`:`${vh(t)}/(${n.join("//")})`}}function kC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gh(t){return kC(t).replace(/%3B/gi,";")}function zV(t){return encodeURI(t)}function Vy(t){return kC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wh(t){return decodeURIComponent(t)}function IC(t){return wh(t.replace(/\+/g,"%20"))}function OC(t){return`${Vy(t.path)}${HV(t.parameters)}`}function HV(t){return Object.entries(t).map(([e,n])=>`;${Vy(e)}=${Vy(n)}`).join("")}function GV(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${gh(n)}=${gh(i)}`).join("&"):`${gh(n)}=${gh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var WV=/^[^\/()?;#]+/;function Ny(t){let e=t.match(WV);return e?e[0]:""}var KV=/^[^\/()?;=#]+/;function QV(t){let e=t.match(KV);return e?e[0]:""}var YV=/^[^=?&#]+/;function ZV(t){let e=t.match(YV);return e?e[0]:""}var JV=/^[^&#]+/;function XV(t){let e=t.match(JV);return e?e[0]:""}var jy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[se]=new De(e,n)),r}parseSegment(){let e=Ny(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new so(wh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=QV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Ny(this.remaining);i&&(r=i,this.capture(r))}e[wh(n)]=wh(r)}parseQueryParam(e){let n=ZV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=XV(this.remaining);s&&(r=s,this.capture(r))}let i=IC(n),o=IC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ny(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Z(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=se);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[se]:new De([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}};function FC(t){return t.segments.length>0?new De([],{[se]:t}):t}function LC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=LC(i);if(r===se&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new De(t.segments,e);return e2(n)}function e2(t){if(t.numberOfChildren===1&&t.children[se]){let e=t.children[se];return new De(t.segments.concat(e.segments),e.children)}return t}function Rs(t){return t instanceof ci}function t2(t,e,n=null,r=null){let i=VC(t);return jC(i,e,n,r)}function VC(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new De(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=FC(r);return e??i}function jC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Py(i,i,i,n,r);let o=n2(e);if(o.toRoot())return Py(i,i,new De([],{}),n,r);let s=r2(o,i,t),a=s.processChildren?Fu(s.segmentGroup,s.index,o.commands):BC(s.segmentGroup,s.index,o.commands);return Py(i,s.segmentGroup,a,n,r)}function _h(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Uu(t){return typeof t=="object"&&t!=null&&t.outlets}function Py(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;t===e?s=n:s=UC(t,e,n);let a=FC(LC(s));return new ci(a,o,i)}function UC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=UC(o,e,n)}),new De(t.segments,r)}var Ih=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&_h(r[0]))throw new Z(4003,!1);let i=r.find(Uu);if(i&&i!==xC(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function n2(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ih(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Ih(n,e,r)}var Ss=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function r2(t,e,n){if(t.isAbsolute)return new Ss(e,!0,0);if(!n)return new Ss(e,!1,NaN);if(n.parent===null)return new Ss(n,!0,0);let r=_h(t.commands[0])?0:1,i=n.segments.length-1+r;return i2(n,i,t.numberOfDoubleDots)}function i2(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new Ss(r,!1,i-o)}function o2(t){return Uu(t[0])?t[0].outlets:{[se]:t}}function BC(t,e,n){if(t??=new De([],{}),t.segments.length===0&&t.hasChildren())return Fu(t,e,n);let r=s2(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new De(t.segments.slice(0,r.pathIndex),{});return o.children[se]=new De(t.segments.slice(r.pathIndex),t.children),Fu(o,0,i)}else return r.match&&i.length===0?new De(t.segments,{}):r.match&&!t.hasChildren()?Uy(t,e,n):r.match?Fu(t,0,i):Uy(t,e,n)}function Fu(t,e,n){if(n.length===0)return new De(t.segments,{});{let r=o2(n),i={};if(Object.keys(r).some(o=>o!==se)&&t.children[se]&&t.numberOfChildren===1&&t.children[se].segments.length===0){let o=Fu(t.children[se],e,n);return new De(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=BC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(t.segments,i)}}function s2(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Uu(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!DC(u,l,s))return o;r+=2}else{if(!DC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Uy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Uu(o)){let u=a2(o.outlets);return new De(r,u)}if(i===0&&_h(n[0])){let u=t.segments[e];r.push(new so(u.path,EC(n[0]))),i++;continue}let s=Uu(o)?o.outlets[se]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&_h(a)?(r.push(new so(s,EC(a))),i+=2):(r.push(new so(s,{})),i++)}return new De(r,{})}function a2(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Uy(new De([],{}),0,r))}),e}function EC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function DC(t,e,n){return t==n.path&&nr(e,n.parameters)}var Lu="imperative",ft=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ft||{}),yn=class{constructor(e,n){this.id=e,this.url=n}},Ns=class extends yn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ft.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},rr=class extends yn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},nn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(nn||{}),Eh=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Eh||{}),li=class extends yn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},di=class extends yn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ft.NavigationSkipped}},Bu=class extends yn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Dh=class extends yn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},By=class extends yn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$y=class extends yn{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},qy=class extends yn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zy=class extends yn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hy=class{constructor(e){this.route=e,this.type=ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Gy=class{constructor(e){this.route=e,this.type=ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Wy=class{constructor(e){this.snapshot=e,this.type=ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ky=class{constructor(e){this.snapshot=e,this.type=ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qy=class{constructor(e){this.snapshot=e,this.type=ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yy=class{constructor(e){this.snapshot=e,this.type=ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Th=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=ft.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},$u=class{},qu=class{constructor(e){this.url=e}};var Zy=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Yu,this.attachRef=null}},Yu=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Zy,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Jy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Jy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Xy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Xy(e,this._root).map(n=>n.value)}};function Jy(t,e){if(t===e.value)return e;for(let n of e.children){let r=Jy(t,n);if(r)return r}return null}function Xy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Xy(t,n);if(r.length)return r.unshift(e),r}return[]}var tn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function As(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ch=class extends bh{constructor(e,n){super(e),this.snapshot=n,cv(this,e)}toString(){return this.snapshot.toString()}};function $C(t){let e=u2(t),n=new yt([new so("",{})]),r=new yt({}),i=new yt({}),o=new yt({}),s=new yt(""),a=new hi(n,r,o,s,i,se,t,e.root);return a.snapshot=e.root,new Ch(new tn(a,[]),e)}function u2(t){let e={},n={},r={},i="",o=new zu([],e,r,i,n,se,t,null,{});return new Ah("",new tn(o,[]))}var hi=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(X(l=>l[Ku]))??Y(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>Ms(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>Ms(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function uv(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:G(G({},e.params),t.params),data:G(G({},e.data),t.data),resolve:G(G(G(G({},t.data),e.data),i?.data),t._resolvedData)}:r={params:G({},t.params),data:G({},t.data),resolve:G(G({},t.data),t._resolvedData??{})},i&&zC(i)&&(r.resolve[Ku]=i.title),r}var zu=class{get title(){return this.data?.[Ku]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ms(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ms(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ah=class extends bh{constructor(e,n){super(n),this.url=e,cv(this,n)}toString(){return qC(this._root)}};function cv(t,e){e.value._routerState=t,e.children.forEach(n=>cv(t,n))}function qC(t){let e=t.children.length>0?` { ${t.children.map(qC).join(", ")} } `:"";return`${t.value}${e}`}function ky(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,nr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),nr(e.params,n.params)||t.paramsSubject.next(n.params),LV(e.url,n.url)||t.urlSubject.next(n.url),nr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function ev(t,e){let n=nr(t.params,e.params)&&BV(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||ev(t.parent,e.parent))}function zC(t){return typeof t.title=="string"||t.title===null}var c2=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=se,this.activateEvents=new Cn,this.deactivateEvents=new Cn,this.attachEvents=new Cn,this.detachEvents=new Cn,this.parentContexts=V(Yu),this.location=V(ws),this.changeDetector=V(bu),this.environmentInjector=V(Tt),this.inputBinder=V(Rh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new tv(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=ms({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[no]});let t=e;return t})(),tv=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===hi?this.route:e===Yu?this.childContexts:this.parent.get(e,n)}},Rh=new H(""),TC=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=eu([i.queryParams,i.params,i.data]).pipe(Fe(([s,a,u],l)=>(u=G(G(G({},s),a),u),l===0?Y(u):Promise.resolve(u)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=Ub(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function l2(t,e,n){let r=Hu(t,e._root,n?n._root:void 0);return new Ch(r,e)}function Hu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=d2(t,e,n);return new tn(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Hu(t,a)),s}}let r=h2(e.value),i=e.children.map(o=>Hu(t,o));return new tn(r,i)}}function d2(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Hu(t,r,i);return Hu(t,r)})}function h2(t){return new hi(new yt(t.url),new yt(t.params),new yt(t.queryParams),new yt(t.fragment),new yt(t.data),t.outlet,t.component,t)}var HC="ngNavigationCancelingError";function GC(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Rs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=WC(!1,nn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function WC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[HC]=!0,n.cancellationCode=e,n}function f2(t){return KC(t)&&Rs(t.url)}function KC(t){return!!t&&t[HC]}var p2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=gs({type:e,selectors:[["ng-component"]],standalone:!0,features:[_s],decls:1,vars:0,template:function(i,o){i&1&&Iu(0,"router-outlet")},dependencies:[c2],encapsulation:2});let t=e;return t})();function g2(t,e){return t.providers&&!t._injector&&(t._injector=qd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function lv(t){let e=t.children&&t.children.map(lv),n=e?Ve(G({},t),{children:e}):G({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==se&&(n.component=p2),n}function ir(t){return t.outlet||se}function m2(t,e){let n=t.filter(r=>ir(r)===e);return n.push(...t.filter(r=>ir(r)!==e)),n}function Zu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var y2=(t,e,n,r)=>X(i=>(new nv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),nv=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ky(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=As(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=As(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=As(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=As(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Yy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ky(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(ky(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ky(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Zu(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Sh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},xs=class{constructor(e,n){this.component=e,this.route=n}};function v2(t,e,n){let r=t._root,i=e?e._root:null;return ku(r,i,n,[r.value])}function w2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ks(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!_T(t)?t:e.get(t):r}function ku(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=As(e);return t.children.forEach(s=>{_2(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Vu(a,n.getContext(s),i)),i}function _2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=I2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Sh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ku(t,e,a?a.children:null,r,i):ku(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xs(a.outlet.component,s))}else s&&Vu(e,a,i),i.canActivateChecks.push(new Sh(r)),o.component?ku(t,null,a?a.children:null,r,i):ku(t,null,n,r,i);return i}function I2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ao(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ao(t.url,e.url)||!nr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ev(t,e)||!nr(t.queryParams,e.queryParams);case"paramsChange":default:return!ev(t,e)}}function Vu(t,e,n){let r=As(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Vu(s,e.children.getContext(o),n):Vu(s,null,n):Vu(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new xs(e.outlet.component,i)):n.canDeactivateChecks.push(new xs(null,i)):n.canDeactivateChecks.push(new xs(null,i))}function Ju(t){return typeof t=="function"}function E2(t){return typeof t=="boolean"}function D2(t){return t&&Ju(t.canLoad)}function T2(t){return t&&Ju(t.canActivate)}function b2(t){return t&&Ju(t.canActivateChild)}function C2(t){return t&&Ju(t.canDeactivate)}function A2(t){return t&&Ju(t.canMatch)}function QC(t){return t instanceof wr||t?.name==="EmptyError"}var mh=Symbol("INITIAL_VALUE");function Ps(){return Fe(t=>eu(t.map(e=>e.pipe(Ir(1),Hi(mh)))).pipe(X(e=>{for(let n of e)if(n!==!0){if(n===mh)return mh;if(n===!1||n instanceof ci)return n}return!0}),ut(e=>e!==mh),Ir(1)))}function S2(t,e){return Xe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Y(Ve(G({},n),{guardsResult:!0})):x2(s,r,i,t).pipe(Xe(a=>a&&E2(a)?M2(r,o,t,e):Y(a)),X(a=>Ve(G({},n),{guardsResult:a})))})}function x2(t,e,n,r){return ve(t).pipe(Xe(i=>O2(i.component,i.route,n,e,r)),un(i=>i!==!0,!0))}function M2(t,e,n,r){return ve(e).pipe(_r(i=>Jo(N2(i.route.parent,r),R2(i.route,r),k2(t,i.path,n),P2(t,i.route,n))),un(i=>i!==!0,!0))}function R2(t,e){return t!==null&&e&&e(new Qy(t)),Y(!0)}function N2(t,e){return t!==null&&e&&e(new Wy(t)),Y(!0)}function P2(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(o=>Vl(()=>{let s=Zu(e)??n,a=ks(o,s),u=T2(a)?a.canActivate(e,t):Nn(s,()=>a(e,t));return fi(u).pipe(un())}));return Y(i).pipe(Ps())}function k2(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>w2(s)).filter(s=>s!==null).map(s=>Vl(()=>{let a=s.guards.map(u=>{let l=Zu(s.node)??n,d=ks(u,l),f=b2(d)?d.canActivateChild(r,t):Nn(l,()=>d(r,t));return fi(f).pipe(un())});return Y(a).pipe(Ps())}));return Y(o).pipe(Ps())}function O2(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let u=Zu(e)??i,l=ks(a,u),d=C2(l)?l.canDeactivate(t,e,n,r):Nn(u,()=>l(t,e,n,r));return fi(d).pipe(un())});return Y(s).pipe(Ps())}function F2(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let o=i.map(s=>{let a=ks(s,t),u=D2(a)?a.canLoad(e,n):Nn(t,()=>a(e,n));return fi(u)});return Y(o).pipe(Ps(),YC(r))}function YC(t){return Gp(et(e=>{if(Rs(e))throw GC(t,e)}),X(e=>e===!0))}function L2(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let o=i.map(s=>{let a=ks(s,t),u=A2(a)?a.canMatch(e,n):Nn(t,()=>a(e,n));return fi(u)});return Y(o).pipe(Ps(),YC(r))}var Gu=class{constructor(e){this.segmentGroup=e||null}},xh=class extends Error{constructor(e){super(),this.urlTree=e}};function Cs(t){return Zo(new Gu(t))}function V2(t){return Zo(new Z(4e3,!1))}function j2(t){return Zo(WC(!1,nn.GuardRejected))}var rv=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[se])return V2(e.redirectTo);i=i.children[se]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new xh(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new ci(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new De(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},iv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function U2(t,e,n,r,i){let o=dv(t,e,n);return o.matched?(r=g2(e,r),L2(r,e,n,i).pipe(X(s=>s===!0?o:G({},iv)))):Y(o)}function dv(t,e,n){if(e.path==="**")return B2(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?G({},iv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||FV)(n,t,e);if(!i)return G({},iv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?G(G({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function B2(t){return{matched:!0,parameters:t.length>0?xC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function bC(t,e,n,r){return n.length>0&&z2(t,n,r)?{segmentGroup:new De(e,q2(r,new De(n,t.children))),slicedSegments:[]}:n.length===0&&H2(t,n,r)?{segmentGroup:new De(t.segments,$2(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new De(t.segments,t.children),slicedSegments:n}}function $2(t,e,n,r){let i={};for(let o of n)if(Nh(t,e,o)&&!r[ir(o)]){let s=new De([],{});i[ir(o)]=s}return G(G({},r),i)}function q2(t,e){let n={};n[se]=e;for(let r of t)if(r.path===""&&ir(r)!==se){let i=new De([],{});n[ir(r)]=i}return n}function z2(t,e,n){return n.some(r=>Nh(t,e,r)&&ir(r)!==se)}function H2(t,e,n){return n.some(r=>Nh(t,e,r))}function Nh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function G2(t,e,n,r){return ir(t)!==r&&(r===se||!Nh(e,n,t))?!1:dv(e,t,n).matched}function W2(t,e,n){return e.length===0&&!t.children[n]}var ov=class{};function K2(t,e,n,r,i,o,s="emptyOnly"){return new sv(t,e,n,r,i,s,o).recognize()}var Q2=31,sv=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new rv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Z(4002,`'${e.segmentGroup}'`)}recognize(){let e=bC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(n=>{let r=new zu([],Object.freeze({}),Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,{},se,this.rootComponentType,null,{}),i=new tn(r,n),o=new Ah("",i),s=t2(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,se).pipe(Qr(r=>{if(r instanceof xh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Gu?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=uv(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(X(o=>o instanceof tn?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ve(i).pipe(_r(o=>{let s=r.children[o],a=m2(n,o);return this.processSegmentGroup(e,a,s,o)}),zi((o,s)=>(o.push(...s),o)),Yr(null),ng(),Xe(o=>{if(o===null)return Cs(r);let s=ZC(o);return Y2(s),Y(s)}))}processSegment(e,n,r,i,o,s){return ve(n).pipe(_r(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Qr(u=>{if(u instanceof Gu)return Y(null);throw u}))),un(a=>!!a),Qr(a=>{if(QC(a))return W2(r,i,o)?Y(new ov):Cs(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return G2(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Cs(i):Cs(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:d}=dv(n,i,o);if(!a)return Cs(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Q2&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,f).pipe(Xe(g=>this.processSegment(e,r,n,g.concat(d),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=U2(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(Fe(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Fe(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:g}=a,y=new zu(d,g,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,J2(r),ir(r),r.component??r._loadedComponent??null,r,X2(r)),{segmentGroup:b,slicedSegments:S}=bC(n,d,f,u);if(S.length===0&&b.hasChildren())return this.processChildren(l,u,b).pipe(X(P=>P===null?null:new tn(y,P)));if(u.length===0&&S.length===0)return Y(new tn(y,[]));let C=ir(r)===o;return this.processSegment(l,u,b,S,C?se:o,!0).pipe(X(P=>new tn(y,P instanceof tn?[P]:[])))}))):Cs(n)))}getChildConfig(e,n,r){return n.children?Y({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Y({routes:n._loadedRoutes,injector:n._loadedInjector}):F2(e,n,r,this.urlSerializer).pipe(Xe(i=>i?this.configLoader.loadChildren(e,n).pipe(et(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):j2(n))):Y({routes:[],injector:e})}};function Y2(t){t.sort((e,n)=>e.value.outlet===se?-1:n.value.outlet===se?1:e.value.outlet.localeCompare(n.value.outlet))}function Z2(t){let e=t.value.routeConfig;return e&&e.path===""}function ZC(t){let e=[],n=new Set;for(let r of t){if(!Z2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=ZC(r.children);e.push(new tn(r.value,i))}return e.filter(r=>!n.has(r))}function J2(t){return t.data||{}}function X2(t){return t.resolve||{}}function ej(t,e,n,r,i,o){return Xe(s=>K2(t,e,n,r,s.extractedUrl,i,o).pipe(X(({state:a,tree:u})=>Ve(G({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function tj(t,e){return Xe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Y(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of JC(u))s.add(l);let a=0;return ve(s).pipe(_r(u=>o.has(u)?nj(u,r,t,e):(u.data=uv(u,u.parent,t).resolve,Y(void 0))),et(()=>a++),Xo(1),Xe(u=>a===s.size?Y(n):Pt))})}function JC(t){let e=t.children.map(n=>JC(n)).flat();return[t,...e]}function nj(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!zC(i)&&(o[Ku]=i.title),rj(o,t,e,r).pipe(X(s=>(t._resolvedData=s,t.data=uv(t,t.parent,n).resolve,null)))}function rj(t,e,n,r){let i=Ly(t);if(i.length===0)return Y({});let o={};return ve(i).pipe(Xe(s=>ij(t[s],e,n,r).pipe(un(),et(a=>{o[s]=a}))),Xo(1),eg(o),Qr(s=>QC(s)?Pt:Zo(s)))}function ij(t,e,n,r){let i=Zu(e)??r,o=ks(t,i),s=o.resolve?o.resolve(e,n):Nn(i,()=>o(e,n));return fi(s)}function Oy(t){return Fe(e=>{let n=t(e);return n?ve(n).pipe(X(()=>e)):Y(e)})}var XC=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===se);return i}getResolvedTitleForRoute(r){return r.data[Ku]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(oj),providedIn:"root"});let t=e;return t})(),oj=(()=>{let e=class e extends XC{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(L(wC))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xu=new H("",{providedIn:"root",factory:()=>({})}),Wu=new H(""),hv=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(Wd)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Y(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=fi(r.loadComponent()).pipe(X(eA),et(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Zr(()=>{this.componentLoaders.delete(r)})),o=new Wo(i,()=>new je).pipe(Go());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Y({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=sj(i,this.compiler,r,this.onLoadEndListener).pipe(Zr(()=>{this.childrenLoaders.delete(i)})),a=new Wo(s,()=>new je).pipe(Go());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function sj(t,e,n,r){return fi(t.loadChildren()).pipe(X(eA),Xe(i=>i instanceof du||Array.isArray(i)?Y(i):ve(e.compileModuleAsync(i))),X(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Wu,[],{optional:!0,self:!0}).flat()),{routes:s.map(lv),injector:o}}))}function aj(t){return t&&typeof t=="object"&&"default"in t}function eA(t){return aj(t)?t.default:t}var fv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(uj),providedIn:"root"});let t=e;return t})(),uj=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tA=new H(""),nA=new H("");function cj(t,e,n){let r=t.get(nA),i=t.get(vt);return t.get(pe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),lj(t))),{onViewTransitionCreated:u}=r;return u&&Nn(t,()=>u({transition:a,from:e,to:n})),s})}function lj(t){return new Promise(e=>{$d(e,{injector:t})})}var pv=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new je,this.transitionAbortSubject=new je,this.configLoader=V(hv),this.environmentInjector=V(Tt),this.urlSerializer=V(Qu),this.rootContexts=V(Yu),this.location=V(Ts),this.inputBindingEnabled=V(Rh,{optional:!0})!==null,this.titleStrategy=V(XC),this.options=V(Xu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(fv),this.createViewTransition=V(tA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Hy(o)),i=o=>this.events.next(new Gy(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Ve(G(G({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new yt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Lu,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ut(s=>s.id!==0),X(s=>Ve(G({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Fe(s=>{let a=!1,u=!1;return Y(s).pipe(Fe(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",nn.SupersededByNewNavigation),Pt;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ve(G({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new di(l.id,this.urlSerializer.serialize(l.rawUrl),g,Eh.IgnoredSameUrlNavigation)),l.resolve(null),Pt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Y(l).pipe(Fe(g=>{let y=this.transitions?.getValue();return this.events.next(new Ns(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),y!==this.transitions?.getValue()?Pt:Promise.resolve(g)}),ej(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),et(g=>{s.targetSnapshot=g.targetSnapshot,s.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Ve(G({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let y=new Dh(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:y,source:b,restoredState:S,extras:C}=l,P=new Ns(g,this.urlSerializer.serialize(y),b,S);this.events.next(P);let $=$C(this.rootComponentType).snapshot;return this.currentTransition=s=Ve(G({},l),{targetSnapshot:$,urlAfterRedirects:y,extras:Ve(G({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,Y(s)}else{let g="";return this.events.next(new di(l.id,this.urlSerializer.serialize(l.extractedUrl),g,Eh.IgnoredByUrlHandlingStrategy)),l.resolve(null),Pt}}),et(l=>{let d=new By(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),X(l=>(this.currentTransition=s=Ve(G({},l),{guards:v2(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),S2(this.environmentInjector,l=>this.events.next(l)),et(l=>{if(s.guardsResult=l.guardsResult,Rs(l.guardsResult))throw GC(this.urlSerializer,l.guardsResult);let d=new $y(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),ut(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",nn.GuardRejected),!1)),Oy(l=>{if(l.guards.canActivateChecks.length)return Y(l).pipe(et(d=>{let f=new qy(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Fe(d=>{let f=!1;return Y(d).pipe(tj(this.paramsInheritanceStrategy,this.environmentInjector),et({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",nn.NoDataFromResolver)}}))}),et(d=>{let f=new zy(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),Oy(l=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(et(y=>{f.component=y}),X(()=>{})));for(let y of f.children)g.push(...d(y));return g};return eu(d(l.targetSnapshot.root)).pipe(Yr(null),Ir(1))}),Oy(()=>this.afterPreactivation()),Fe(()=>{let{currentSnapshot:l,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?ve(f).pipe(X(()=>s)):Y(s)}),X(l=>{let d=l2(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=Ve(G({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),et(()=>{this.events.next(new $u)}),y2(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Ir(1),et({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new rr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),ig(this.transitionAbortSubject.pipe(et(l=>{throw l}))),Zr(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",nn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Qr(l=>{if(u=!0,KC(l))this.events.next(new li(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),f2(l)?this.events.next(new qu(l.url)):s.resolve(!1);else{this.events.next(new Bu(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(l))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Pt}))}))}cancelNavigationTransition(r,i,o){let s=new li(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function dj(t){return t!==Lu}var hj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(fj),providedIn:"root"});let t=e;return t})(),av=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},fj=(()=>{let e=class e extends av{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Pm(e)))(o||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>V(pj),providedIn:"root"});let t=e;return t})(),pj=(()=>{let e=class e extends rA{constructor(){super(...arguments),this.location=V(Ts),this.urlSerializer=V(Qu),this.options=V(Xu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(fv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ci,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=$C(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ns)this.stateMemento=this.createStateMemento();else if(r instanceof di)this.rawUrlTree=i.initialUrl;else if(r instanceof Dh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof $u?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof li&&(r.code===nn.GuardRejected||r.code===nn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Bu?this.restoreHistory(i,!0):r instanceof rr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=G(G({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=G(G({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Pm(e)))(o||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ou=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ou||{});function iA(t,e){t.events.pipe(ut(n=>n instanceof rr||n instanceof li||n instanceof Bu||n instanceof di),X(n=>n instanceof rr||n instanceof di?Ou.COMPLETE:(n instanceof li?n.code===nn.Redirect||n.code===nn.SupersededByNewNavigation:!1)?Ou.REDIRECTING:Ou.FAILED),ut(n=>n!==Ou.REDIRECTING),Ir(1)).subscribe(()=>{e()})}function gj(t){throw t}var mj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ln=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=V(Hd),this.stateManager=V(rA),this.options=V(Xu,{optional:!0})||{},this.pendingTasks=V(io),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(pv),this.urlSerializer=V(Qu),this.location=V(Ts),this.urlHandlingStrategy=V(fv),this._events=new je,this.errorHandler=this.options.errorHandler||gj,this.navigated=!1,this.routeReuseStrategy=V(hj),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(Wu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(Rh,{optional:!0}),this.eventsSubscription=new Ke,this.isNgZoneEnabled=V(pe)instanceof pe&&pe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof li&&i.code!==nn.Redirect&&i.code!==nn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof rr)this.navigated=!0;else if(i instanceof qu){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||dj(o.source)};this.scheduleNavigation(a,Lu,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}wj(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Lu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=G({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(lv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,f=null;switch(u){case"merge":f=G(G({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let y=o?o.snapshot:this.routerState.snapshot.root;g=VC(y)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),g=this.currentUrlTree.root}return jC(g,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Rs(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Lu,null,i)}navigate(r,i={skipLocationChange:!1}){return vj(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=G({},mj):i===!1?o=G({},yj):o=i,Rs(r))return _C(this.currentUrlTree,r,o);let s=this.parseUrl(r);return _C(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,l,d;a?(u=a.resolve,l=a.reject,d=a.promise):d=new Promise((g,y)=>{u=g,l=y});let f=this.pendingTasks.add();return iA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Z(4008,!1)}function wj(t){return!(t instanceof $u)&&!(t instanceof qu)}var oA=(()=>{let e=class e{constructor(r,i,o,s,a,u){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new je,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(d=>{d instanceof rr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:z0(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(He(Ln),He(hi),km("tabindex"),He(Bd),He(mu),He(tr))},e.\u0275dir=ms({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&ct("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&oy("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Sn.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Cu],skipLocationChange:[Sn.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Cu],replaceUrl:[Sn.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Cu],routerLink:"routerLink"},standalone:!0,features:[ny,no]});let t=e;return t})();var Mh=class{};var _j=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(ut(r=>r instanceof rr),_r(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=qd(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,u=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(u,s.children??s._loadedRoutes))}return ve(o).pipe(Kr())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=Y(null);let s=o.pipe(Xe(a=>a===null?Y(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ve([s,a]).pipe(Kr())}else return s})}};e.\u0275fac=function(i){return new(i||e)(L(Ln),L(Wd),L(Tt),L(Mh),L(hv))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sA=new H(""),Ij=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=V(Tt),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ns?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof rr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof di&&r.code===Eh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Th&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>N(this,null,function*(){yield new Promise(o=>{setTimeout(()=>{o()}),$d(()=>{o()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Th(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){tb()},e.\u0275prov=W({token:e,factory:e.\u0275fac});let t=e;return t})();function _5(t,...e){return ii([{provide:Wu,multi:!0,useValue:t},[],{provide:hi,useFactory:aA,deps:[Ln]},{provide:Tu,multi:!0,useFactory:uA},e.map(n=>n.\u0275providers)])}function aA(t){return t.routerState.root}function Os(t,e){return{\u0275kind:t,\u0275providers:e}}function uA(){let t=V(er);return e=>{let n=t.get(Is);if(e!==n.components[0])return;let r=t.get(Ln),i=t.get(cA);t.get(gv)===1&&r.initialNavigation(),t.get(lA,null,ce.Optional)?.setUpPreloading(),t.get(sA,null,ce.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var cA=new H("",{factory:()=>new je}),gv=new H("",{providedIn:"root",factory:()=>1});function Ej(){return Os(2,[{provide:gv,useValue:0},{provide:Gd,multi:!0,deps:[er],useFactory:e=>{let n=e.get(Kb,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Ln),o=e.get(cA);iA(i,()=>{r(!0)}),e.get(pv).afterPreactivation=()=>(r(!0),o.closed?Y(void 0):o),i.initialNavigation()}))}}])}function Dj(){return Os(3,[{provide:Gd,multi:!0,useFactory:()=>{let e=V(Ln);return()=>{e.setUpLocationChangeListener()}}},{provide:gv,useValue:2}])}var lA=new H("");function Tj(t){return Os(0,[{provide:lA,useExisting:_j},{provide:Mh,useExisting:t}])}function I5(){return Os(6,[{provide:tr,useClass:vy}])}function bj(){return Os(8,[TC,{provide:Rh,useExisting:TC}])}function Cj(t){let e=[{provide:tA,useValue:cj},{provide:nA,useValue:G({skipNextTransition:!!t?.skipInitialTransition},t)}];return Os(9,e)}var CC=new H("ROUTER_FORROOT_GUARD"),Aj=[Ts,{provide:Qu,useClass:ju},Ln,Yu,{provide:hi,useFactory:aA,deps:[Ln]},hv,[]],dA=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[Aj,[],{provide:Wu,multi:!0,useValue:r},{provide:CC,useFactory:Rj,deps:[[Ln,new br,new vm]]},{provide:Xu,useValue:i||{}},i?.useHash?xj():Mj(),Sj(),i?.preloadingStrategy?Tj(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Nj(i):[],i?.bindToComponentInputs?bj().\u0275providers:[],i?.enableViewTransitions?Cj().\u0275providers:[],Pj()]}}static forChild(r){return{ngModule:e,providers:[{provide:Wu,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(L(CC,8))},e.\u0275mod=dn({type:e}),e.\u0275inj=ln({});let t=e;return t})();function Sj(){return{provide:sA,useFactory:()=>{let t=V(eC),e=V(pe),n=V(Xu),r=V(pv),i=V(Qu);return n.scrollOffset&&t.setOffset(n.scrollOffset),new Ij(i,r,t,e,n)}}}function xj(){return{provide:tr,useClass:vy}}function Mj(){return{provide:tr,useClass:yy}}function Rj(t){return"guarded"}function Nj(t){return[t.initialNavigation==="disabled"?Dj().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Ej().\u0275providers:[]]}var AC=new H("");function Pj(){return[{provide:AC,useFactory:uA},{provide:Tu,multi:!0,useExisting:AC}]}var Oj="firebase",Fj="10.12.3";sn(Oj,Fj,"app");var Pr=new ri("ANGULARFIRE2_VERSION");function R5(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Lj=(t,e)=>{let n=e?[e]:dl(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},co=class{constructor(){return Lj(Vj)}},Vj="app-check";function Fs(){}var Ph=class{zone;delegate;constructor(e,n=Yp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},mv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fs,{},Fs,Fs)),n.pipe(et({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ls=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ph(Zone.current)),this.insideAngular=n.run(()=>new Ph(Zone.current,Xa)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(L(pe))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kh(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function jj(t){return kh().ngZone.runOutsideAngular(()=>t())}function uo(t){return kh().ngZone.run(()=>t())}function jt(t){return Uj(kh())(t)}function Uj(t){return function(n){return n=n.lift(new mv(t.ngZone)),n.pipe(an(t.outsideAngular),Jt(t.insideAngular))}}var Bj=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),uo(()=>t.apply(void 0,r))},hA=(t,e)=>function(){let n,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(n||=uo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fs,{},Fs,Fs))),r[o]=Bj(r[o],n));let i=jj(()=>t.apply(this,r));if(!e)if(i instanceof oe){let o=kh();return i.pipe(an(o.outsideAngular),Jt(o.insideAngular))}else return uo(()=>i);return i instanceof oe?i.pipe(jt):i instanceof Promise?uo(()=>new Promise((o,s)=>i.then(a=>uo(()=>o(a)),a=>uo(()=>s(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:uo(()=>i)};var ec=class{constructor(e){return e}},yv=class{constructor(){return dl()}};function $j(t){return t&&t.length===1?t[0]:new ec(Ka())}var vv=new H("angularfire2._apps"),qj={provide:ec,useFactory:$j,deps:[[new br,vv]]},zj={provide:yv,deps:[[new br,vv]]};function Hj(t){return(e,n)=>{let r=n.get(ht);sn("angularfire",Pr.full,"core"),sn("angularfire",Pr.full,"app"),sn("angular",zd.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new ec(i)}}function B5(t,...e){return ii([qj,zj,{provide:vv,useFactory:Hj(t),multi:!0,deps:[pe,er,Ls,...e]}])}var $5=hA(WE,!0);var Gj="firebase",Wj="10.12.3";qt.registerVersion(Gj,Wj,"app-compat");var Kj=["ngOnDestroy"],gA=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(Kj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>n.run(()=>l)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,f),f})})})});var Oh=class{constructor(e){return e}},Vs=new H("angularfire2.app.options"),js=new H("angularfire2.app.name");function tc(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=qt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>qt.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;Qj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Oh(s)}var Qj=(t,...e)=>{sy()&&typeof console<"u"&&console[t](...e)},Yj={provide:Oh,useFactory:tc,deps:[Vs,pe,[new br,js]]},X5=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Vs,useValue:n},{provide:js,useValue:r}]}}constructor(n){qt.registerVersion("angularfire",Pr.full,"core"),qt.registerVersion("angularfire",Pr.full,"app-compat"),qt.registerVersion("angular",zd.full,n.toString())}static \u0275fac=function(r){return new(r||t)(L(ht))};static \u0275mod=dn({type:t});static \u0275inj=ln({providers:[Yj]})}return t})();function Fh(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return Zj(i,s)||(pA("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Jj?" You may need to reload as Firebase is not HMR aware.":""}`),pA("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function Zj(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var Jj=typeof module<"u"&&!!module.hot,pA=(t,...e)=>{sy()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Xj=new Map,eU={activated:!1,tokenObservers:[]},tU={initialized:!1,enabled:!1};function Vn(t){return Xj.get(t)||Object.assign({},eU)}function _A(){return tU}var nU="https://content-firebaseappcheck.googleapis.com/v1";var rU="exchangeDebugToken",mA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},c8=24*60*60*1e3;var _v=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new kp,this.pending.promise.catch(n=>{}),yield iU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new kp,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function iU(t){return new Promise(e=>{setTimeout(e,t)})}var oU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},pi=new HE("appCheck","AppCheck",oU);function IA(t){if(!Vn(t).activated)throw pi.create("use-before-activation",{appName:t.name})}function EA(r,i){return N(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw pi.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw pi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw pi.create("fetch-parse-error",{originalErrorMessage:y?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw pi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function DA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${nU}/projects/${n}/apps/${r}:${rU}?key=${i}`,body:{debug_token:e}}}var sU="firebase-app-check-database",aU=1,Iv="firebase-app-check-store";var Lh=null;function uU(){return Lh||(Lh=new Promise((t,e)=>{try{let n=indexedDB.open(sU,aU);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(pi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Iv,{keyPath:"compositeKey"})}}}catch(n){e(pi.create("storage-open",{originalErrorMessage:n?.message}))}}),Lh)}function cU(t,e){return lU(dU(t),e)}function lU(t,e){return N(this,null,function*(){let r=(yield uU()).transaction(Iv,"readwrite"),o=r.objectStore(Iv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(pi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function dU(t){return`${t.options.appId}-${t.name}`}var Ev=new ll("@firebase/app-check");function wv(t,e){return cl()?cU(t,e).catch(n=>{Ev.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function TA(){return _A().enabled}function bA(){return N(this,null,function*(){let t=_A();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var hU={error:"UNKNOWN_ERROR"};function fU(t){return BE.encodeString(JSON.stringify(t),!1)}function Dv(t,e=!1){return N(this,null,function*(){let n=t.app;IA(n);let r=Vn(n),i=r.token,o;if(i&&!nc(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(nc(u)?i=u:yield wv(n,void 0))}if(!e&&i&&nc(i))return{token:i.token};let s=!1;if(TA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=EA(DA(n,yield bA()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield wv(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Vn(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Ev.warn(u.message):Ev.error(u),o=u}let a;return i?o?nc(i)?a={token:i.token,internalError:o}:a=vA(o):(a={token:i.token},r.token=i,yield wv(n,i)):a=vA(o),s&&yU(n,a),a})}function pU(t){return N(this,null,function*(){let e=t.app;IA(e);let{provider:n}=Vn(e);if(TA()){let r=yield bA(),{token:i}=yield EA(DA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function gU(t,e,n,r){let{app:i}=t,o=Vn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&nc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),yA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>yA(t))}function CA(t,e){let n=Vn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function yA(t){let{app:e}=t,n=Vn(e),r=n.tokenRefresher;r||(r=mU(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function mU(t){let{app:e}=t;return new _v(()=>N(this,null,function*(){let n=Vn(e),r;if(n.token?r=yield Dv(t,!0):r=yield Dv(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Vn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},mA.RETRIAL_MIN_WAIT,mA.RETRIAL_MAX_WAIT)}function yU(t,e){let n=Vn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function nc(t){return t.expireTimeMillis-Date.now()>0}function vA(t){return{token:fU(hU),error:t}}var Tv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Vn(this.app);for(let n of e)CA(this.app,n.next);return Promise.resolve()}};function vU(t,e){return new Tv(t,e)}function wU(t){return{getToken:e=>Dv(t,e),getLimitedUseToken:()=>pU(t),addTokenListener:e=>gU(t,"INTERNAL",e),removeTokenListener:e=>CA(t.app,e)}}var _U="@firebase/app-check",IU="0.8.5";var EU="app-check",wA="app-check-internal";function DU(){Wa(new ji(EU,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return vU(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(wA).initialize()})),Wa(new ji(wA,t=>{let e=t.getProvider("app-check").getImmediate();return wU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),sn(_U,IU)}DU();var TU=["localhost","0.0.0.0","127.0.0.1"],I8=typeof window<"u"&&TU.includes(window.location.hostname);var bv=new H("angularfire2.auth.use-emulator"),Cv=new H("angularfire2.auth.settings"),Av=new H("angularfire2.auth.tenant-id"),Sv=new H("angularfire2.auth.langugage-code"),xv=new H("angularfire2.auth.use-device-language"),Mv=new H("angularfire.auth.persistence"),Rv=(t,e,n,r,i,o,s,a)=>Fh(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))u.settings[l]=d;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]),SA=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,l,d,f,g,y){let b=new je,S=Y(void 0).pipe(Jt(s.outsideAngular),Fe(()=>o.runOutsideAngular(()=>import("./chunk-PVIU2VTJ.js"))),X(()=>tc(n,o,r)),X(C=>Rv(C,o,a,l,d,f,u,g)),Ul({bufferSize:1,refCount:!1}));if(ai(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Y(null);else{S.pipe(un()).subscribe();let C=S.pipe(Fe(F=>F.getRedirectResult().then(q=>q,()=>null)),jt,Ul({bufferSize:1,refCount:!1})),P=S.pipe(Fe(F=>new oe(q=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(ee=>q.next(ee),ee=>q.error(ee),()=>q.complete()))})))),$=S.pipe(Fe(F=>new oe(q=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(ee=>q.next(ee),ee=>q.error(ee),()=>q.complete()))}))));this.authState=C.pipe(Bl(P),an(s.outsideAngular),Jt(s.insideAngular)),this.user=C.pipe(Bl($),an(s.outsideAngular),Jt(s.insideAngular)),this.idToken=this.user.pipe(Fe(F=>F?ve(F.getIdToken()):Y(null))),this.idTokenResult=this.user.pipe(Fe(F=>F?ve(F.getIdTokenResult()):Y(null))),this.credential=Xp(C,b,this.authState.pipe(ut(F=>!F))).pipe(X(F=>F?.user?F:null),an(s.outsideAngular),Jt(s.insideAngular))}return gA(this,S,o,{spy:{apply:(C,P,$)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&$.then(F=>b.next(F))}}})}static \u0275fac=function(r){return new(r||t)(L(Vs),L(js,8),L(ht),L(pe),L(Ls),L(bv,8),L(Cv,8),L(Av,8),L(Sv,8),L(xv,8),L(Mv,8),L(co,8))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var xA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},MA={};var gi,Nv;(function(){var t;function e(I,v){function _(){}_.prototype=v.prototype,I.D=v.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(E,D,A){for(var w=Array(arguments.length-2),gr=2;gr<arguments.length;gr++)w[gr-2]=arguments[gr];return v.prototype[D].apply(E,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,_){_||(_=0);var E=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)E[D]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(D=0;16>D;++D)E[D]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=I.g[0],_=I.g[1],D=I.g[2];var A=I.g[3],w=v+(A^_&(D^A))+E[0]+3614090360&4294967295;v=_+(w<<7&4294967295|w>>>25),w=A+(D^v&(_^D))+E[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=D+(_^A&(v^_))+E[2]+606105819&4294967295,D=A+(w<<17&4294967295|w>>>15),w=_+(v^D&(A^v))+E[3]+3250441966&4294967295,_=D+(w<<22&4294967295|w>>>10),w=v+(A^_&(D^A))+E[4]+4118548399&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(D^v&(_^D))+E[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=D+(_^A&(v^_))+E[6]+2821735955&4294967295,D=A+(w<<17&4294967295|w>>>15),w=_+(v^D&(A^v))+E[7]+4249261313&4294967295,_=D+(w<<22&4294967295|w>>>10),w=v+(A^_&(D^A))+E[8]+1770035416&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(D^v&(_^D))+E[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=D+(_^A&(v^_))+E[10]+4294925233&4294967295,D=A+(w<<17&4294967295|w>>>15),w=_+(v^D&(A^v))+E[11]+2304563134&4294967295,_=D+(w<<22&4294967295|w>>>10),w=v+(A^_&(D^A))+E[12]+1804603682&4294967295,v=_+(w<<7&4294967295|w>>>25),w=A+(D^v&(_^D))+E[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=D+(_^A&(v^_))+E[14]+2792965006&4294967295,D=A+(w<<17&4294967295|w>>>15),w=_+(v^D&(A^v))+E[15]+1236535329&4294967295,_=D+(w<<22&4294967295|w>>>10),w=v+(D^A&(_^D))+E[1]+4129170786&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^D&(v^_))+E[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=D+(v^_&(A^v))+E[11]+643717713&4294967295,D=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(D^A))+E[0]+3921069994&4294967295,_=D+(w<<20&4294967295|w>>>12),w=v+(D^A&(_^D))+E[5]+3593408605&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^D&(v^_))+E[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=D+(v^_&(A^v))+E[15]+3634488961&4294967295,D=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(D^A))+E[4]+3889429448&4294967295,_=D+(w<<20&4294967295|w>>>12),w=v+(D^A&(_^D))+E[9]+568446438&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^D&(v^_))+E[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=D+(v^_&(A^v))+E[3]+4107603335&4294967295,D=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(D^A))+E[8]+1163531501&4294967295,_=D+(w<<20&4294967295|w>>>12),w=v+(D^A&(_^D))+E[13]+2850285829&4294967295,v=_+(w<<5&4294967295|w>>>27),w=A+(_^D&(v^_))+E[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=D+(v^_&(A^v))+E[7]+1735328473&4294967295,D=A+(w<<14&4294967295|w>>>18),w=_+(A^v&(D^A))+E[12]+2368359562&4294967295,_=D+(w<<20&4294967295|w>>>12),w=v+(_^D^A)+E[5]+4294588738&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^D)+E[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=D+(A^v^_)+E[11]+1839030562&4294967295,D=A+(w<<16&4294967295|w>>>16),w=_+(D^A^v)+E[14]+4259657740&4294967295,_=D+(w<<23&4294967295|w>>>9),w=v+(_^D^A)+E[1]+2763975236&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^D)+E[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=D+(A^v^_)+E[7]+4139469664&4294967295,D=A+(w<<16&4294967295|w>>>16),w=_+(D^A^v)+E[10]+3200236656&4294967295,_=D+(w<<23&4294967295|w>>>9),w=v+(_^D^A)+E[13]+681279174&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^D)+E[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=D+(A^v^_)+E[3]+3572445317&4294967295,D=A+(w<<16&4294967295|w>>>16),w=_+(D^A^v)+E[6]+76029189&4294967295,_=D+(w<<23&4294967295|w>>>9),w=v+(_^D^A)+E[9]+3654602809&4294967295,v=_+(w<<4&4294967295|w>>>28),w=A+(v^_^D)+E[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=D+(A^v^_)+E[15]+530742520&4294967295,D=A+(w<<16&4294967295|w>>>16),w=_+(D^A^v)+E[2]+3299628645&4294967295,_=D+(w<<23&4294967295|w>>>9),w=v+(D^(_|~A))+E[0]+4096336452&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~D))+E[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=D+(v^(A|~_))+E[14]+2878612391&4294967295,D=A+(w<<15&4294967295|w>>>17),w=_+(A^(D|~v))+E[5]+4237533241&4294967295,_=D+(w<<21&4294967295|w>>>11),w=v+(D^(_|~A))+E[12]+1700485571&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~D))+E[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=D+(v^(A|~_))+E[10]+4293915773&4294967295,D=A+(w<<15&4294967295|w>>>17),w=_+(A^(D|~v))+E[1]+2240044497&4294967295,_=D+(w<<21&4294967295|w>>>11),w=v+(D^(_|~A))+E[8]+1873313359&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~D))+E[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=D+(v^(A|~_))+E[6]+2734768916&4294967295,D=A+(w<<15&4294967295|w>>>17),w=_+(A^(D|~v))+E[13]+1309151649&4294967295,_=D+(w<<21&4294967295|w>>>11),w=v+(D^(_|~A))+E[4]+4149444226&4294967295,v=_+(w<<6&4294967295|w>>>26),w=A+(_^(v|~D))+E[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=D+(v^(A|~_))+E[2]+718787259&4294967295,D=A+(w<<15&4294967295|w>>>17),w=_+(A^(D|~v))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(D+(w<<21&4294967295|w>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var _=v-this.blockSize,E=this.B,D=this.h,A=0;A<v;){if(D==0)for(;A<=_;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<v;)if(E[D++]=I.charCodeAt(A++),D==this.blockSize){i(this,E),D=0;break}}else for(;A<v;)if(E[D++]=I[A++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var _=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=_&255,_/=256;for(this.u(I),I=Array(16),v=_=0;4>v;++v)for(var E=0;32>E;E+=8)I[_++]=this.g[v]>>>E&255;return I};function o(I,v){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=v(I)}function s(I,v){this.h=v;for(var _=[],E=!0,D=I.length-1;0<=D;D--){var A=I[D]|0;E&&A==v||(_[D]=A,E=!1)}this.g=_}var a={};function u(I){return-128<=I&&128>I?o(I,function(v){return new s([v|0],0>v?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return C(l(-I));for(var v=[],_=1,E=0;I>=_;E++)v[E]=I/_|0,_*=4294967296;return new s(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return C(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),E=f,D=0;D<I.length;D+=8){var A=Math.min(8,I.length-D),w=parseInt(I.substring(D,D+A),v);8>A?(A=l(Math.pow(v,A)),E=E.j(A).add(l(w))):(E=E.j(_),E=E.add(l(w)))}return E}var f=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(S(this))return-C(this).m();for(var I=0,v=1,_=0;_<this.g.length;_++){var E=this.i(_);I+=(0<=E?E:4294967296+E)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(S(this))return"-"+C(this).toString(I);for(var v=l(Math.pow(I,6)),_=this,E="";;){var D=q(_,v).g;_=P(_,D.j(v));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=D,b(_))return A+E;for(;6>A.length;)A="0"+A;E=A+E}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function S(I){return I.h==-1}t.l=function(I){return I=P(this,I),S(I)?-1:b(I)?0:1};function C(I){for(var v=I.g.length,_=[],E=0;E<v;E++)_[E]=~I.g[E];return new s(_,~I.h).add(g)}t.abs=function(){return S(this)?C(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0,D=0;D<=v;D++){var A=E+(this.i(D)&65535)+(I.i(D)&65535),w=(A>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=w>>>16,A&=65535,w&=65535,_[D]=w<<16|A}return new s(_,_[_.length-1]&-2147483648?-1:0)};function P(I,v){return I.add(C(v))}t.j=function(I){if(b(this)||b(I))return f;if(S(this))return S(I)?C(this).j(C(I)):C(C(this).j(I));if(S(I))return C(this.j(C(I)));if(0>this.l(y)&&0>I.l(y))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,_=[],E=0;E<2*v;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var A=this.i(E)>>>16,w=this.i(E)&65535,gr=I.i(D)>>>16,Aa=I.i(D)&65535;_[2*E+2*D]+=w*Aa,$(_,2*E+2*D),_[2*E+2*D+1]+=A*Aa,$(_,2*E+2*D+1),_[2*E+2*D+1]+=w*gr,$(_,2*E+2*D+1),_[2*E+2*D+2]+=A*gr,$(_,2*E+2*D+2)}for(E=0;E<v;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=v;E<2*v;E++)_[E]=0;return new s(_,0)};function $(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function F(I,v){this.g=I,this.h=v}function q(I,v){if(b(v))throw Error("division by zero");if(b(I))return new F(f,f);if(S(I))return v=q(C(I),v),new F(C(v.g),C(v.h));if(S(v))return v=q(I,C(v)),new F(C(v.g),v.h);if(30<I.g.length){if(S(I)||S(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,E=v;0>=E.l(I);)_=ee(_),E=ee(E);var D=Q(_,1),A=Q(E,1);for(E=Q(E,2),_=Q(_,2);!b(E);){var w=A.add(E);0>=w.l(I)&&(D=D.add(_),A=w),E=Q(E,1),_=Q(_,1)}return v=P(I,D.j(v)),new F(D,v)}for(D=f;0<=I.l(v);){for(_=Math.max(1,Math.floor(I.m()/v.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),A=l(_),w=A.j(v);S(w)||0<w.l(I);)_-=E,A=l(_),w=A.j(v);b(A)&&(A=g),D=D.add(A),I=P(I,w)}return new F(D,I)}t.A=function(I){return q(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)&I.i(E);return new s(_,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)|I.i(E);return new s(_,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],E=0;E<v;E++)_[E]=this.i(E)^I.i(E);return new s(_,this.h^I.h)};function ee(I){for(var v=I.g.length+1,_=[],E=0;E<v;E++)_[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(_,I.h)}function Q(I,v){var _=v>>5;v%=32;for(var E=I.g.length-_,D=[],A=0;A<E;A++)D[A]=0<v?I.i(A+_)>>>v|I.i(A+_+1)<<32-v:I.i(A+_);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Nv=MA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,gi=MA.Integer=s}).apply(typeof xA<"u"?xA:typeof self<"u"?self:typeof window<"u"?window:{});var Vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kr={};var Pv,kv,Us,Ov,rc,jh,Fv,Lv,Vv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vh=="object"&&Vh];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(c,h){if(h)e:{var p=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var T=c[m];if(!(T in p))break e;p=p[T]}c=c[c.length-1],m=p[c],h=h(m),h!=m&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function o(c,h){c instanceof String&&(c+="");var p=0,m=!1,T={next:function(){if(!m&&p<c.length){var M=p++;return{value:h(M,c[M]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function l(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),c.apply(h,T)}}return function(){return c.apply(h,arguments)}}function g(c,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function b(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(m,T,M){for(var j=Array(arguments.length-2),be=2;be<arguments.length;be++)j[be-2]=arguments[be];return h.prototype[T].apply(m,j)}}function S(c){let h=c.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=c[m];return p}return[]}function C(c,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(u(m)){let T=c.length||0,M=m.length||0;c.length=T+M;for(let j=0;j<M;j++)c[T+j]=m[j]}else c.push(m)}}class P{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function $(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function q(c){return q[" "](c),c}q[" "]=function(){};var ee=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Q(c,h,p){for(let m in c)h.call(p,c[m],m,c)}function I(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function v(c){let h={};for(let p in c)h[p]=c[p];return h}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,h){let p,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(p in m)c[p]=m[p];for(let M=0;M<_.length;M++)p=_[M],Object.prototype.hasOwnProperty.call(m,p)&&(c[p]=m[p])}}function D(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function A(c){a.setTimeout(()=>{throw c},0)}function w(){var c=up;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class gr{constructor(){this.h=this.g=null}add(h,p){let m=Aa.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Aa=new P(()=>new lR,c=>c.reset());class lR{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Sa,xa=!1,up=new gr,LI=()=>{let c=a.Promise.resolve(void 0);Sa=()=>{c.then(dR)}};var dR=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(p){A(p)}var h=Aa;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}xa=!1};function zr(){this.s=this.s,this.C=this.C}zr.prototype.s=!1,zr.prototype.ma=function(){this.s||(this.s=!0,this.N())},zr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function _t(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}_t.prototype.h=function(){this.defaultPrevented=!0};var hR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function Ma(c,h){if(_t.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(ee){e:{try{q(h.nodeName);var T=!0;break e}catch{}T=!1}T||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:fR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ma.aa.h.call(this)}}b(Ma,_t);var fR={2:"touch",3:"pen",4:"mouse"};Ma.prototype.h=function(){Ma.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ra="closure_listenable_"+(1e6*Math.random()|0),pR=0;function gR(c,h,p,m,T){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=T,this.key=++pR,this.da=this.fa=!1}function Hc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Gc(c){this.src=c,this.g={},this.h=0}Gc.prototype.add=function(c,h,p,m,T){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var j=lp(c,h,m,T);return-1<j?(h=c[j],p||(h.fa=!1)):(h=new gR(h,this.src,M,!!m,T),h.fa=p,c.push(h)),h};function cp(c,h){var p=h.type;if(p in c.g){var m=c.g[p],T=Array.prototype.indexOf.call(m,h,void 0),M;(M=0<=T)&&Array.prototype.splice.call(m,T,1),M&&(Hc(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function lp(c,h,p,m){for(var T=0;T<c.length;++T){var M=c[T];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==m)return T}return-1}var dp="closure_lm_"+(1e6*Math.random()|0),hp={};function VI(c,h,p,m,T){if(m&&m.once)return UI(c,h,p,m,T);if(Array.isArray(h)){for(var M=0;M<h.length;M++)VI(c,h[M],p,m,T);return null}return p=mp(p),c&&c[Ra]?c.K(h,p,l(m)?!!m.capture:!!m,T):jI(c,h,p,!1,m,T)}function jI(c,h,p,m,T,M){if(!h)throw Error("Invalid event type");var j=l(T)?!!T.capture:!!T,be=pp(c);if(be||(c[dp]=be=new Gc(c)),p=be.add(h,p,m,j,M),p.proxy)return p;if(m=mR(),p.proxy=m,m.src=c,m.listener=p,c.addEventListener)hR||(T=j),T===void 0&&(T=!1),c.addEventListener(h.toString(),m,T);else if(c.attachEvent)c.attachEvent($I(h.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function mR(){function c(p){return h.call(c.src,c.listener,p)}let h=yR;return c}function UI(c,h,p,m,T){if(Array.isArray(h)){for(var M=0;M<h.length;M++)UI(c,h[M],p,m,T);return null}return p=mp(p),c&&c[Ra]?c.L(h,p,l(m)?!!m.capture:!!m,T):jI(c,h,p,!0,m,T)}function BI(c,h,p,m,T){if(Array.isArray(h))for(var M=0;M<h.length;M++)BI(c,h[M],p,m,T);else m=l(m)?!!m.capture:!!m,p=mp(p),c&&c[Ra]?(c=c.i,h=String(h).toString(),h in c.g&&(M=c.g[h],p=lp(M,p,m,T),-1<p&&(Hc(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete c.g[h],c.h--)))):c&&(c=pp(c))&&(h=c.g[h.toString()],c=-1,h&&(c=lp(h,p,m,T)),(p=-1<c?h[c]:null)&&fp(p))}function fp(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[Ra])cp(h.i,c);else{var p=c.type,m=c.proxy;h.removeEventListener?h.removeEventListener(p,m,c.capture):h.detachEvent?h.detachEvent($I(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=pp(h))?(cp(p,c),p.h==0&&(p.src=null,h[dp]=null)):Hc(c)}}}function $I(c){return c in hp?hp[c]:hp[c]="on"+c}function yR(c,h){if(c.da)c=!0;else{h=new Ma(h,this);var p=c.listener,m=c.ha||c.src;c.fa&&fp(c),c=p.call(m,h)}return c}function pp(c){return c=c[dp],c instanceof Gc?c:null}var gp="__closure_events_fn_"+(1e9*Math.random()>>>0);function mp(c){return typeof c=="function"?c:(c[gp]||(c[gp]=function(h){return c.handleEvent(h)}),c[gp])}function It(){zr.call(this),this.i=new Gc(this),this.M=this,this.F=null}b(It,zr),It.prototype[Ra]=!0,It.prototype.removeEventListener=function(c,h,p,m){BI(this,c,h,p,m)};function Mt(c,h){var p,m=c.F;if(m)for(p=[];m;m=m.F)p.push(m);if(c=c.M,m=h.type||h,typeof h=="string")h=new _t(h,c);else if(h instanceof _t)h.target=h.target||c;else{var T=h;h=new _t(m,c),E(h,T)}if(T=!0,p)for(var M=p.length-1;0<=M;M--){var j=h.g=p[M];T=Wc(j,m,!0,h)&&T}if(j=h.g=c,T=Wc(j,m,!0,h)&&T,T=Wc(j,m,!1,h)&&T,p)for(M=0;M<p.length;M++)j=h.g=p[M],T=Wc(j,m,!1,h)&&T}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],m=0;m<p.length;m++)Hc(p[m]);delete c.g[h],c.h--}}this.F=null},It.prototype.K=function(c,h,p,m){return this.i.add(String(c),h,!1,p,m)},It.prototype.L=function(c,h,p,m){return this.i.add(String(c),h,!0,p,m)};function Wc(c,h,p,m){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var T=!0,M=0;M<h.length;++M){var j=h[M];if(j&&!j.da&&j.capture==p){var be=j.listener,mt=j.ha||j.src;j.fa&&cp(c.i,j),T=be.call(mt,m)!==!1&&T}}return T&&!m.defaultPrevented}function qI(c,h,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function zI(c){c.g=qI(()=>{c.g=null,c.i&&(c.i=!1,zI(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class vR extends zr{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:zI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Na(c){zr.call(this),this.h=c,this.g={}}b(Na,zr);var HI=[];function GI(c){Q(c.g,function(h,p){this.g.hasOwnProperty(p)&&fp(h)},c),c.g={}}Na.prototype.N=function(){Na.aa.N.call(this),GI(this)},Na.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yp=a.JSON.stringify,wR=a.JSON.parse,_R=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function vp(){}vp.prototype.h=null;function WI(c){return c.h||(c.h=c.i())}function KI(){}var Pa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wp(){_t.call(this,"d")}b(wp,_t);function _p(){_t.call(this,"c")}b(_p,_t);var Oi={},QI=null;function Kc(){return QI=QI||new It}Oi.La="serverreachability";function YI(c){_t.call(this,Oi.La,c)}b(YI,_t);function ka(c){let h=Kc();Mt(h,new YI(h))}Oi.STAT_EVENT="statevent";function ZI(c,h){_t.call(this,Oi.STAT_EVENT,c),this.stat=h}b(ZI,_t);function Rt(c){let h=Kc();Mt(h,new ZI(h,c))}Oi.Ma="timingevent";function JI(c,h){_t.call(this,Oi.Ma,c),this.size=h}b(JI,_t);function Oa(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function Fa(){this.g=!0}Fa.prototype.xa=function(){this.g=!1};function IR(c,h,p,m,T,M){c.info(function(){if(c.g)if(M)for(var j="",be=M.split("&"),mt=0;mt<be.length;mt++){var we=be[mt].split("=");if(1<we.length){var Et=we[0];we=we[1];var Dt=Et.split("_");j=2<=Dt.length&&Dt[1]=="type"?j+(Et+"="+we+"&"):j+(Et+"=redacted&")}}else j=null;else j=M;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+h+`
`+p+`
`+j})}function ER(c,h,p,m,T,M,j){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+h+`
`+p+`
`+M+" "+j})}function Lo(c,h,p,m){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+TR(c,p)+(m?" "+m:"")})}function DR(c,h){c.info(function(){return"TIMEOUT: "+h})}Fa.prototype.info=function(){};function TR(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var m=p[c];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var M=T[0];if(M!="noop"&&M!="stop"&&M!="close")for(var j=1;j<T.length;j++)T[j]=""}}}}return yp(p)}catch{return h}}var Qc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},XI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ip;function Yc(){}b(Yc,vp),Yc.prototype.g=function(){return new XMLHttpRequest},Yc.prototype.i=function(){return{}},Ip=new Yc;function Hr(c,h,p,m){this.j=c,this.i=h,this.l=p,this.R=m||1,this.U=new Na(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eE}function eE(){this.i=null,this.g="",this.h=!1}var tE={},Ep={};function Dp(c,h,p){c.L=1,c.v=el(mr(h)),c.m=p,c.P=!0,nE(c,null)}function nE(c,h){c.F=Date.now(),Zc(c),c.A=mr(c.v);var p=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),mE(p.i,"t",m),c.C=0,p=c.j.J,c.h=new eE,c.g=kE(c.j,p?h:null,!c.m),0<c.O&&(c.M=new vR(g(c.Y,c,c.g),c.O)),h=c.U,p=c.g,m=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(HI[0]=T.toString()),T=HI);for(var M=0;M<T.length;M++){var j=VI(p,T[M],m||h.handleEvent,!1,h.h||h);if(!j)break;h.g[j.key]=j}h=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),ka(),IR(c.i,c.u,c.A,c.l,c.R,c.m)}Hr.prototype.ca=function(c){c=c.target;let h=this.M;h&&yr(c)==3?h.j():this.Y(c)},Hr.prototype.Y=function(c){try{if(c==this.g)e:{let Dt=yr(this.g);var h=this.g.Ba();let Uo=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||DE(this.g)))){this.J||Dt!=4||h==7||(h==8||0>=Uo?ka(3):ka(2)),Tp(this);var p=this.g.Z();this.X=p;t:if(rE(this)){var m=DE(this.g);c="";var T=m.length,M=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fi(this),La(this);var j="";break t}this.h.i=new a.TextDecoder}for(h=0;h<T;h++)this.h.h=!0,c+=this.h.i.decode(m[h],{stream:!(M&&h==T-1)});m.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=p==200,ER(this.i,this.u,this.A,this.l,this.R,Dt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var be,mt=this.g;if((be=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(be)){var we=be;break t}}we=null}if(p=we)Lo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bp(this,p);else{this.o=!1,this.s=3,Rt(12),Fi(this),La(this);break e}}if(this.P){p=!0;let En;for(;!this.J&&this.C<j.length;)if(En=bR(this,j),En==Ep){Dt==4&&(this.s=4,Rt(14),p=!1),Lo(this.i,this.l,null,"[Incomplete Response]");break}else if(En==tE){this.s=4,Rt(15),Lo(this.i,this.l,j,"[Invalid Chunk]"),p=!1;break}else Lo(this.i,this.l,En,null),bp(this,En);if(rE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||j.length!=0||this.h.h||(this.s=1,Rt(16),p=!1),this.o=this.o&&p,!p)Lo(this.i,this.l,j,"[Invalid Chunked Response]"),Fi(this),La(this);else if(0<j.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Rp(Et),Et.M=!0,Rt(11))}}else Lo(this.i,this.l,j,null),bp(this,j);Dt==4&&Fi(this),this.o&&!this.J&&(Dt==4?ME(this.j,this):(this.o=!1,Zc(this)))}else $R(this.g),p==400&&0<j.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),Fi(this),La(this)}}}catch{}finally{}};function rE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function bR(c,h){var p=c.C,m=h.indexOf(`
`,p);return m==-1?Ep:(p=Number(h.substring(p,m)),isNaN(p)?tE:(m+=1,m+p>h.length?Ep:(h=h.slice(m,m+p),c.C=m+p,h)))}Hr.prototype.cancel=function(){this.J=!0,Fi(this)};function Zc(c){c.S=Date.now()+c.I,iE(c,c.I)}function iE(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Oa(g(c.ba,c),h)}function Tp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Hr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(DR(this.i,this.A),this.L!=2&&(ka(),Rt(17)),Fi(this),this.s=2,La(this)):iE(this,this.S-c)};function La(c){c.j.G==0||c.J||ME(c.j,c)}function Fi(c){Tp(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,GI(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function bp(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||Cp(p.h,c))){if(!c.K&&Cp(p.h,c)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)ol(p),rl(p);else break e;Mp(p),Rt(18)}}else p.za=T[1],0<p.za-p.T&&37500>T[2]&&p.F&&p.v==0&&!p.C&&(p.C=Oa(g(p.Za,p),6e3));if(1>=aE(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Vi(p,11)}else if((c.K||p.g==c)&&ol(p),!$(h))for(T=p.Da.g.parse(h),h=0;h<T.length;h++){let we=T[h];if(p.T=we[0],we=we[1],p.G==2)if(we[0]=="c"){p.K=we[1],p.ia=we[2];let Et=we[3];Et!=null&&(p.la=Et,p.j.info("VER="+p.la));let Dt=we[4];Dt!=null&&(p.Aa=Dt,p.j.info("SVER="+p.Aa));let Uo=we[5];Uo!=null&&typeof Uo=="number"&&0<Uo&&(m=1.5*Uo,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let En=c.g;if(En){let al=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(al){var M=m.h;M.g||al.indexOf("spdy")==-1&&al.indexOf("quic")==-1&&al.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Ap(M,M.h),M.h=null))}if(m.D){let Np=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Np&&(m.ya=Np,ke(m.I,m.D,Np))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var j=c;if(m.qa=PE(m,m.J?m.ia:null,m.W),j.K){uE(m.h,j);var be=j,mt=m.L;mt&&(be.I=mt),be.B&&(Tp(be),Zc(be)),m.g=j}else SE(m);0<p.i.length&&il(p)}else we[0]!="stop"&&we[0]!="close"||Vi(p,7);else p.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?Vi(p,7):xp(p):we[0]!="noop"&&p.l&&p.l.ta(we),p.v=0)}}ka(4)}catch{}}var CR=class{constructor(c,h){this.g=c,this.map=h}};function oE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function aE(c){return c.h?1:c.g?c.g.size:0}function Cp(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function Ap(c,h){c.g?c.g.add(h):c.h=h}function uE(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}oE.prototype.cancel=function(){if(this.i=cE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function cE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return S(c.i)}function AR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],p=c.length,m=0;m<p;m++)h.push(c[m]);return h}h=[],p=0;for(m in c)h[p++]=c[m];return h}function SR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let m in c)h[p++]=m;return h}}}function lE(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=SR(c),m=AR(c),T=m.length,M=0;M<T;M++)h.call(void 0,m[M],p&&p[M],c)}var dE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xR(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var m=c[p].indexOf("="),T=null;if(0<=m){var M=c[p].substring(0,m);T=c[p].substring(m+1)}else M=c[p];h(M,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Li(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Li){this.h=c.h,Jc(this,c.j),this.o=c.o,this.g=c.g,Xc(this,c.s),this.l=c.l;var h=c.i,p=new Ua;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),hE(this,p),this.m=c.m}else c&&(h=String(c).match(dE))?(this.h=!1,Jc(this,h[1]||"",!0),this.o=Va(h[2]||""),this.g=Va(h[3]||"",!0),Xc(this,h[4]),this.l=Va(h[5]||"",!0),hE(this,h[6]||"",!0),this.m=Va(h[7]||"")):(this.h=!1,this.i=new Ua(null,this.h))}Li.prototype.toString=function(){var c=[],h=this.j;h&&c.push(ja(h,fE,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(ja(h,fE,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(ja(p,p.charAt(0)=="/"?NR:RR,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",ja(p,kR)),c.join("")};function mr(c){return new Li(c)}function Jc(c,h,p){c.j=p?Va(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Xc(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function hE(c,h,p){h instanceof Ua?(c.i=h,OR(c.i,c.h)):(p||(h=ja(h,PR)),c.i=new Ua(h,c.h))}function ke(c,h,p){c.i.set(h,p)}function el(c){return ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Va(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ja(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,MR),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function MR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var fE=/[#\/\?@]/g,RR=/[#\?:]/g,NR=/[#\?]/g,PR=/[#\?@]/g,kR=/#/g;function Ua(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function Gr(c){c.g||(c.g=new Map,c.h=0,c.i&&xR(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Ua.prototype,t.add=function(c,h){Gr(this),this.i=null,c=Vo(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function pE(c,h){Gr(c),h=Vo(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function gE(c,h){return Gr(c),h=Vo(c,h),c.g.has(h)}t.forEach=function(c,h){Gr(this),this.g.forEach(function(p,m){p.forEach(function(T){c.call(h,T,m,this)},this)},this)},t.na=function(){Gr(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let T=c[m];for(let M=0;M<T.length;M++)p.push(h[m])}return p},t.V=function(c){Gr(this);let h=[];if(typeof c=="string")gE(this,c)&&(h=h.concat(this.g.get(Vo(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},t.set=function(c,h){return Gr(this),this.i=null,c=Vo(this,c),gE(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},t.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function mE(c,h,p){pE(c,h),0<p.length&&(c.i=null,c.g.set(Vo(c,h),S(p)),c.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let M=encodeURIComponent(String(m)),j=this.V(m);for(m=0;m<j.length;m++){var T=M;j[m]!==""&&(T+="="+encodeURIComponent(String(j[m]))),c.push(T)}}return this.i=c.join("&")};function Vo(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function OR(c,h){h&&!c.j&&(Gr(c),c.i=null,c.g.forEach(function(p,m){var T=m.toLowerCase();m!=T&&(pE(this,m),mE(this,T,p))},c)),c.j=h}function FR(c,h){let p=new Fa;if(a.Image){let m=new Image;m.onload=y(Wr,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(Wr,p,"TestLoadImage: error",!1,h,m),m.onabort=y(Wr,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(Wr,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else h(!1)}function LR(c,h){let p=new Fa,m=new AbortController,T=setTimeout(()=>{m.abort(),Wr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:m.signal}).then(M=>{clearTimeout(T),M.ok?Wr(p,"TestPingServer: ok",!0,h):Wr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(T),Wr(p,"TestPingServer: error",!1,h)})}function Wr(c,h,p,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(p)}catch{}}function VR(){this.g=new _R}function jR(c,h,p){let m=p||"";try{lE(c,function(T,M){let j=T;l(T)&&(j=yp(T)),h.push(m+M+"="+encodeURIComponent(j))})}catch(T){throw h.push(m+"type="+encodeURIComponent("_badmap")),T}}function Ba(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Ba,vp),Ba.prototype.g=function(){return new tl(this.l,this.j)},Ba.prototype.i=function(c){return function(){return c}}({});function tl(c,h){It.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(tl,It),t=tl.prototype,t.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,qa(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$a(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,qa(this)),this.g&&(this.readyState=3,qa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yE(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function yE(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?$a(this):qa(this),this.readyState==3&&yE(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,$a(this))},t.Qa=function(c){this.g&&(this.response=c,$a(this))},t.ga=function(){this.g&&$a(this)};function $a(c){c.readyState=4,c.l=null,c.j=null,c.v=null,qa(c)}t.setRequestHeader=function(c,h){this.u.append(c,h)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function qa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(tl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function vE(c){let h="";return Q(c,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function Sp(c,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=vE(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):ke(c,h,p))}function ze(c){It.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(ze,It);var UR=/^https?$/i,BR=["POST","PUT"];t=ze.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ip.g(),this.v=this.o?WI(this.o):WI(Ip),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(M){wE(this,M);return}if(c=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)p.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let M of m.keys())p.set(M,m.get(M));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(BR,h,void 0))||m||T||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,j]of p)this.g.setRequestHeader(M,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{EE(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){wE(this,M)}};function wE(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,_E(c),nl(c)}function _E(c){c.A||(c.A=!0,Mt(c,"complete"),Mt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Mt(this,"complete"),Mt(this,"abort"),nl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nl(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?IE(this):this.bb())},t.bb=function(){IE(this)};function IE(c){if(c.h&&typeof s<"u"&&(!c.v[1]||yr(c)!=4||c.Z()!=2)){if(c.u&&yr(c)==4)qI(c.Ea,0,c);else if(Mt(c,"readystatechange"),yr(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=j===0){var T=String(c.D).match(dE)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),m=!UR.test(T?T.toLowerCase():"")}p=m}if(p)Mt(c,"complete"),Mt(c,"success");else{c.m=6;try{var M=2<yr(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",_E(c)}}finally{nl(c)}}}}function nl(c,h){if(c.g){EE(c);let p=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||Mt(c,"ready");try{p.onreadystatechange=m}catch{}}}function EE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function yr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),wR(h)}};function DE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function $R(c){let h={};c=(c.g&&2<=yr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if($(c[m]))continue;var p=D(c[m]);let T=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let M=h[T]||[];h[T]=M,M.push(p)}I(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function za(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function TE(c){this.Aa=0,this.i=[],this.j=new Fa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=za("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=za("baseRetryDelayMs",5e3,c),this.cb=za("retryDelaySeedMs",1e4,c),this.Wa=za("forwardChannelMaxRetries",2,c),this.wa=za("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new oE(c&&c.concurrentRequestLimit),this.Da=new VR,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=TE.prototype,t.la=8,t.G=1,t.connect=function(c,h,p,m){Rt(0),this.W=c,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=PE(this,null,this.W),il(this)};function xp(c){if(bE(c),c.G==3){var h=c.U++,p=mr(c.I);if(ke(p,"SID",c.K),ke(p,"RID",h),ke(p,"TYPE","terminate"),Ha(c,p),h=new Hr(c,c.j,h),h.L=2,h.v=el(mr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=kE(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Zc(h)}NE(c)}function rl(c){c.g&&(Rp(c),c.g.cancel(),c.g=null)}function bE(c){rl(c),c.u&&(a.clearTimeout(c.u),c.u=null),ol(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function il(c){if(!sE(c.h)&&!c.s){c.s=!0;var h=c.Ga;Sa||LI(),xa||(Sa(),xa=!0),up.add(h,c),c.B=0}}function qR(c,h){return aE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Oa(g(c.Ga,c,h),RE(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new Hr(this,this.j,c),M=this.o;if(this.S&&(M?(M=v(M),E(M,this.S)):M=this.S),this.m!==null||this.O||(T.H=M,M=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=AE(this,T,h),p=mr(this.I),ke(p,"RID",c),ke(p,"CVER",22),this.D&&ke(p,"X-HTTP-Session-Id",this.D),Ha(this,p),M&&(this.O?h="headers="+encodeURIComponent(String(vE(M)))+"&"+h:this.m&&Sp(p,this.m,M)),Ap(this.h,T),this.Ua&&ke(p,"TYPE","init"),this.P?(ke(p,"$req",h),ke(p,"SID","null"),T.T=!0,Dp(T,p,null)):Dp(T,p,h),this.G=2}}else this.G==3&&(c?CE(this,c):this.i.length==0||sE(this.h)||CE(this))};function CE(c,h){var p;h?p=h.l:p=c.U++;let m=mr(c.I);ke(m,"SID",c.K),ke(m,"RID",p),ke(m,"AID",c.T),Ha(c,m),c.m&&c.o&&Sp(m,c.m,c.o),p=new Hr(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=AE(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ap(c.h,p),Dp(p,m,h)}function Ha(c,h){c.H&&Q(c.H,function(p,m){ke(h,m,p)}),c.l&&lE({},function(p,m){ke(h,m,p)})}function AE(c,h,p){p=Math.min(c.i.length,p);var m=c.l?g(c.l.Na,c.l,c):null;e:{var T=c.i;let M=-1;for(;;){let j=["count="+p];M==-1?0<p?(M=T[0].g,j.push("ofs="+M)):M=0:j.push("ofs="+M);let be=!0;for(let mt=0;mt<p;mt++){let we=T[mt].g,Et=T[mt].map;if(we-=M,0>we)M=Math.max(0,T[mt].g-100),be=!1;else try{jR(Et,j,"req"+we+"_")}catch{m&&m(Et)}}if(be){m=j.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,m}function SE(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;Sa||LI(),xa||(Sa(),xa=!0),up.add(h,c),c.v=0}}function Mp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Oa(g(c.Fa,c),RE(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,xE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Oa(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),rl(this),xE(this))};function Rp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function xE(c){c.g=new Hr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=mr(c.qa);ke(h,"RID","rpc"),ke(h,"SID",c.K),ke(h,"AID",c.T),ke(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&ke(h,"TO",c.ja),ke(h,"TYPE","xmlhttp"),Ha(c,h),c.m&&c.o&&Sp(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=el(mr(h)),p.m=null,p.P=!0,nE(p,c)}t.Za=function(){this.C!=null&&(this.C=null,rl(this),Mp(this),Rt(19))};function ol(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function ME(c,h){var p=null;if(c.g==h){ol(c),Rp(c),c.g=null;var m=2}else if(Cp(c.h,h))p=h.D,uE(c.h,h),m=1;else return;if(c.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var T=c.B;m=Kc(),Mt(m,new JI(m,p)),il(c)}else SE(c);else if(T=h.s,T==3||T==0&&0<h.X||!(m==1&&qR(c,h)||m==2&&Mp(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),T){case 1:Vi(c,5);break;case 4:Vi(c,10);break;case 3:Vi(c,6);break;default:Vi(c,2)}}}function RE(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function Vi(c,h){if(c.j.info("Error code "+h),h==2){var p=g(c.fb,c),m=c.Xa;let T=!m;m=new Li(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Jc(m,"https"),el(m),T?FR(m.toString(),p):LR(m.toString(),p)}else Rt(2);c.G=0,c.l&&c.l.sa(h),NE(c),bE(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function NE(c){if(c.G=0,c.ka=[],c.l){let h=cE(c.h);(h.length!=0||c.i.length!=0)&&(C(c.ka,h),C(c.ka,c.i),c.h.i.length=0,S(c.i),c.i.length=0),c.l.ra()}}function PE(c,h,p){var m=p instanceof Li?mr(p):new Li(p);if(m.g!="")h&&(m.g=h+"."+m.g),Xc(m,m.s);else{var T=a.location;m=T.protocol,h=h?h+"."+T.hostname:T.hostname,T=+T.port;var M=new Li(null);m&&Jc(M,m),h&&(M.g=h),T&&Xc(M,T),p&&(M.l=p),m=M}return p=c.D,h=c.ya,p&&h&&ke(m,p,h),ke(m,"VER",c.la),Ha(c,m),m}function kE(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new ze(new Ba({eb:p})):new ze(c.pa),h.Ha(c.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function OE(){}t=OE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sl(){}sl.prototype.g=function(c,h){return new Zt(c,h)};function Zt(c,h){It.call(this),this.g=new TE(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!$(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!$(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new jo(this)}b(Zt,It),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){xp(this.g)},Zt.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=yp(c),c=p);h.i.push(new CR(h.Ya++,c)),h.G==3&&il(h)},Zt.prototype.N=function(){this.g.l=null,delete this.j,xp(this.g),delete this.g,Zt.aa.N.call(this)};function FE(c){wp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}b(FE,wp);function LE(){_p.call(this),this.status=1}b(LE,_p);function jo(c){this.g=c}b(jo,OE),jo.prototype.ua=function(){Mt(this.g,"a")},jo.prototype.ta=function(c){Mt(this.g,new FE(c))},jo.prototype.sa=function(c){Mt(this.g,new LE)},jo.prototype.ra=function(){Mt(this.g,"b")},sl.prototype.createWebChannel=sl.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,Vv=kr.createWebChannelTransport=function(){return new sl},Lv=kr.getStatEventTarget=function(){return Kc()},Fv=kr.Event=Oi,jh=kr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qc.NO_ERROR=0,Qc.TIMEOUT=8,Qc.HTTP_ERROR=6,rc=kr.ErrorCode=Qc,XI.COMPLETE="complete",Ov=kr.EventType=XI,KI.EventType=Pa,Pa.OPEN="a",Pa.CLOSE="b",Pa.ERROR="c",Pa.MESSAGE="d",It.prototype.listen=It.prototype.K,Us=kr.WebChannel=KI,kv=kr.FetchXmlHttpFactory=Ba,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,Pv=kr.XhrIo=ze}).apply(typeof Vh<"u"?Vh:typeof self<"u"?self:typeof window<"u"?window:{});var RA="@firebase/firestore";var ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");var ya="10.12.3";var Ei=new ll("@firebase/firestore");function Hs(){return Ei.logLevel}function RS(t){Ei.setLogLevel(t)}function O(t,...e){if(Ei.logLevel<=qn.DEBUG){let n=e.map(B_);Ei.debug(`Firestore (${ya}): ${t}`,...n)}}function Ye(t,...e){if(Ei.logLevel<=qn.ERROR){let n=e.map(B_);Ei.error(`Firestore (${ya}): ${t}`,...n)}}function wn(t,...e){if(Ei.logLevel<=qn.WARN){let n=e.map(B_);Ei.warn(`Firestore (${ya}): ${t}`,...n)}}function B_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function z(t="Unexpected state"){let e=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: `+t;throw Ye(e),new Error(e)}function K(t,e){t||z()}function NS(t,e){t||z()}function B(t,e){return t}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends zE{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var st=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Yh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},qv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ot.UNAUTHENTICATED))}shutdown(){}},zv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Hv=class{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new st;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new st,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new st)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new Yh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new ot(e)}},Gv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Wv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Gv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Kv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Qv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(K(typeof n.token=="string"),this.R=n.token,new Kv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function CU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Zh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=CU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function re(t,e){return t<e?-1:t>e?1:0}function ea(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function PS(t){return t+"\0"}var qe=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new qe(0,0))}static max(){return new t(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Jh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&z(),r===void 0?r=e.length-n:r>e.length-n&&z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},me=class t extends Jh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},AU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ze=class t extends Jh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return AU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var U=class t{constructor(e){this.path=e}static fromPath(e){return new t(me.fromString(e))}static fromName(e){return new t(me.fromString(e).popFirst(5))}static empty(){return new t(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new me(e.slice()))}};var ta=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function Yv(t){return t.fields.find(e=>e.kind===2)}function ho(t){return t.fields.filter(e=>e.kind!==2)}ta.UNKNOWN_ID=-1;var Zs=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var gc=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,_n.min())}};function kS(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new qe(n+1,0):new qe(n,r));return new _n(i,U.empty(),e)}function OS(t){return new _n(t.readTime,t.key,-1)}var _n=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(J.min(),U.empty(),-1)}static max(){return new t(J.max(),U.empty(),-1)}};function $_(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=U.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}var FS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Xh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ni(t){return N(this,null,function*(){if(t.code!==R.FAILED_PRECONDITION||t.message!==FS)throw t;O("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var ef=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new st,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new vo(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=q_(r.target.error);this.V.reject(new vo(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new vo(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Jv(n)}},Di=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Ga())===12.2&&Ye("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),fo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!cl())return!1;if(t.C())return!0;let e=Ga(),n=t.S(e),r=0<n&&n<10,i=LS(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new vo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new vo(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return N(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=ef.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),x.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function LS(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var Zv=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return fo(this.B.delete())}},vo=class extends k{constructor(e,n){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Pi(t){return t.name==="IndexedDbTransactionError"}var Jv=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(O("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fo(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),fo(this.store.add(e))}get(e){return fo(this.store.get(e)).next(n=>(n===void 0&&(n=null),O("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),fo(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),fo(this.store.count())}U(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new x((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new x((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,n){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.W(i,n)}Y(e){let n=this.cursor({});return new x((r,i)=>{n.onerror=o=>{let s=q_(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,n){let r=[];return new x((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new Zv(a),l=n(a.primaryKey,a.value,u);if(l instanceof x){let d=l.catch(f=>(u.done(),x.reject(f)));r.push(d)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>x.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function fo(t){return new x((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=q_(r.target.error);n(i)}})}var NA=!1;function q_(t){let e=Di.S(Ga());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return NA||(NA=!0,setTimeout(()=>{throw r},0)),r}}return t}var Xv=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){Pi(n)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Ni(n)}yield this.X(6e4)}))}},ew=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let r=new Set,i=n,o=!0;return x.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}re(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=OS(o);$_(s,r)>0&&(r=s)}),new _n(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var rn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Lc(t){return t==null}function mc(t){return t===0&&1/t==-1/0}function VS(t){return typeof t=="number"&&Number.isInteger(t)&&!mc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Ut(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=PA(e)),e=SU(t.get(n),e);return PA(e)}function SU(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function PA(t){return t+""}function or(t){let e=t.length;if(K(e>=2),e===2)return K(t.charAt(0)===""&&t.charAt(1)===""),me.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&z(),t.charAt(s+1)){case"":let a=t.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:z()}o=s+2}return new me(r)}var kA=["userId","batchId"];function zh(t,e){return[t,Ut(e)]}function jS(t,e,n){return[t,Ut(e),n]}var xU={},MU=["prefixPath","collectionGroup","readTime","documentId"],RU=["prefixPath","collectionGroup","documentId"],NU=["collectionGroup","readTime","prefixPath","documentId"],PU=["canonicalId","targetId"],kU=["targetId","path"],OU=["path","targetId"],FU=["collectionId","parent"],LU=["indexId","uid"],VU=["uid","sequenceNumber"],jU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],UU=["indexId","uid","orderedDocumentKey"],BU=["userId","collectionPath","documentId"],$U=["userId","collectionPath","largestBatchId"],qU=["userId","collectionGroup","largestBatchId"],US=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zU=[...US,"documentOverlays"],BS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$S=BS,qS=[...$S,"indexConfiguration","indexState","indexEntries"],HU=qS;var yc=class extends Xh{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function gt(t,e){let n=B(t);return Di.F(n._e,e)}function OA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Mo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Le=class t{constructor(e,n){this.comparator=e,this.root=n||ar.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ar.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ar.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ys(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ys(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ys(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ys(this.root,e,this.comparator,!0)}},Ys=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ar=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};ar.EMPTY=null,ar.RED=!0,ar.BLACK=!1;ar.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,n,r,i,o){return this}insert(e,n,r){return new ar(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Me=class t{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new tf(this.data.getIterator())}getIteratorFrom(e){return new tf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},tf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Bs(t){return t.hasNext()?t.getNext():void 0}var on=class t{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new t([])}unionWith(e){let n=new Me(Ze.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ea(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var nf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function HS(){return typeof atob<"u"}var pt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nf("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};pt.EMPTY_BYTE_STRING=new pt("");var GU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(t){if(K(!!t),typeof t=="string"){let e=0,n=GU.exec(t);if(K(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ti(t){return typeof t=="string"?pt.fromBase64String(t):pt.fromUint8Array(t)}function Wf(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function z_(t){let e=t.mapValue.fields.__previous_value__;return Wf(e)?z_(e):e}function vc(t){let e=Lr(t.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}var tw=class{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},bi=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var _i={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Hh={nullValue:"NULL_VALUE"};function wo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wf(t)?4:GS(t)?9007199254740991:10:z()}function lr(t,e){if(t===e)return!0;let n=wo(t);if(n!==wo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return vc(t).isEqual(vc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Lr(i.timestampValue),a=Lr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Ti(i.bytesValue).isEqual(Ti(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ge(i.geoPointValue.latitude)===Ge(o.geoPointValue.latitude)&&Ge(i.geoPointValue.longitude)===Ge(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ge(i.integerValue)===Ge(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ge(i.doubleValue),a=Ge(o.doubleValue);return s===a?mc(s)===mc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ea(t.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(OA(s)!==OA(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!lr(s[u],a[u])))return!1;return!0}(t,e);default:return z()}}function wc(t,e){return(t.values||[]).find(n=>lr(n,e))!==void 0}function Ci(t,e){if(t===e)return 0;let n=wo(t),r=wo(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ge(o.integerValue||o.doubleValue),u=Ge(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return FA(t.timestampValue,e.timestampValue);case 4:return FA(vc(t),vc(e));case 5:return re(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Ti(o),u=Ti(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let d=re(a[l],u[l]);if(d!==0)return d}return re(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(Ge(o.latitude),Ge(s.latitude));return a!==0?a:re(Ge(o.longitude),Ge(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],u=s.values||[];for(let l=0;l<a.length&&l<u.length;++l){let d=Ci(a[l],u[l]);if(d)return d}return re(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===_i.mapValue&&s===_i.mapValue)return 0;if(o===_i.mapValue)return 1;if(s===_i.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},d=Object.keys(l);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){let g=re(u[f],d[f]);if(g!==0)return g;let y=Ci(a[u[f]],l[d[f]]);if(y!==0)return y}return re(u.length,d.length)}(t.mapValue,e.mapValue);default:throw z()}}function FA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);let n=Lr(t),r=Lr(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function na(t){return nw(t)}function nw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Lr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ti(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return U.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=nw(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${nw(n.fields[s])}`;return i+"}"}(t.mapValue):z()}function _o(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rw(t){return!!t&&"integerValue"in t}function _c(t){return!!t&&"arrayValue"in t}function LA(t){return!!t&&"nullValue"in t}function VA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gh(t){return!!t&&"mapValue"in t}function lc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Mo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=lc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function GS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function WU(t){return"nullValue"in t?Hh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?_o(bi.empty(),U.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:z()}function KU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?_o(bi.empty(),U.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?_i:z()}function jA(t,e){let n=Ci(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function UA(t,e){let n=Ci(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var xt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lc(n)}setAll(e){let n=Ze.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=lc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Gh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Mo(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(lc(this.value))}};function WS(t){let e=[];return Mo(t.fields,(n,r)=>{let i=new Ze([n]);if(Gh(r)){let o=WS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new on(e)}var at=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,J.min(),J.min(),J.min(),xt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,J.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,J.min(),J.min(),xt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,J.min(),J.min(),xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var dr=class{constructor(e,n){this.position=e,this.inclusive=n}};function BA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=U.comparator(U.fromName(s.referenceValue),n.key):r=Ci(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $A(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!lr(t.position[n],e.position[n]))return!1;return!0}var Io=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function QU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var rf=class{},he=class t extends rf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new sw(e,n,r):n==="array-contains"?new cw(e,r):n==="in"?new of(e,r):n==="not-in"?new lw(e,r):n==="array-contains-any"?new dw(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new aw(e,r):new uw(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ci(n,this.value)):n!==null&&wo(this.value)===wo(n)&&this.matchesComparison(Ci(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class t extends rf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return ra(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ra(t){return t.op==="and"}function iw(t){return t.op==="or"}function H_(t){return KS(t)&&ra(t)}function KS(t){for(let e of t.filters)if(e instanceof Te)return!1;return!0}function ow(t){if(t instanceof he)return t.field.canonicalString()+t.op.toString()+na(t.value);if(H_(t))return t.filters.map(e=>ow(e)).join(",");{let e=t.filters.map(n=>ow(n)).join(",");return`${t.op}(${e})`}}function QS(t,e){return t instanceof he?function(r,i){return i instanceof he&&r.op===i.op&&r.field.isEqual(i.field)&&lr(r.value,i.value)}(t,e):t instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&QS(s,i.filters[a]),!0):!1}(t,e):void z()}function YS(t,e){let n=t.filters.concat(e);return Te.create(n,t.op)}function ZS(t){return t instanceof he?function(n){return`${n.field.canonicalString()} ${n.op} ${na(n.value)}`}(t):t instanceof Te?function(n){return n.op.toString()+" {"+n.getFilters().map(ZS).join(" ,")+"}"}(t):"Filter"}var sw=class extends he{constructor(e,n,r){super(e,n,r),this.key=U.fromName(r.referenceValue)}matches(e){let n=U.comparator(e.key,this.key);return this.matchesComparison(n)}},aw=class extends he{constructor(e,n){super(e,"in",n),this.keys=JS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},uw=class extends he{constructor(e,n){super(e,"not-in",n),this.keys=JS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function JS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>U.fromName(r.referenceValue))}var cw=class extends he{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return _c(n)&&wc(n.arrayValue,this.value)}},of=class extends he{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&wc(this.value.arrayValue,n)}},lw=class extends he{constructor(e,n){super(e,"not-in",n)}matches(e){if(wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!wc(this.value.arrayValue,n)}},dw=class extends he{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!_c(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wc(this.value.arrayValue,r))}};var hw=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function fw(t,e=null,n=[],r=[],i=null,o=null,s=null){return new hw(t,e,n,r,i,o,s)}function Eo(t){let e=B(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ow(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Lc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>na(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>na(r)).join(",")),e.ue=n}return e.ue}function Vc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$A(t.startAt,e.startAt)&&$A(t.endAt,e.endAt)}function sf(t){return U.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function af(t,e){return t.filters.filter(n=>n instanceof he&&n.field.isEqual(e))}function qA(t,e,n){let r=Hh,i=!0;for(let o of af(t,e)){let s=Hh,a=!0;switch(o.op){case"<":case"<=":s=WU(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Hh}jA({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];jA({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function zA(t,e,n){let r=_i,i=!0;for(let o of af(t,e)){let s=_i,a=!0;switch(o.op){case">=":case">":s=KU(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=_i}UA({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];UA({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var jn=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function XS(t,e,n,r,i,o,s,a){return new jn(t,e,n,r,i,o,s,a)}function va(t){return new jn(t)}function HA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function G_(t){return t.collectionGroup!==null}function Js(t){let e=B(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Me(Ze.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Io(o,r))}),n.has(Ze.keyField().canonicalString())||e.ce.push(new Io(Ze.keyField(),r))}return e.ce}function Bt(t){let e=B(t);return e.le||(e.le=YU(e,Js(t))),e.le}function YU(t,e){if(t.limitType==="F")return fw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Io(i.field,o)});let n=t.endAt?new dr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new dr(t.startAt.position,t.startAt.inclusive):null;return fw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function pw(t,e){let n=t.filters.concat([e]);return new jn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function uf(t,e,n){return new jn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function jc(t,e){return Vc(Bt(t),Bt(e))&&t.limitType===e.limitType}function ex(t){return`${Eo(Bt(t))}|lt:${t.limitType}`}function Gs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ZS(i)).join(", ")}]`),Lc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>na(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>na(i)).join(",")),`Target(${r})`}(Bt(t))}; limitType=${t.limitType})`}function Uc(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):U.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Js(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=BA(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Js(r),i)||r.endAt&&!function(s,a,u){let l=BA(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Js(r),i))}(t,e)}function tx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nx(t){return(e,n)=>{let r=!1;for(let i of Js(t)){let o=ZU(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function ZU(t,e,n){let r=t.field.isKeyField()?U.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ci(u,l):z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var hr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mo(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return zS(this.inner)}size(){return this.innerSize}};var JU=new Le(U.comparator);function Yt(){return JU}var rx=new Le(U.comparator);function uc(...t){let e=rx;for(let n of t)e=e.insert(n.key,n);return e}function ix(t){let e=rx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function sr(){return dc()}function ox(){return dc()}function dc(){return new hr(t=>t.toString(),(t,e)=>t.isEqual(e))}var XU=new Le(U.comparator),eB=new Me(U.comparator);function ie(...t){let e=eB;for(let n of t)e=e.add(n);return e}var tB=new Me(re);function W_(){return tB}function sx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mc(e)?"-0":e}}function ax(t){return{integerValue:""+t}}function ux(t,e){return VS(e)?ax(e):sx(t,e)}var ia=class{constructor(){this._=void 0}};function nB(t,e,n){return t instanceof Ai?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Wf(o)&&(o=z_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Vr?lx(t,e):t instanceof jr?dx(t,e):function(i,o){let s=cx(i,o),a=GA(s)+GA(i.Pe);return rw(s)&&rw(i.Pe)?ax(a):sx(i.serializer,a)}(t,e)}function rB(t,e,n){return t instanceof Vr?lx(t,e):t instanceof jr?dx(t,e):n}function cx(t,e){return t instanceof Si?function(r){return rw(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ai=class extends ia{},Vr=class extends ia{constructor(e){super(),this.elements=e}};function lx(t,e){let n=hx(e);for(let r of t.elements)n.some(i=>lr(i,r))||n.push(r);return{arrayValue:{values:n}}}var jr=class extends ia{constructor(e){super(),this.elements=e}};function dx(t,e){let n=hx(e);for(let r of t.elements)n=n.filter(i=>!lr(i,r));return{arrayValue:{values:n}}}var Si=class extends ia{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function GA(t){return Ge(t.integerValue||t.doubleValue)}function hx(t){return _c(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Do=class{constructor(e,n){this.field=e,this.transform=n}};function iB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Vr&&i instanceof Vr||r instanceof jr&&i instanceof jr?ea(r.elements,i.elements,lr):r instanceof Si&&i instanceof Si?lr(r.Pe,i.Pe):r instanceof Ai&&i instanceof Ai}(t.transform,e.transform)}var gw=class{constructor(e,n){this.version=e,this.transformResults=n}},We=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Wh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var oa=class{};function fx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mi(t.key,We.none()):new xi(t.key,t.data,We.none());{let n=t.data,r=xt.empty(),i=new Me(Ze.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Un(t.key,r,new on(i.toArray()),We.none())}}function oB(t,e,n){t instanceof xi?function(i,o,s){let a=i.value.clone(),u=KA(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Un?function(i,o,s){if(!Wh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=KA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(px(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function hc(t,e,n,r){return t instanceof xi?function(o,s,a,u){if(!Wh(o.precondition,s))return a;let l=o.value.clone(),d=QA(o.fieldTransforms,u,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Un?function(o,s,a,u){if(!Wh(o.precondition,s))return a;let l=QA(o.fieldTransforms,u,s),d=s.data;return d.setAll(px(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,s,a){return Wh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function sB(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=cx(r.transform,i||null);o!=null&&(n===null&&(n=xt.empty()),n.set(r.field,o))}return n||null}function WA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ea(r,i,(o,s)=>iB(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var xi=class extends oa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Un=class extends oa{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function px(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function KA(t,e,n){let r=new Map;K(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,rB(s,a,n[i]))}return r}function QA(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,nB(o,s,e))}return r}var Mi=class extends oa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ic=class extends oa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ec=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&oB(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=hc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=hc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=ox();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=fx(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&ea(this.mutations,e.mutations,(n,r)=>WA(n,r))&&ea(this.baseMutations,e.baseMutations,(n,r)=>WA(n,r))}},mw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){K(e.mutations.length===r.length);let i=function(){return XU}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Dc=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var yw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var rt,ge;function gx(t){switch(t){default:return z();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function mx(t){if(t===void 0)return Ye("GRPC error has no .code"),R.UNKNOWN;switch(t){case rt.OK:return R.OK;case rt.CANCELLED:return R.CANCELLED;case rt.UNKNOWN:return R.UNKNOWN;case rt.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case rt.INTERNAL:return R.INTERNAL;case rt.UNAVAILABLE:return R.UNAVAILABLE;case rt.UNAUTHENTICATED:return R.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case rt.NOT_FOUND:return R.NOT_FOUND;case rt.ALREADY_EXISTS:return R.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return R.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case rt.ABORTED:return R.ABORTED;case rt.OUT_OF_RANGE:return R.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return R.UNIMPLEMENTED;case rt.DATA_LOSS:return R.DATA_LOSS;default:return z()}}(ge=rt||(rt={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var YA=null;function yx(){return new TextEncoder}var aB=new gi([4294967295,4294967295],0);function ZA(t){let e=yx().encode(t),n=new Nv;return n.update(e),new Uint8Array(n.digest())}function JA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new gi([n,r],0),new gi([i,o],0)]}var vw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yo(`Invalid padding: ${n}`);if(r<0)throw new yo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=gi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(gi.fromNumber(r)));return i.compare(aB)===1&&(i=new gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=ZA(e),[r,i]=JA(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let n=ZA(e),[r,i]=JA(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},yo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Tc=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,bc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(J.min(),i,new Le(re),Yt(),ie())}},bc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ie(),ie(),ie())}};var Xs=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},cf=class{constructor(e,n){this.targetId=e,this.me=n}},lf=class{constructor(e,n,r=pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},df=class{constructor(){this.fe=0,this.ge=eS(),this.pe=pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z()}}),new bc(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=eS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},ww=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yt(),this.qe=XA(),this.Qe=new Le(re)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let o=i.target;if(sf(o))if(r===0){let s=new U(o.path);this.Ue(n,s,at.newNoDocument(s,J.min()))}else K(r===1);else{let s=this.Ye(n);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}YA?.et(function(d,f,g,y,b){var S,C,P,$,F,q;let ee={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},Q=f.unchangedNames;return Q&&(ee.bloomFilter={applied:b===0,hashCount:(S=Q?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:($=(P=(C=Q?.bits)===null||C===void 0?void 0:C.bitmap)===null||P===void 0?void 0:P.length)!==null&&$!==void 0?$:0,padding:(q=(F=Q?.bits)===null||F===void 0?void 0:F.padding)!==null&&q!==void 0?q:0,mightContain:I=>{var v;return(v=y?.mightContain(I))!==null&&v!==void 0&&v}}),ee}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Ti(r).toUint8Array()}catch(u){if(u instanceof nf)return wn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new vw(s,i,o)}catch(u){return wn(u instanceof yo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&sf(a.target)){let u=new U(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,at.newNoDocument(u,e))}o.be&&(n.set(s,o.Ce()),o.ve())}});let r=ie();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Tc(e,n,this.Qe,this.ke,r);return this.ke=Yt(),this.qe=XA(),this.Qe=new Le(re),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new df,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Me(re),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new df),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function XA(){return new Le(U.comparator)}function eS(){return new Le(U.comparator)}var uB={asc:"ASCENDING",desc:"DESCENDING"},cB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lB={and:"AND",or:"OR"},_w=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Iw(t,e){return t.useProto3Json||Lc(e)?e:{value:e}}function sa(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dB(t,e){return sa(t,e.toTimestamp())}function Je(t){return K(!!t),J.fromTimestamp(function(n){let r=Lr(n);return new qe(r.seconds,r.nanos)}(t))}function K_(t,e){return Ew(t,e).canonicalString()}function Ew(t,e){let n=function(i){return new me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function wx(t){let e=me.fromString(t);return K(xx(e)),e}function Cc(t,e){return K_(t.databaseId,e.path)}function ur(t,e){let n=wx(e);if(n.get(1)!==t.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new U(Ex(n))}function _x(t,e){return K_(t.databaseId,e)}function Ix(t){let e=wx(t);return e.length===4?me.emptyPath():Ex(e)}function Dw(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ex(t){return K(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function tS(t,e,n){return{name:Cc(t,e),fields:n.value.mapValue.fields}}function Dx(t,e,n){let r=ur(t,e.name),i=Je(e.updateTime),o=e.createTime?Je(e.createTime):J.min(),s=new xt({mapValue:{fields:e.fields}}),a=at.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function hB(t,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=ur(r,i.found.name),s=Je(i.found.updateTime),a=i.found.createTime?Je(i.found.createTime):J.min(),u=new xt({mapValue:{fields:i.found.fields}});return at.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=ur(r,i.missing),s=Je(i.readTime);return at.newNoDocument(o,s)}(t,e):z()}function fB(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(K(d===void 0||typeof d=="string"),pt.fromBase64String(d||"")):(K(d===void 0||d instanceof Buffer||d instanceof Uint8Array),pt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let d=l.code===void 0?R.UNKNOWN:mx(l.code);return new k(d,l.message||"")}(s);n=new lf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ur(t,r.document.name),o=Je(r.document.updateTime),s=r.document.createTime?Je(r.document.createTime):J.min(),a=new xt({mapValue:{fields:r.document.fields}}),u=at.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new Xs(l,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ur(t,r.document),o=r.readTime?Je(r.readTime):J.min(),s=at.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Xs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ur(t,r.document),o=r.removedTargetIds||[];n=new Xs([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new yw(i,o),a=r.targetId;n=new cf(a,s)}}return n}function Ac(t,e){let n;if(e instanceof xi)n={update:tS(t,e.key,e.value)};else if(e instanceof Mi)n={delete:Cc(t,e.key)};else if(e instanceof Un)n={update:tS(t,e.key,e.data),updateMask:wB(e.fieldMask)};else{if(!(e instanceof Ic))return z();n={verify:Cc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ai)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof jr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Si)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:dB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(t,e.precondition)),n}function Tw(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?We.updateTime(Je(o.updateTime)):o.exists!==void 0?We.exists(o.exists):We.none()}(e.currentDocument):We.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),u=new Ai;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];u=new Vr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];u=new jr(d)}else"increment"in a?u=new Si(s,a.increment):z();let l=Ze.fromServerFormat(a.fieldPath);return new Do(l,u)}(t,i)):[];if(e.update){e.update.name;let i=ur(t,e.update.name),o=new xt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new on(l.map(d=>Ze.fromServerFormat(d)))}(e.updateMask);return new Un(i,o,s,n,r)}return new xi(i,o,n,r)}if(e.delete){let i=ur(t,e.delete);return new Mi(i,n)}if(e.verify){let i=ur(t,e.verify);return new Ic(i,n)}return z()}function pB(t,e){return t&&t.length>0?(K(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Je(i.updateTime):Je(o);return s.isEqual(J.min())&&(s=Je(o)),new gw(s,i.transformResults||[])}(n,e))):[]}function Tx(t,e){return{documents:[_x(t,e.path)]}}function bx(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_x(t,i);let o=function(l){if(l.length!==0)return Sx(Te.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Ws(g.field),direction:mB(g.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=Iw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function Cx(t){let e=Ix(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){K(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(f){let g=Ax(f);return g instanceof Te&&H_(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(g=>function(b){return new Io(Ks(b.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Lc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(f){let g=!!f.before,y=f.values||[];return new dr(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new dr(y,g)}(n.endAt)),XS(e,i,s,o,a,"F",u,l)}function gB(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ax(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ks(n.unaryFilter.field);return he.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ks(n.unaryFilter.field);return he.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ks(n.unaryFilter.field);return he.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ks(n.unaryFilter.field);return he.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(t):t.fieldFilter!==void 0?function(n){return he.create(Ks(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Te.create(n.compositeFilter.filters.map(r=>Ax(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(n.compositeFilter.op))}(t):z()}function mB(t){return uB[t]}function yB(t){return cB[t]}function vB(t){return lB[t]}function Ws(t){return{fieldPath:t.canonicalString()}}function Ks(t){return Ze.fromServerFormat(t.fieldPath)}function Sx(t){return t instanceof he?function(n){if(n.op==="=="){if(VA(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NAN"}};if(LA(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(VA(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NOT_NAN"}};if(LA(n.value))return{unaryFilter:{field:Ws(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ws(n.field),op:yB(n.op),value:n.value}}}(t):t instanceof Te?function(n){let r=n.getFilters().map(i=>Sx(i));return r.length===1?r[0]:{compositeFilter:{op:vB(n.op),filters:r}}}(t):z()}function wB(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var aa=class t{constructor(e,n,r,i,o=J.min(),s=J.min(),a=pt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var hf=class{constructor(e){this.ct=e}};function _B(t,e){let n;if(e.document)n=Dx(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=U.fromSegments(e.noDocument.path),i=bo(e.noDocument.readTime);n=at.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=U.fromSegments(e.unknownDocument.path),i=bo(e.unknownDocument.version);n=at.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new qe(i[0],i[1]);return J.fromTimestamp(o)}(e.readTime)),n}function nS(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ff(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Cc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:sa(o,s.version.toTimestamp()),createTime:sa(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:To(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:n.path.toArray(),version:To(e.version)}}return r}function ff(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function To(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bo(t){let e=new qe(t.seconds,t.nanoseconds);return J.fromTimestamp(e)}function po(t,e){let n=(e.baseMutations||[]).map(o=>Tw(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Tw(t.ct,o)),i=qe.fromMillis(e.localWriteTimeMs);return new Ec(e.batchId,i,n,r)}function cc(t){let e=bo(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?bo(t.lastLimboFreeSnapshotVersion):J.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return K(o.documents.length===1),Bt(va(Ix(o.documents[0])))}(t.query):function(o){return Bt(Cx(o))}(t.query),new aa(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,pt.fromBase64String(t.resumeToken))}function Mx(t,e){let n=To(e.snapshotVersion),r=To(e.lastLimboFreeSnapshotVersion),i;i=sf(e.target)?Tx(t.ct,e.target):bx(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Eo(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Q_(t){let e=Cx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uf(e,e.limit,"L"):e}function jv(t,e){return new Dc(e.largestBatchId,Tw(t.ct,e.overlayMutation))}function rS(t,e){let n=e.path.lastSegment();return[t,Ut(e.path.popLast()),n]}function iS(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:To(r.readTime),documentKey:Ut(r.documentKey.path),largestBatchId:r.largestBatchId}}var bw=class{getBundleMetadata(e,n){return oS(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:bo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return oS(e).put(function(i){return{bundleId:i.id,createTime:To(Je(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return sS(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:Q_(o.bundledQuery),readTime:bo(o.readTime)}}(r)})}saveNamedQuery(e,n){return sS(e).put(function(i){return{name:i.name,readTime:To(Je(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function oS(t){return gt(t,"bundles")}function sS(t){return gt(t,"namedQueries")}var pf=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return ic(e).get(rS(this.userId,n)).next(r=>r?jv(this.serializer,r):null)}getOverlays(e,n){let r=sr();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new Dc(n,s);i.push(this.ht(e,a))}),x.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(Ut(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(ic(e).j("collectionPathOverlayIndex",a))}),x.waitFor(o)}getOverlaysForCollection(e,n,r){let i=sr(),o=Ut(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ic(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=jv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=sr(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ic(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,d)=>{let f=jv(this.serializer,l);o.size()<i||f.largestBatchId===s?(o.set(f.getKey(),f),s=f.largestBatchId):d.done()}).next(()=>o)}ht(e,n){return ic(e).put(function(i,o,s){let[a,u,l]=rS(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Ac(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function ic(t){return gt(t,"documentOverlays")}var Or=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Ge(e.integerValue));else if("doubleValue"in e){let r=Ge(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),mc(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Lr(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Ti(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?GS(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):z()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),U.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Or.bt=new Or;function IB(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function aS(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=IB(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var Cw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let n=this.Bt(e),r=aS(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Bt(e),r=aS(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Aw=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},Sw=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},go=class{constructor(){this.Gt=new Cw,this.zt=new Aw(this.Gt),this.jt=new Sw(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var mo=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function mi(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=uS(t.arrayValue,e.arrayValue),n!==0?n:(n=uS(t.directionalValue,e.directionalValue),n!==0?n:U.comparator(t.documentKey,e.documentKey)))}function uS(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var gf=class{constructor(e){this.Yt=new Me((n,r)=>Ze.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(K(e.collectionGroup===this.collectionId),this.en)return!1;let n=Yv(e);if(n!==void 0&&!this.nn(n))return!1;let r=ho(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.rn(a,u)||!this.sn(this.Zt[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new Me(Ze.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Zs(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Zs(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Zs(r.field,r.dir==="asc"?0:1)));return new ta(ta.UNKNOWN_ID,this.collectionId,n,gc.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function Rx(t){var e,n;if(K(t instanceof he||t instanceof Te),t instanceof he){if(t instanceof of){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>he.create(t.field,"==",o)))||[];return Te.create(i,"or")}return t}let r=t.filters.map(i=>Rx(i));return Te.create(r,t.op)}function EB(t){if(t.getFilters().length===0)return[];let e=Rw(Rx(t));return K(Nx(e)),xw(e)||Mw(e)?[e]:e.getFilters()}function xw(t){return t instanceof he}function Mw(t){return t instanceof Te&&H_(t)}function Nx(t){return xw(t)||Mw(t)||function(n){if(n instanceof Te&&iw(n)){for(let r of n.getFilters())if(!xw(r)&&!Mw(r))return!1;return!0}return!1}(t)}function Rw(t){if(K(t instanceof he||t instanceof Te),t instanceof he)return t;if(t.filters.length===1)return Rw(t.filters[0]);let e=t.filters.map(r=>Rw(r)),n=Te.create(e,t.op);return n=mf(n),Nx(n)?n:(K(n instanceof Te),K(ra(n)),K(n.filters.length>1),n.filters.reduce((r,i)=>Y_(r,i)))}function Y_(t,e){let n;return K(t instanceof he||t instanceof Te),K(e instanceof he||e instanceof Te),n=t instanceof he?e instanceof he?function(i,o){return Te.create([i,o],"and")}(t,e):cS(t,e):e instanceof he?cS(e,t):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),ra(i)&&ra(o))return YS(i,o.getFilters());let s=iw(i)?i:o,a=iw(i)?o:i,u=s.filters.map(l=>Y_(l,a));return Te.create(u,"or")}(t,e),mf(n)}function cS(t,e){if(ra(e))return YS(e,t.getFilters());{let n=e.filters.map(r=>Y_(t,r));return Te.create(n,"or")}}function mf(t){if(K(t instanceof he||t instanceof Te),t instanceof he)return t;let e=t.getFilters();if(e.length===1)return mf(e[0]);if(KS(t))return t;let n=e.map(i=>mf(i)),r=[];return n.forEach(i=>{i instanceof he?r.push(i):i instanceof Te&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Te.create(r,t.op)}var Nw=class{constructor(){this._n=new Sc}addToCollectionParentIndex(e,n){return this._n.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(_n.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(_n.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},Sc=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Me(me.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Me(me.comparator)).toArray()}};var Uh=new Uint8Array(0),Pw=class{constructor(e,n){this.databaseId=n,this.an=new Sc,this.un=new hr(r=>Eo(r),(r,i)=>Vc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:Ut(i)};return lS(e).put(o)}return x.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[PS(n),""],!1,!0);return lS(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(or(s.parent))}return r})}addFieldIndex(e,n){let r=oc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=qs(e);return o.next(a=>{s.put(iS(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=oc(e),i=qs(e),o=$s(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=oc(e),r=$s(e),i=qs(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return x.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new gf(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=$s(e),i=!0,o=new Map;return x.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ie(),a=[];return x.forEach(o,(u,l)=>{O("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(q=>`${q.fieldPath}:${q.kind}`).join(",")}`}(u)} to execute ${Eo(n)}`);let d=function(F,q){let ee=Yv(q);if(ee===void 0)return null;for(let Q of af(F,ee.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(l,u),f=function(F,q){let ee=new Map;for(let Q of ho(q))for(let I of af(F,Q.fieldPath))switch(I.op){case"==":case"in":ee.set(Q.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ee.set(Q.fieldPath.canonicalString(),I.value),Array.from(ee.values())}return null}(l,u),g=function(F,q){let ee=[],Q=!0;for(let I of ho(q)){let v=I.kind===0?qA(F,I.fieldPath,F.startAt):zA(F,I.fieldPath,F.startAt);ee.push(v.value),Q&&(Q=v.inclusive)}return new dr(ee,Q)}(l,u),y=function(F,q){let ee=[],Q=!0;for(let I of ho(q)){let v=I.kind===0?zA(F,I.fieldPath,F.endAt):qA(F,I.fieldPath,F.endAt);ee.push(v.value),Q&&(Q=v.inclusive)}return new dr(ee,Q)}(l,u),b=this.hn(u,l,g),S=this.hn(u,l,y),C=this.Pn(u,l,f),P=this.In(u.indexId,d,b,g.inclusive,S,y.inclusive,C);return x.forEach(P,$=>r.G($,n.limit).next(F=>{F.forEach(q=>{let ee=U.fromSegments(q.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return x.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=EB(Te.create(e.filters,"and")).map(r=>fw(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let u=(n!=null?n.length:1)*Math.max(r.length,o.length),l=u/(n!=null?n.length:1),d=[];for(let f=0;f<u;++f){let g=n?this.Tn(n[f/l]):Uh,y=this.En(e,g,r[f%l],i),b=this.dn(e,g,o[f%l],s),S=a.map(C=>this.En(e,g,C,!0));d.push(...this.createRange(y,b,S))}return d}En(e,n,r,i){let o=new mo(e,U.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new mo(e,U.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new gf(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return x.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Me(Ze.comparator),d=!1;for(let f of u.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new go;for(let i of ho(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);Or.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new go;return Or.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new go;return Or.bt.Pt(_o(this.databaseId,n),r.Ht(function(o){let s=ho(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new go);let o=0;for(let s of ho(e)){let a=r[o++];for(let u of i)if(this.Vn(n,s.fieldPath)&&_c(a))i=this.mn(i,s,a);else{let l=u.Ht(s.kind);Or.bt.Pt(a,l)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new go;u.seed(a.Wt()),Or.bt.Pt(s,u.Ht(n.kind)),o.push(u)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof he&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=oc(e),i=qs(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(o=>{let s=[];return x.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(d,f){let g=f?new gc(f.sequenceNumber,new _n(bo(f.readTime),new U(or(f.documentKey)),f.largestBatchId)):gc.empty(),y=d.fields.map(([b,S])=>new Zs(Ze.fromServerFormat(b),S));return new ta(d.indexId,d.collectionGroup,y,g)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:re(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=oc(e),o=qs(e);return this.gn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>x.forEach(a,u=>o.put(iS(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return x.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?x.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),x.forEach(a,u=>this.pn(e,i,u).next(l=>{let d=this.yn(o,u);return l.isEqual(d)?x.resolve():this.wn(e,o,u,l,d)}))))})}Sn(e,n,r,i){return $s(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return $s(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=$s(e),o=new Me(mi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new mo(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new Me(mi),i=this.An(n,e);if(i==null)return r;let o=Yv(n);if(o!=null){let s=e.data.field(o.fieldPath);if(_c(s))for(let a of s.arrayValue.values||[])r=r.add(new mo(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new mo(n.indexId,e.key,Uh,i));return r}wn(e,n,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(u,l,d,f,g){let y=u.getIterator(),b=l.getIterator(),S=Bs(y),C=Bs(b);for(;S||C;){let P=!1,$=!1;if(S&&C){let F=d(S,C);F<0?$=!0:F>0&&(P=!0)}else S!=null?$=!0:P=!0;P?(f(C),C=Bs(b)):$?(g(S),S=Bs(y)):(S=Bs(y),C=Bs(b))}}(i,o,mi,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),x.waitFor(s)}gn(e){let n=1;return qs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>mi(s,a)).filter((s,a,u)=>!a||mi(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=mi(s,e),u=mi(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&u<0)i.push(s),i.push(s.Jt());else if(u>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Uh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Uh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Dn(e,n){return mi(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(dS)}getMinOffset(e,n){return x.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||z())).next(dS)}};function lS(t){return gt(t,"collectionParents")}function $s(t){return gt(t,"indexEntries")}function oc(t){return gt(t,"indexConfiguration")}function qs(t){return gt(t,"indexState")}function dS(t){K(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;$_(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new _n(e.readTime,e.documentKey,n)}var hS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Px(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.J({range:s},(d,f,g)=>(a++,g.delete()));o.push(u.next(()=>{K(a===1)}));let l=[];for(let d of n.mutations){let f=jS(e,d.key.path,n.batchId);o.push(i.delete(f)),l.push(d.key)}return x.waitFor(o).next(()=>l)}function yf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw z();e=t.noDocument}return JSON.stringify(e).length}vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(41943040,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);var vf=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yi(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=Qs(e),s=yi(e);return s.add({}).next(a=>{K(typeof a=="number");let u=new Ec(a,n,r,i),l=function(y,b,S){let C=S.baseMutations.map($=>Ac(y.ct,$)),P=S.mutations.map($=>Ac(y.ct,$));return{userId:b,batchId:S.batchId,localWriteTimeMs:S.localWriteTime.toMillis(),baseMutations:C,mutations:P}}(this.serializer,this.userId,u),d=[],f=new Me((g,y)=>re(g.canonicalString(),y.canonicalString()));for(let g of i){let y=jS(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(s.put(l)),d.push(o.put(y,xU))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),x.waitFor(d).next(()=>u)})}lookupMutationBatch(e,n){return yi(e).get(n).next(r=>r?(K(r.userId===this.userId),po(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?x.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return yi(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(K(a.batchId>=r),o=po(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return yi(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yi(e).U("userMutationsIndex",n).next(r=>r.map(i=>po(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=zh(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Qs(e).J({range:i},(s,a,u)=>{let[l,d,f]=s,g=or(d);if(l===this.userId&&n.path.isEqual(g))return yi(e).get(f).next(y=>{if(!y)throw z();K(y.userId===this.userId),o.push(po(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Me(re),i=[];return n.forEach(o=>{let s=zh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Qs(e).J({range:a},(l,d,f)=>{let[g,y,b]=l,S=or(y);g===this.userId&&o.path.isEqual(S)?r=r.add(b):f.done()});i.push(u)}),x.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=zh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Me(re);return Qs(e).J({range:s},(u,l,d)=>{let[f,g,y]=u,b=or(g);f===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(yi(e).get(o).next(s=>{if(s===null)throw z();K(s.userId===this.userId),r.push(po(this.serializer,s))}))}),x.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Px(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),x.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return x.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Qs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=or(o[1]);i.push(u)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,n){return kx(e,this.userId,n)}xn(e){return Ox(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function kx(t,e,n){let r=zh(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Qs(t).J({range:o,H:!0},(a,u,l)=>{let[d,f,g]=a;d===e&&f===i&&(s=!0),l.done()}).next(()=>s)}function yi(t){return gt(t,"mutations")}function Qs(t){return gt(t,"documentMutations")}function Ox(t){return gt(t,"mutationQueues")}var ua=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var kw=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let r=new ua(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>J.fromTimestamp(new qe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>zs(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return zs(e).J((s,a)=>{let u=cc(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>x.waitFor(o)).next(()=>i)}forEachTarget(e,n){return zs(e).J((r,i)=>{let o=cc(i);n(o)})}Bn(e){return fS(e).get("targetGlobalKey").next(n=>(K(n!==null),n))}kn(e,n){return fS(e).put("targetGlobalKey",n)}qn(e,n){return zs(e).put(Mx(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Eo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return zs(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=cc(a);Vc(n,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=vi(e);return n.forEach(s=>{let a=Ut(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),x.waitFor(i)}removeMatchingKeys(e,n,r){let i=vi(e);return x.forEach(n,o=>{let s=Ut(o.path);return x.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=vi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=vi(e),o=ie();return i.J({range:r,H:!0},(s,a,u)=>{let l=or(s[1]),d=new U(l);o=o.add(d)}).next(()=>o)}containsKey(e,n){let r=Ut(n.path),i=IDBKeyRange.bound([r],[PS(r)],!1,!0),o=0;return vi(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,n){return zs(e).get(n).next(r=>r?cc(r):null)}};function zs(t){return gt(t,"targets")}function fS(t){return gt(t,"targetGlobal")}function vi(t){return gt(t,"targetDocuments")}function pS([t,e],[n,r]){let i=re(t,n);return i===0?re(e,r):i}var Ow=class{constructor(e){this.Kn=e,this.buffer=new Me(pS),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();pS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Fw=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Pi(n)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Ni(n)}yield this.zn(3e5)}))}},Lw=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return x.resolve(rn.oe);let r=new Ow(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(hS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hS):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,u,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Hs()<=qn.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-d}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function DB(t,e){return new Lw(t,e)}var Vw=class{constructor(e,n){this.db=e,this.garbageCollector=DB(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Bh(e,r)}removeReference(e,n,r){return Bh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Bh(e,n)}er(e,n){return function(i,o){let s=!1;return Ox(i).Y(a=>kx(i,a,o).next(u=>(u&&(s=!0),x.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let u=this.er(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,J.min()),vi(e).delete(function(f){return[0,Ut(f.path)]}(s))))});i.push(u)}}).next(()=>x.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Bh(e,n)}Xn(e,n){let r=vi(e),i,o=rn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==rn.oe&&n(new U(or(i)),o),o=l,i=u):o=rn.oe}).next(()=>{o!==rn.oe&&n(new U(or(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Bh(t,e){return vi(t).put(function(r,i){return{targetId:0,path:Ut(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var wf=class{constructor(){this.changes=new hr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var jw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return lo(e).put(r)}removeEntry(e,n,r){return lo(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ff(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=at.newInvalidDocument(n);return lo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sc(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:at.newInvalidDocument(n)};return lo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sc(n))},(i,o)=>{r={document:this.nr(n,o),size:yf(o)}}).next(()=>r)}getEntries(e,n){let r=Yt();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=Yt(),i=new Le(U.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,yf(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return x.resolve();let i=new Me(yS);n.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(sc(i.first()),sc(i.last())),s=i.getIterator(),a=s.getNext();return lo(e).J({index:"documentKeyIndex",range:o},(u,l,d)=>{let f=U.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&yS(a,f)<0;)r(a,null),a=s.getNext();a&&a.isEqual(f)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?d.$(sc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),ff(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lo(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=Yt();for(let f of l){let g=this.nr(U.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Uc(n,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,n,r,i){let o=Yt(),s=mS(n,r),a=mS(n,_n.max());return lo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,d)=>{let f=this.nr(U.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(f.key,f),o.size===i&&d.done()}).next(()=>o)}newChangeBuffer(e){return new Uw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return gS(e).get("remoteDocumentGlobalKey").next(n=>(K(!!n),n))}tr(e,n){return gS(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=_B(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(J.min())))return r}return at.newInvalidDocument(e)}};function Fx(t){return new jw(t)}var Uw=class extends wf{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new hr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Me((o,s)=>re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=nS(this.ar.serializer,s);i=i.add(o.path.popLast());let l=yf(u);r+=l-a.size,n.push(this.ar.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=nS(this.ar.serializer,s.convertToNoDocument(J.min()));n.push(this.ar.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),x.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function gS(t){return gt(t,"remoteDocumentGlobal")}function lo(t){return gt(t,"remoteDocumentsV14")}function sc(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function mS(t,e){let n=e.documentKey.path.toArray();return[t,ff(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function yS(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=re(n[o],r[o]),i)return i;return i=re(n.length,r.length),i||(i=re(n[n.length-2],r[r.length-2]),i||re(n[n.length-1],r[r.length-1]))}var Bw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var _f=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&hc(r.mutation,i,on.empty(),qe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){let i=sr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=uc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=sr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Yt(),s=dc(),a=function(){return dc()}();return n.forEach((u,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Un)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),hc(d.mutation,l,d.mutation.getFieldMask(),qe.now())):s.set(l.key,on.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,d)=>s.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new Bw(d,(f=s.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=dc(),i=new Le((s,a)=>s-a),o=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let d=r.get(u)||on.empty();d=a.applyToLocalView(l,d),r.set(u,d);let f=(i.get(a.batchId)||ie()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,d=u.value,f=ox();d.forEach(g=>{if(!o.has(g)){let y=fx(n.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return U.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):G_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(sr()),a=-1,u=o;return s.next(l=>x.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?x.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ie())).next(d=>({batchId:a,changes:ix(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new U(n)).next(r=>{let i=uc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=uc();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=function(f,g){return new jn(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,at.newInvalidDocument(d)))});let a=uc();return s.forEach((u,l)=>{let d=o.get(u);d!==void 0&&hc(d.mutation,l,on.empty(),qe.now()),Uc(n,l)&&(a=a.insert(u,l))}),a})}};var $w=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return x.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Je(i.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Q_(i.bundledQuery),readTime:Je(i.readTime)}}(n)),x.resolve()}};var qw=class{constructor(){this.overlays=new Le(U.comparator),this.hr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=sr();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=sr(),o=n.length+1,s=new U(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Le((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=sr(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=sr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return x.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Dc(n,r));let o=this.hr.get(n);o===void 0&&(o=ie(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var xc=class{constructor(){this.Pr=new Me(it.Ir),this.Tr=new Me(it.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new it(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new it(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new U(new me([])),r=new it(n,e),i=new it(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new U(new me([])),r=new it(n,e),i=new it(n,e+1),o=ie();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new it(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},it=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return U.comparator(e.key,n.key)||re(e.pr,n.pr)}static Er(e,n){return re(e.pr,n.pr)||U.comparator(e.key,n.key)}};var zw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Me(it.Ir)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ec(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new it(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new it(n,0),i=new it(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Me(re);return n.forEach(i=>{let o=new it(i,0),s=new it(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),x.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;U.isDocumentKey(o)||(o=o.child(""));let s=new it(new U(o),0),a=new Me(re);return this.wr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},s),x.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){K(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return x.forEach(n.mutations,i=>{let o=new it(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new it(n,0),i=this.wr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Hw=class{constructor(e){this.vr=e,this.docs=function(){return new Le(U.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=Yt();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():at.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Yt(),s=n.path,a=new U(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:d}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||$_(OS(d),r)<=0||(i.has(d.key)||Uc(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){z()}Fr(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Gw(this)}getSize(e){return x.resolve(this.size)}},Gw=class extends wf{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Ww=class{constructor(e){this.persistence=e,this.Mr=new hr(n=>Eo(n),Vc),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Or=0,this.Nr=new xc,this.targetCount=0,this.Lr=ua.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),x.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new ua(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.qn(n),x.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Nr.containsKey(n))}};var If=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new rn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Ww(this),this.indexManager=new Nw,this.remoteDocumentCache=function(i){return new Hw(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new hf(n),this.$r=new $w(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new zw(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){O("MemoryPersistence","Starting transaction:",e);let i=new Kw(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return x.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},Kw=class extends Xh{constructor(e){super(),this.currentSequenceNumber=e}},Ef=class t{constructor(e){this.persistence=e,this.zr=new xc,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw z()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),x.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Jr,r=>{let i=U.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,J.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return x.or([()=>x.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Qw=class{constructor(e){this.serializer=e}O(e,n,r,i){let o=new ef("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kA,{unique:!0}),u.createObjectStore("documentMutations")}(e),vS(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=x.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),vS(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(d=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kA,{unique:!0});let f=l.store("mutations"),g=d.map(y=>f.put(y));return x.waitFor(g)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:BU});l.createIndex("collectionPathOverlayIndex",$U,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",qU,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:MU});l.createIndex("documentKeyIndex",RU),l.createIndex("collectionGroupIndex",NU)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:LU}).createIndex("sequenceNumberIndex",VU,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:jU}).createIndex("documentKeyIndex",UU,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),s}ei(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=yf(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>x.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>x.forEach(a,u=>{K(u.userId===o.userId);let l=po(this.serializer,u);return Px(e,o.userId,l).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new me(s),l=function(f){return[0,Ut(f)]}(u);o.push(n.get(l).next(d=>d?x.resolve():(f=>n.put({targetId:0,path:Ut(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>x.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:FU});let r=n.store("collectionParents"),i=new Sc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Ut(u)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new me(s);return o(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,u],l)=>{let d=or(a);return o(d.popLast())}))}ri(e){let n=e.store("targets");return n.J((r,i)=>{let o=cc(i),s=Mx(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=n.store("remoteDocumentsV14"),u=function(f){return f.document?new U(me.fromString(f.document.name).popFirst(5)):f.noDocument?U.fromSegments(f.noDocument.path):f.unknownDocument?U.fromSegments(f.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>x.waitFor(i))}si(e,n){let r=n.store("mutations"),i=Fx(this.serializer),o=new If(Ef.Hr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let d=(l=a.get(u.userId))!==null&&l!==void 0?l:ie();po(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),x.forEach(a,(u,l)=>{let d=new ot(l),f=pf.lt(this.serializer,d),g=o.getIndexManager(d),y=vf.lt(d,this.serializer,g,o.referenceDelegate);return new _f(i,y,f,g).recalculateAndSaveOverlaysForDocumentKeys(new yc(n,rn.oe),u).next()})})}};function vS(t){t.createObjectStore("targetDocuments",{keyPath:kU}).createIndex("documentTargetsIndex",OU,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PU,{unique:!0}),t.createObjectStore("targetGlobal")}var Uv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Yw=class t{constructor(e,n,r,i,o,s,a,u,l,d,f=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=d,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=g=>Promise.resolve(),!t.D())throw new k(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vw(this,i),this.Ti=n+"main",this.serializer=new hf(u),this.Ei=new Di(this.Ti,this.ui,new Qw(this.serializer)),this.Qr=new kw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Fx(this.serializer),this.$r=new bw,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&Ye("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,Uv);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new rn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>N(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>N(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$h(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Pi(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return ac(e).get("owner").next(n=>x.resolve(this.Si(n)))}bi(e){return $h(e).delete(this.clientId)}Di(){return N(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=gt(n,"clientMetadata");return r.U().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return x.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?x.resolve(!0):ac(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,Uv);return!1}}return!(!this.networkEnabled||!this.inForeground)||$h(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&O("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return N(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new yc(e,rn.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>$h(e).U().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return vf.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Pw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return pf.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){O("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(u){return u===16?HU:u===15?qS:u===14?$S:u===13?BS:u===12?zU:u===11?US:void z()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new yc(a,this.kr?this.kr.next():rn.oe),n==="readwrite-primary"?this.gi(s).next(u=>!!u||this.pi(s)).next(u=>{if(!u)throw Ye(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new k(R.FAILED_PRECONDITION,FS);return r(s)}).next(u=>this.wi(s).next(()=>u)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return ac(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new k(R.FAILED_PRECONDITION,Uv)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ac(e).put("owner",n)}static D(){return Di.D()}yi(e){let n=ac(e);return n.get("owner").next(r=>this.Si(r)?(O("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):x.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Ye(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Op()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ye("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Ye("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function ac(t){return gt(t,"owner")}function $h(t){return gt(t,"clientMetadata")}function Z_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Zw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=ie(),i=ie();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Jw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Df=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Op()?8:LS(Ga())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Jw;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Hs()<=qn.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",Gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),x.resolve()):(Hs()<=qn.DEBUG&&O("QueryEngine","Query:",Gs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Hs()<=qn.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",Gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bt(n))):x.resolve())}ji(e,n){if(HA(n))return x.resolve(null);let r=Bt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=uf(n,null,"F"),r=Bt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ie(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Zi(n,a);return this.Xi(n,l,s,u.readTime)?this.ji(e,uf(n,null,"F")):this.es(e,l,n,u)}))})))}Hi(e,n,r,i){return HA(n)||i.isEqual(J.min())?x.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?x.resolve(null):(Hs()<=qn.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gs(n)),this.es(e,s,n,kS(i,-1)).next(a=>a))})}Zi(e,n){let r=new Me(nx(e));return n.forEach((i,o)=>{Uc(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return Hs()<=qn.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Gs(n)),this.zi.getDocumentsMatchingQuery(e,n,_n.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Xw=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Le(re),this.rs=new hr(o=>Eo(o),Vc),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _f(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function Lx(t,e,n,r){return new Xw(t,e,n,r)}function Vx(t,e){return N(this,null,function*(){let n=B(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ie();for(let l of i){s.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})}function TB(t,e){let n=B(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,d){let f=l.batch,g=f.keys(),y=x.resolve();return g.forEach(b=>{y=y.next(()=>d.getEntry(u,b)).next(S=>{let C=l.docVersions.get(b);K(C!==null),S.version.compareTo(C)<0&&(f.applyToRemoteDocument(S,l),S.isValidDocument()&&(S.setReadTime(l.commitVersion),d.addEntry(S)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function jx(t){let e=B(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function bB(t,e){let n=B(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(n.Qr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(o,d.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(pt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(S,C,P){return S.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,y,d)&&a.push(n.Qr.updateTargetData(o,y))});let u=Yt(),l=ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(Ux(o,s,e.documentUpdates).next(d=>{u=d.cs,l=d.ls})),!r.isEqual(J.min())){let d=n.Qr.getLastRemoteSnapshotVersion(o).next(f=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.ns=i,o))}function Ux(t,e,n){let r=ie(),i=ie();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Yt();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:s,ls:i}})}function CB(t,e){let n=B(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ca(t,e){let n=B(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new aa(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function la(t,e,n){return N(this,null,function*(){let r=B(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Pi(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Tf(t,e,n){let r=B(t),i=J.min(),o=ie();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,d){let f=B(u),g=f.rs.get(d);return g!==void 0?x.resolve(f.ns.get(g)):f.Qr.getTargetData(l,d)}(r,s,Bt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:J.min(),n?o:ie())).next(a=>(qx(r,tx(e),a),{documents:a,hs:o})))}function Bx(t,e){let n=B(t),r=B(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function $x(t,e){let n=B(t),r=n.ss.get(e)||J.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,kS(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(qx(n,e,i),i))}function qx(t,e,n){let r=t.ss.get(e)||J.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function AB(t,e,n,r){return N(this,null,function*(){let i=B(t),o=ie(),s=Yt();for(let l of n){let d=e.Ps(l.metadata.name);l.document&&(o=o.add(d));let f=e.Is(l);f.setReadTime(e.Ts(l.metadata.readTime)),s=s.insert(d,f)}let a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield ca(i,function(d){return Bt(va(me.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>Ux(l,a,s).next(d=>(a.apply(l),d)).next(d=>i.Qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Qr.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.cs,d.ls)).next(()=>d.cs)))})}function SB(r,i){return N(this,arguments,function*(t,e,n=ie()){let o=yield ca(t,Bt(Q_(e.bundledQuery))),s=B(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Je(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.$r.saveNamedQuery(a,e);let l=o.withResumeToken(pt.EMPTY_BYTE_STRING,u);return s.ns=s.ns.insert(l.targetId,l),s.Qr.updateTargetData(a,l).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function wS(t,e){return`firestore_clients_${t}_${e}`}function _S(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Bv(t,e){return`firestore_targets_${t}_${e}`}var bf=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Ye("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},fc=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new t(e,r.state,i):(Ye("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Cf=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=W_();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=VS(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ye("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},e_=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ye("SharedClientState",`Failed to parse online state: ${e}`),null)}},Mc=class{constructor(){this.activeTargetIds=W_()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},pc=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Le(re),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=wS(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Mc),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(wS(this.persistenceKey,r));if(i){let o=Cf.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Bv(this.persistenceKey,e));if(r){let i=fc.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Bv(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return O("SharedClientState","READ",e,n),n}setItem(e,n){O("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(O("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Ye("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=rn.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){Ye("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==rn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){let i=new bf(this.currentUser,e,n,r),o=_S(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Bs(e){let n=_S(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=Bv(this.persistenceKey,e),o=new fc(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return Cf.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return bf.Es(new ot(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return fc.Es(i,n)}xs(e){return e_.Es(e)}Js(e){return JSON.parse(e)}zs(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=W_();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Af=class{constructor(){this.no=new Mc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Mc,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var t_=class{io(e){}shutdown(){}};var Sf=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var qh=null;function $v(){return qh===null?qh=function(){return 268435456+Math.round(2147483648*Math.random())}():qh++,"0x"+qh.toString(16)}var xB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var n_=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var St="WebChannelConnection",r_=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Do(){return!1}Co(n,r,i,o,s){let a=$v(),u=this.vo(n,r.toUriEncodedString());O("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,o,s),this.Mo(n,u,l,i).then(d=>(O("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw wn("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}xo(n,r,i,o,s,a){return this.Co(n,r,i,o,s)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ya}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}vo(n,r){let i=xB[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let o=$v();return new Promise((s,a)=>{let u=new Pv;u.setWithCredentials(!0),u.listenOnce(Ov.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case rc.NO_ERROR:let d=u.getResponseJson();O(St,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case rc.TIMEOUT:O(St,`RPC '${e}' ${o} timed out`),a(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case rc.HTTP_ERROR:let f=u.getStatus();if(O(St,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let b=function(C){let P=C.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(P)>=0?P:R.UNKNOWN}(y.status);a(new k(b,y.message))}else a(new k(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new k(R.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{O(St,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(St,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=$v(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Vv(),a=Lv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new kv({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let d=o.join("");O(St,`Creating RPC '${e}' stream ${i}: ${d}`,u);let f=s.createWebChannel(d,u),g=!1,y=!1,b=new n_({lo:C=>{y?O(St,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(g||(O(St,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),O(St,`RPC '${e}' stream ${i} sending:`,C),f.send(C))},ho:()=>f.close()}),S=(C,P,$)=>{C.listen(P,F=>{try{$(F)}catch(q){setTimeout(()=>{throw q},0)}})};return S(f,Us.EventType.OPEN,()=>{y||(O(St,`RPC '${e}' stream ${i} transport opened.`),b.mo())}),S(f,Us.EventType.CLOSE,()=>{y||(y=!0,O(St,`RPC '${e}' stream ${i} transport closed`),b.po())}),S(f,Us.EventType.ERROR,C=>{y||(y=!0,wn(St,`RPC '${e}' stream ${i} transport errored:`,C),b.po(new k(R.UNAVAILABLE,"The operation could not be completed")))}),S(f,Us.EventType.MESSAGE,C=>{var P;if(!y){let $=C.data[0];K(!!$);let F=$,q=F.error||((P=F[0])===null||P===void 0?void 0:P.error);if(q){O(St,`RPC '${e}' stream ${i} received error:`,q);let ee=q.status,Q=function(_){let E=rt[_];if(E!==void 0)return mx(E)}(ee),I=q.message;Q===void 0&&(Q=R.INTERNAL,I="Unknown error status: "+ee+" with message "+q.message),y=!0,b.po(new k(Q,I)),f.close()}else O(St,`RPC '${e}' stream ${i} received:`,$),b.yo($)}}),S(a,Fv.STAT_EVENT,C=>{C.stat===jh.PROXY?O(St,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===jh.NOPROXY&&O(St,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.fo()},0),b}};function zx(){return typeof window<"u"?window:null}function Kh(){return typeof document<"u"?document:null}function Bc(t){return new _w(t,!0)}var Rc=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var xf=class{constructor(e,n,r,i,o,s,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Rc(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return N(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return N(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return N(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(Ye(n.toString()),Ye("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>N(this,null,function*(){this.state=0,this.start()}))}c_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},i_=class extends xf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=fB(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?Je(s.readTime):J.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=Dw(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=sf(u)?{documents:Tx(o,u)}:{query:bx(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=vx(o,s.resumeToken);let l=Iw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=sa(o,s.snapshotVersion.toTimestamp());let l=Iw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=gB(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=Dw(this.serializer),n.removeTarget=e,this.i_(n)}},o_=class extends xf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=pB(e.writeResults,e.commitTime),r=Je(e.commitTime);return this.listener.A_(r,n)}return K(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Dw(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Ac(this.serializer,r))};this.i_(n)}};var s_=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,Ew(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}xo(e,n,r,i,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.xo(e,Ew(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},a_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Ye(n),this.y_=!1):O("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var u_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{r.enqueueAndForget(()=>N(this,null,function*(){ki(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=B(u);l.M_.add(4),yield wa(l),l.N_.set("Unknown"),l.M_.delete(4),yield $c(l)})}(this))}))}),this.N_=new a_(r,i)}};function $c(t){return N(this,null,function*(){if(ki(t))for(let e of t.x_)yield e(!0)})}function wa(t){return N(this,null,function*(){for(let e of t.x_)yield e(!1)})}function Kf(t,e){let n=B(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),eI(n)?X_(n):Ia(n).Xo()&&J_(n,e))}function da(t,e){let n=B(t),r=Ia(n);n.F_.delete(e),r.Xo()&&Hx(n,e),n.F_.size===0&&(r.Xo()?r.n_():ki(n)&&n.N_.set("Unknown"))}function J_(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ia(t).P_(e)}function Hx(t,e){t.L_.xe(e),Ia(t).I_(e)}function X_(t){t.L_=new ww({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ia(t).start(),t.N_.w_()}function eI(t){return ki(t)&&!Ia(t).Zo()&&t.F_.size>0}function ki(t){return B(t).M_.size===0}function Gx(t){t.L_=void 0}function MB(t){return N(this,null,function*(){t.N_.set("Online")})}function RB(t){return N(this,null,function*(){t.F_.forEach((e,n)=>{J_(t,e)})})}function NB(t,e){return N(this,null,function*(){Gx(t),eI(t)?(t.N_.D_(e),X_(t)):t.N_.set("Unknown")})}function PB(t,e,n){return N(this,null,function*(){if(t.N_.set("Online"),e instanceof lf&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Mf(t,r)}else if(e instanceof Xs?t.L_.Ke(e):e instanceof cf?t.L_.He(e):t.L_.We(e),!n.isEqual(J.min()))try{let r=yield jx(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.L_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let d=o.F_.get(l);d&&o.F_.set(l,d.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let d=o.F_.get(u);if(!d)return;o.F_.set(u,d.withResumeToken(pt.EMPTY_BYTE_STRING,d.snapshotVersion)),Hx(o,u);let f=new aa(d.target,u,l,d.sequenceNumber);J_(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield Mf(t,r)}})}function Mf(t,e,n){return N(this,null,function*(){if(!Pi(e))throw e;t.M_.add(1),yield wa(t),t.N_.set("Offline"),n||(n=()=>jx(t.localStore)),t.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield $c(t)}))})}function Wx(t,e){return e().catch(n=>Mf(t,n,e))}function _a(t){return N(this,null,function*(){let e=B(t),n=Ri(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;kB(e);)try{let i=yield CB(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,OB(e,i)}catch(i){yield Mf(e,i)}Kx(e)&&Qx(e)})}function kB(t){return ki(t)&&t.v_.length<10}function OB(t,e){t.v_.push(e);let n=Ri(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function Kx(t){return ki(t)&&!Ri(t).Zo()&&t.v_.length>0}function Qx(t){Ri(t).start()}function FB(t){return N(this,null,function*(){Ri(t).V_()})}function LB(t){return N(this,null,function*(){let e=Ri(t);for(let n of t.v_)e.d_(n.mutations)})}function VB(t,e,n){return N(this,null,function*(){let r=t.v_.shift(),i=mw.from(r,e,n);yield Wx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield _a(t)})}function jB(t,e){return N(this,null,function*(){e&&Ri(t).E_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return gx(s)&&s!==R.ABORTED}(i.code)){let o=r.v_.shift();Ri(r).t_(),yield Wx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield _a(r)}})}(t,e)),Kx(t)&&Qx(t)})}function IS(t,e){return N(this,null,function*(){let n=B(t);n.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=ki(n);n.M_.add(3),yield wa(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield $c(n)})}function c_(t,e){return N(this,null,function*(){let n=B(t);e?(n.M_.delete(2),yield $c(n)):e||(n.M_.add(2),yield wa(n),n.N_.set("Unknown"))})}function Ia(t){return t.B_||(t.B_=function(n,r,i){let o=B(n);return o.f_(),new i_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:MB.bind(null,t),To:RB.bind(null,t),Ao:NB.bind(null,t),h_:PB.bind(null,t)}),t.x_.push(e=>N(this,null,function*(){e?(t.B_.t_(),eI(t)?X_(t):t.N_.set("Unknown")):(yield t.B_.stop(),Gx(t))}))),t.B_}function Ri(t){return t.k_||(t.k_=function(n,r,i){let o=B(n);return o.f_(),new o_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:FB.bind(null,t),Ao:jB.bind(null,t),R_:LB.bind(null,t),A_:VB.bind(null,t)}),t.x_.push(e=>N(this,null,function*(){e?(t.k_.t_(),yield _a(t)):(yield t.k_.stop(),t.v_.length>0&&(O("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var l_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new st,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ea(t,e){if(Ye("AsyncQueue",`${e}: ${t}`),Pi(t))return new k(R.UNAVAILABLE,`${e}: ${t}`);throw t}var Rf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||U.comparator(n.key,r.key):(n,r)=>U.comparator(n.key,r.key),this.keyedMap=uc(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Nf=class{constructor(){this.q_=new Le(U.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):z():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},ha=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Rf.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var d_=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},h_=class{constructor(){this.queries=new hr(e=>ex(e),jc),this.onlineState="Unknown",this.z_=new Set}};function tI(t,e){return N(this,null,function*(){let n=B(t),r=3,i=e.query,o=n.queries.get(i);o?!o.W_()&&e.G_()&&(r=2):(o=new d_,r=e.G_()?0:1);try{switch(r){case 0:o.K_=yield n.onListen(i,!0);break;case 1:o.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=Ea(s,`Initialization of query '${Gs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&rI(n)})}function nI(t,e){return N(this,null,function*(){let n=B(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?i=e.G_()?0:1:!o.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function UB(t,e){let n=B(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.U_)a.H_(i)&&(r=!0);s.K_=i}}r&&rI(n)}function BB(t,e,n){let r=B(t),i=r.queries.get(e);if(i)for(let o of i.U_)o.onError(n);r.queries.delete(e)}function rI(t){t.z_.forEach(e=>{e.next()})}var f_,ES;(ES=f_||(f_={})).J_="default",ES.Cache="cache";var Nc=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ha(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=ha.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==f_.Cache}};var p_=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var Pf=class{constructor(e){this.serializer=e}Ps(e){return ur(this.serializer,e)}Is(e){return e.metadata.exists?Dx(this.serializer,e.document,!1):at.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Je(e)}},g_=class{constructor(e,n,r){this.oa=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Yx(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let r=me.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,r=new Pf(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||ie()).add(o);n.set(s,a)}}return n}complete(){return N(this,null,function*(){let e=yield AB(this.localStore,new Pf(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let r of this.queries)yield SB(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function Yx(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var kf=class{constructor(e){this.key=e}},Of=class{constructor(e){this.key=e}},Ff=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ie(),this.mutatedKeys=ie(),this.Ia=nx(e),this.Ta=new Rf(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Nf,i=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=Uc(this.query,f)?f:null,b=!!g&&this.mutatedKeys.has(g.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),C=!1;g&&y?g.data.isEqual(y.data)?b!==S&&(r.track({type:3,doc:y}),C=!0):this.Ra(g,y)||(r.track({type:2,doc:y}),C=!0,(u&&this.Ia(y,u)>0||l&&this.Ia(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),C=!0):g&&!y&&(r.track({type:1,doc:g}),C=!0,(u||l)&&(a=!0)),C&&(y?(s=s.add(y),o=S?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ta:s,Aa:r,Xi:a,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((d,f)=>function(y,b){let S=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return S(y)-S(b)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,s.length!==0||l?{snapshot:new ha(this.query,e.Ta,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Nf,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=ie(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Of(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new kf(r))}),n}pa(e){this.la=e.hs,this.Pa=ie();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return ha.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},m_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},y_=class{constructor(e){this.key=e,this.wa=!1}},v_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new hr(a=>ex(a),jc),this.Da=new Map,this.Ca=new Set,this.va=new Le(U.comparator),this.Fa=new Map,this.Ma=new xc,this.xa={},this.Oa=new Map,this.Na=ua.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function $B(t,e,n=!0){return N(this,null,function*(){let r=Qf(t),i,o=r.ba.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ya()):i=yield Zx(r,e,n,!0),i})}function qB(t,e){return N(this,null,function*(){let n=Qf(t);yield Zx(n,e,!0,!1)})}function Zx(t,e,n,r){return N(this,null,function*(){let i=yield ca(t.localStore,Bt(e)),o=i.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",a;return r&&(a=yield iI(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&Kf(t.remoteStore,i),a})}function iI(t,e,n,r,i){return N(this,null,function*(){t.Ba=(f,g,y)=>function(S,C,P,$){return N(this,null,function*(){let F=C.view.da(P);F.Xi&&(F=yield Tf(S.localStore,C.query,!1).then(({documents:I})=>C.view.da(I,F)));let q=$&&$.targetChanges.get(C.targetId),ee=$&&$.targetMismatches.get(C.targetId)!=null,Q=C.view.applyChanges(F,S.isPrimaryClient,q,ee);return w_(S,C.targetId,Q.fa),Q.snapshot})}(t,f,g,y);let o=yield Tf(t.localStore,e,!0),s=new Ff(e,o.hs),a=s.da(o.documents),u=bc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);w_(t,n,l.fa);let d=new m_(e,n,s);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function zB(t,e,n){return N(this,null,function*(){let r=B(t),i=r.ba.get(e),o=r.Da.get(i.targetId);if(o.length>1)return r.Da.set(i.targetId,o.filter(s=>!jc(s,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield la(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&da(r.remoteStore,i.targetId),fa(r,i.targetId)}).catch(Ni))):(fa(r,i.targetId),yield la(r.localStore,i.targetId,!0))})}function HB(t,e){return N(this,null,function*(){let n=B(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),da(n.remoteStore,r.targetId))})}function GB(t,e,n){return N(this,null,function*(){let r=uI(t);try{let i=yield function(s,a){let u=B(s),l=qe.now(),d=a.reduce((y,b)=>y.add(b.key),ie()),f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Yt(),S=ie();return u.os.getEntries(y,d).next(C=>{b=C,b.forEach((P,$)=>{$.isValidDocument()||(S=S.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(C=>{f=C;let P=[];for(let $ of a){let F=sB($,f.get($.key).overlayedDocument);F!=null&&P.push(new Un($.key,F,WS(F.value.mapValue),We.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,P,a)}).next(C=>{g=C;let P=C.applyToLocalDocumentSet(f,S);return u.documentOverlayCache.saveOverlays(y,C.batchId,P)})}).then(()=>({batchId:g.batchId,changes:ix(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.xa[s.currentUser.toKey()];l||(l=new Le(re)),l=l.insert(a,u),s.xa[s.currentUser.toKey()]=l}(r,i.batchId,n),yield $r(r,i.changes),yield _a(r.remoteStore)}catch(i){let o=Ea(i,"Failed to persist write");n.reject(o)}})}function Jx(t,e){return N(this,null,function*(){let n=B(t);try{let r=yield bB(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Fa.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.wa=!0:i.modifiedDocuments.size>0?K(s.wa):i.removedDocuments.size>0&&(K(s.wa),s.wa=!1))}),yield $r(n,r,e)}catch(r){yield Ni(r)}})}function DS(t,e,n){let r=B(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((o,s)=>{let a=s.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=B(s);u.onlineState=a;let l=!1;u.queries.forEach((d,f)=>{for(let g of f.U_)g.j_(a)&&(l=!0)}),l&&rI(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function WB(t,e,n){return N(this,null,function*(){let r=B(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),o=i&&i.key;if(o){let s=new Le(U.comparator);s=s.insert(o,at.newNoDocument(o,J.min()));let a=ie().add(o),u=new Tc(J.min(),new Map,new Le(re),s,a);yield Jx(r,u),r.va=r.va.remove(o),r.Fa.delete(e),aI(r)}else yield la(r.localStore,e,!1).then(()=>fa(r,e,n)).catch(Ni)})}function KB(t,e){return N(this,null,function*(){let n=B(t),r=e.batch.batchId;try{let i=yield TB(n.localStore,e);sI(n,r,null),oI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield $r(n,i)}catch(i){yield Ni(i)}})}function QB(t,e,n){return N(this,null,function*(){let r=B(t);try{let i=yield function(s,a){let u=B(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(K(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>u.localDocuments.getDocuments(l,d))})}(r.localStore,e);sI(r,e,n),oI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield $r(r,i)}catch(i){yield Ni(i)}})}function YB(t,e){return N(this,null,function*(){let n=B(t);ki(n.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Oa.get(r)||[];i.push(e),n.Oa.set(r,i)}catch(r){let i=Ea(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function oI(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function sI(t,e,n){let r=B(t),i=r.xa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function fa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||Xx(t,r)})}function Xx(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(da(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),aI(t))}function w_(t,e,n){for(let r of n)r instanceof kf?(t.Ma.addReference(r.key,e),ZB(t,r)):r instanceof Of?(O("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||Xx(t,r.key)):z()}function ZB(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(O("SyncEngine","New document in limbo: "+n),t.Ca.add(r),aI(t))}function aI(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new U(me.fromString(e)),r=t.Na.next();t.Fa.set(r,new y_(n)),t.va=t.va.insert(n,r),Kf(t.remoteStore,new aa(Bt(va(n.path)),r,"TargetPurposeLimboResolution",rn.oe))}}function $r(t,e,n){return N(this,null,function*(){let r=B(t),i=[],o=[],s=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{s.push(r.Ba(u,e,n).then(l=>{var d;if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=n?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Zw.Ki(u.targetId,l);o.push(f)}}))}),yield Promise.all(s),r.Sa.h_(i),yield function(u,l){return N(this,null,function*(){let d=B(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>x.forEach(l,g=>x.forEach(g.qi,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>x.forEach(g.Qi,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!Pi(f))throw f;O("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.ns.get(g),b=y.snapshotVersion,S=y.withLastLimboFreeSnapshotVersion(b);d.ns=d.ns.insert(g,S)}}})}(r.localStore,o))})}function JB(t,e){return N(this,null,function*(){let n=B(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield Vx(n.localStore,e);n.currentUser=e,function(o,s){o.Oa.forEach(a=>{a.forEach(u=>{u.reject(new k(R.CANCELLED,s))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $r(n,r.us)}})}function XB(t,e){let n=B(t),r=n.Fa.get(e);if(r&&r.wa)return ie().add(r.key);{let i=ie(),o=n.Da.get(e);if(!o)return i;for(let s of o){let a=n.ba.get(s);i=i.unionWith(a.view.Ea)}return i}}function e$(t,e){return N(this,null,function*(){let n=B(t),r=yield Tf(n.localStore,e.query,!0),i=e.view.pa(r);return n.isPrimaryClient&&w_(n,e.targetId,i.fa),i})}function t$(t,e){return N(this,null,function*(){let n=B(t);return $x(n.localStore,e).then(r=>$r(n,r))})}function n$(t,e,n,r){return N(this,null,function*(){let i=B(t),o=yield function(a,u){let l=B(a),d=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.vn(f,u).next(g=>g?l.localDocuments.getDocuments(f,g):x.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield _a(i.remoteStore):n==="acknowledged"||n==="rejected"?(sI(i,e,r||null),oI(i,e),function(a,u){B(B(a).mutationQueue).Mn(u)}(i.localStore,e)):z(),yield $r(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function r$(t,e){return N(this,null,function*(){let n=B(t);if(Qf(n),uI(n),e===!0&&n.La!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield TS(n,r.toArray());n.La=!0,yield c_(n.remoteStore,!0);for(let o of i)Kf(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let r=[],i=Promise.resolve();n.Da.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(fa(n,s),la(n.localStore,s,!0))),da(n.remoteStore,s)}),yield i,yield TS(n,r),function(s){let a=B(s);a.Fa.forEach((u,l)=>{da(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new Le(U.comparator)}(n),n.La=!1,yield c_(n.remoteStore,!1)}})}function TS(t,e,n){return N(this,null,function*(){let r=B(t),i=[],o=[];for(let s of e){let a,u=r.Da.get(s);if(u&&u.length!==0){a=yield ca(r.localStore,Bt(u[0]));for(let l of u){let d=r.ba.get(l),f=yield e$(r,d);f.snapshot&&o.push(f.snapshot)}}else{let l=yield Bx(r.localStore,s);a=yield ca(r.localStore,l),yield iI(r,eM(l),s,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(o),i})}function eM(t){return XS(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function i$(t){return function(n){return B(B(n).persistence).Bi()}(B(t).localStore)}function o$(t,e,n,r){return N(this,null,function*(){let i=B(t);if(i.La)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield $x(i.localStore,tx(o[0])),a=Tc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",pt.EMPTY_BYTE_STRING);yield $r(i,s,a);break}case"rejected":yield la(i.localStore,e,!0),fa(i,e,r);break;default:z()}})}function s$(t,e,n){return N(this,null,function*(){let r=Qf(t);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield Bx(r.localStore,i),s=yield ca(r.localStore,o);yield iI(r,eM(o),s.targetId,!1,s.resumeToken),Kf(r.remoteStore,s)}for(let i of n)r.Da.has(i)&&(yield la(r.localStore,i,!1).then(()=>{da(r.remoteStore,i),fa(r,i)}).catch(Ni))}})}function Qf(t){let e=B(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WB.bind(null,e),e.Sa.h_=UB.bind(null,e.eventManager),e.Sa.ka=BB.bind(null,e.eventManager),e}function uI(t){let e=B(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QB.bind(null,e),e}function a$(t,e,n){let r=B(t);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,b){let S=B(y),C=Je(b.createTime);return S.persistence.runTransaction("hasNewerBundle","readonly",P=>S.$r.getBundleMetadata(P,b.id)).then(P=>!!P&&P.createTime.compareTo(C)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(Yx(u));let l=new g_(u,o.localStore,s.serializer),d=yield s.qa();for(;d;){let g=yield l._a(d);g&&a._updateProgress(g),d=yield s.qa()}let f=yield l.complete();return yield $r(o,f.ca,void 0),yield function(y,b){let S=B(y);return S.persistence.runTransaction("Save bundle","readwrite",C=>S.$r.saveBundleMetadata(C,b))}(o.localStore,u),a._completeWith(f.progress),Promise.resolve(f.ua)}catch(u){return wn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Pc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=Bc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Lx(this.persistence,new Df,e.initialUser,this.serializer)}createPersistence(e){return new If(Ef.Hr,this.serializer)}createSharedClientState(e){return new Af}terminate(){return N(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Lf=class t extends Pc{constructor(e,n,r){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Pp(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield uI(this.Qa.syncEngine),yield _a(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return Lx(this.persistence,new Df,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new Fw(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new ew(n,this.persistence);return new Xv(e.asyncQueue,r)}createPersistence(e){let n=Z_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new Yw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,zx(),Kh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Af}},__=class t extends Lf{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Pp(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof pc&&(this.sharedClientState.syncEngine={Zs:n$.bind(null,n),Xs:o$.bind(null,n),eo:s$.bind(null,n),Bi:i$.bind(null,n),Ys:t$.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>N(this,null,function*(){yield r$(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=zx();if(!pc.D(n))throw new k(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=Z_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new pc(n,e.asyncQueue,r,e.clientId,e.initialUser)}},kc=class{initialize(e,n){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>DS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=JB.bind(null,this.syncEngine),yield c_(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new h_}()}createDatastore(e){let n=Bc(e.databaseInfo.databaseId),r=function(o){return new r_(o)}(e.databaseInfo);return function(o,s,a,u){return new s_(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new u_(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>DS(this.syncEngine,n,0),function(){return Sf.D()?new Sf:new t_}())}createSyncEngine(e,n){return function(i,o,s,a,u,l,d){let f=new v_(i,o,s,a,u,l);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return N(this,null,function*(){var e;yield function(r){return N(this,null,function*(){let i=B(r);O("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield wa(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function bS(t,e=10240){let n=0;return{read(){return N(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var pa=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Ye("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var I_=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new st,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}qa(){return N(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return N(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),r=Number(n);isNaN(r)&&this.ja(`length string (${n}) is not valid number`);let i=yield this.Ha(r);return new p_(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return N(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return N(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var E_=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return N(this,null,function*(){let s=B(i),a={documents:o.map(f=>Cc(s.serializer,f))},u=yield s.xo("BatchGetDocuments",s.serializer.databaseId,me.emptyPath(),a,o.length),l=new Map;u.forEach(f=>{let g=hB(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());K(!!g),d.push(g)}),d})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=U.fromPath(r);this.mutations.push(new Ic(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=B(r),s={writes:i.map(a=>Ac(o.serializer,a))};yield o.Co("Commit",o.serializer.databaseId,me.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw z();n=J.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new k(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(J.min())?We.exists(!1):We.updateTime(n):We.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(J.min()))throw new k(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return We.updateTime(n)}return We.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var D_=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Za=r.maxAttempts,this.Yo=new Rc(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>N(this,null,function*(){let e=new E_(this.datastore),n=this.tu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let n=this.updateFunction(e);return!Lc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!gx(n)}return!1}};var T_=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ot.UNAUTHENTICATED,this.clientId=Zh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>N(this,null,function*(){O("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(O("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new st;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Ea(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Qh(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield Vx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function b_(t,e){return N(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield cI(t);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>IS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>IS(e.remoteStore,i)),t._onlineComponents=e})}function tM(t){return t.name==="FirebaseError"?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function cI(t){return N(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Qh(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!tM(n))throw n;wn("Error using user provided cache. Falling back to memory cache: "+n),yield Qh(t,new Pc)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Qh(t,new Pc);return t._offlineComponents})}function Yf(t){return N(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield b_(t,t._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield b_(t,new kc))),t._onlineComponents})}function nM(t){return cI(t).then(e=>e.persistence)}function lI(t){return cI(t).then(e=>e.localStore)}function rM(t){return Yf(t).then(e=>e.remoteStore)}function dI(t){return Yf(t).then(e=>e.syncEngine)}function u$(t){return Yf(t).then(e=>e.datastore)}function ga(t){return N(this,null,function*(){let e=yield Yf(t),n=e.eventManager;return n.onListen=$B.bind(null,e.syncEngine),n.onUnlisten=zB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HB.bind(null,e.syncEngine),n})}function c$(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield nM(t),n=yield rM(t);return e.setNetworkEnabled(!0),function(i){let o=B(i);return o.M_.delete(0),$c(o)}(n)}))}function l$(t){return t.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield nM(t),n=yield rM(t);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=B(i);o.M_.add(0),yield wa(o),o.N_.set("Offline")})}(n)}))}function d$(t,e){let n=new st;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,d){let f=B(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Ea(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield lI(t),e,n)})),n.promise}function iM(t,e,n={}){let r=new st;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let d=new pa({next:g=>{s.enqueueAndForget(()=>nI(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new k(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Nc(va(a.path),d,{includeMetadataChanges:!0,ra:!0});return tI(o,f)}(yield ga(t),t.asyncQueue,e,n,r)})),r.promise}function h$(t,e){let n=new st;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield Tf(i,o,!0),u=new Ff(o,a.hs),l=u.da(a.documents),d=u.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let u=Ea(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield lI(t),e,n)})),n.promise}function oM(t,e,n={}){let r=new st;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let d=new pa({next:g=>{s.enqueueAndForget(()=>nI(o,f)),g.fromCache&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Nc(a,d,{includeMetadataChanges:!0,ra:!0});return tI(o,f)}(yield ga(t),t.asyncQueue,e,n,r)})),r.promise}function f$(t,e){let n=new pa(e);return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).z_.add(o),o.next()}(yield ga(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){B(i).z_.delete(o)}(yield ga(t),n)}))}}function p$(t,e,n,r){let i=function(s,a){let u;return u=typeof s=="string"?yx().encode(s):s,function(d,f){return new I_(d,f)}(function(d,f){if(d instanceof Uint8Array)return bS(d,f);if(d instanceof ArrayBuffer)return bS(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,Bc(e));t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){a$(yield dI(t),i,r)}))}function g$(t,e){return t.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=B(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield lI(t),e)}))}function sM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var CS=new Map;function hI(t,e,n){if(!n)throw new k(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fI(t,e,n,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function AS(t){if(!U.isDocumentKey(t))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function SS(t){if(U.isDocumentKey(t))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Zf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z()}function ye(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Zf(t);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function aM(t,e){if(e<=0)throw new k(R.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Vf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Co=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qv;switch(r.type){case"firstParty":return new Wv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=CS.get(n);r&&(O("ComponentProvider","Removing Datastore"),CS.delete(n),r.terminate())}(this),Promise.resolve()}};function pI(t,e,n,r={}){var i;let o=(t=ye(t,Co))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&wn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=ot.MOCK_USER;else{a=qE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ot(l)}t._authCredentials=new zv(new Yh(a,u))}}var wt=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Pe=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},cr=class t extends wt{constructor(e,n,r){super(e,n,va(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Pe(this.firestore,null,new U(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function gI(t,e,...n){if(t=$e(t),hI("collection","path",e),t instanceof Co){let r=me.fromString(e,...n);return SS(r),new cr(t,null,r)}{if(!(t instanceof Pe||t instanceof cr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(me.fromString(e,...n));return SS(r),new cr(t.firestore,null,r)}}function uM(t,e){if(t=ye(t,Co),hI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new wt(t,null,function(r){return new jn(me.emptyPath(),r)}(e))}function qc(t,e,...n){if(t=$e(t),arguments.length===1&&(e=Zh.newId()),hI("doc","path",e),t instanceof Co){let r=me.fromString(e,...n);return AS(r),new Pe(t,null,new U(r))}{if(!(t instanceof Pe||t instanceof cr))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(me.fromString(e,...n));return AS(r),new Pe(t.firestore,t instanceof cr?t.converter:null,new U(r))}}function mI(t,e){return t=$e(t),e=$e(e),(t instanceof Pe||t instanceof cr)&&(e instanceof Pe||e instanceof cr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function yI(t,e){return t=$e(t),e=$e(e),t instanceof wt&&e instanceof wt&&t.firestore===e.firestore&&jc(t._query,e._query)&&t.converter===e.converter}var C_=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Rc(this,"async_queue_retry"),this.hu=()=>{let n=Kh();n&&O("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Kh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Kh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new st;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return N(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Pi(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ye("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=l_.createAndSchedule(this,e,n,r,o=>this.Eu(o));return this._u.push(i),i}Pu(){this.au&&z()}verifyOperationInProgress(){}du(){return N(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function A_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var S_=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new st,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var cM=-1,Be=class extends Co{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new C_}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||lM(this),this._firestoreClient.terminate()}};function Z8(t,e){let n=typeof t=="object"?t:Ka(),r=typeof t=="string"?t:e||"(default)",i=Lp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=$E("firestore");o&&pI(i,...o)}return i}function lt(t){return t._firestoreClient||lM(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function lM(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,d){return new tw(a,u,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,sM(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new T_(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function dM(t,e){_M(t=ye(t,Be));let n=lt(t);if(n._uninitializedComponentsProvider)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");wn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new kc;return fM(n,i,new Lf(i,r.cacheSizeBytes,e?.forceOwnership))}function hM(t){_M(t=ye(t,Be));let e=lt(t);if(e._uninitializedComponentsProvider)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");wn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new kc;return fM(e,r,new __(r,n.cacheSizeBytes))}function fM(t,e,n){let r=new st;return t.asyncQueue.enqueue(()=>N(this,null,function*(){try{yield Qh(t,n),yield b_(t,e),r.resolve()}catch(i){let o=i;if(!tM(o))throw o;wn("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function pM(t){if(t._initialized&&!t._terminated)throw new k(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new st;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!Di.D())return Promise.resolve();let i=r+"main";yield Di.delete(i)})}(Z_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function gM(t){return function(n){let r=new st;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return YB(yield dI(n),r)})),r.promise}(lt(t=ye(t,Be)))}function mM(t){return c$(lt(t=ye(t,Be)))}function yM(t){return l$(lt(t=ye(t,Be)))}function vM(t,e){let n=lt(t=ye(t,Be)),r=new S_;return p$(n,t._databaseId,e,r),r}function wM(t,e){return g$(lt(t=ye(t,Be)),e).then(n=>n?new wt(t,null,n.query):null)}function _M(t){if(t._initialized||t._terminated)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var fr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(pt.fromBase64String(e))}catch(n){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Bn=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ur=class{constructor(e){this._methodName=e}};var Ao=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var m$=/^__.*__$/,x_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Un(e,this.data,this.fieldMask,n,this.fieldTransforms):new xi(e,this.data,n,this.fieldTransforms)}},jf=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Un(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function IM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var Uf=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Bf(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(IM(this.fu)&&m$.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},M_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Bc(e)}Fu(e,n,r,i=!1){return new Uf({fu:e,methodName:n,vu:r,path:Ze.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ro(t){let e=t._freezeSettings(),n=Bc(t._databaseId);return new M_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Jf(t,e,n,r,i,o={}){let s=t.Fu(o.merge||o.mergeFields?2:0,e,n,i);_I("Data must be an object, but it was:",s,r);let a=TM(r,s),u,l;if(o.merge)u=new on(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=O_(e,f,n);if(!s.contains(g))throw new k(R.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);CM(d,g)||d.push(g)}u=new on(d),l=s.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=s.fieldTransforms;return new x_(new xt(a),u,l)}var Oc=class t extends Ur{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function EM(t,e,n){return new Uf({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var R_=class t extends Ur{_toFieldTransform(e){return new Do(e.path,new Ai)}isEqual(e){return e instanceof t}},N_=class t extends Ur{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=EM(this,e,!0),r=this.Mu.map(o=>No(o,n)),i=new Vr(r);return new Do(e.path,i)}isEqual(e){return e instanceof t&&Fp(this.Mu,e.Mu)}},P_=class t extends Ur{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=EM(this,e,!0),r=this.Mu.map(o=>No(o,n)),i=new jr(r);return new Do(e.path,i)}isEqual(e){return e instanceof t&&Fp(this.Mu,e.Mu)}},k_=class t extends Ur{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new Si(e.serializer,ux(e.serializer,this.xu));return new Do(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function vI(t,e,n,r){let i=t.Fu(1,e,n);_I("Data must be an object, but it was:",i,r);let o=[],s=xt.empty();Mo(r,(u,l)=>{let d=II(e,u,n);l=$e(l);let f=i.Su(d);if(l instanceof Oc)o.push(d);else{let g=No(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new on(o);return new jf(s,a,i.fieldTransforms)}function wI(t,e,n,r,i,o){let s=t.Fu(1,e,n),a=[O_(e,r,n)],u=[i];if(o.length%2!=0)throw new k(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(O_(e,o[g])),u.push(o[g+1]);let l=[],d=xt.empty();for(let g=a.length-1;g>=0;--g)if(!CM(l,a[g])){let y=a[g],b=u[g];b=$e(b);let S=s.Su(y);if(b instanceof Oc)l.push(y);else{let C=No(b,S);C!=null&&(l.push(y),d.set(y,C))}}let f=new on(l);return new jf(d,f,s.fieldTransforms)}function DM(t,e,n,r=!1){return No(n,t.Fu(r?4:3,e))}function No(t,e){if(bM(t=$e(t)))return _I("Unsupported field value:",e,t),TM(t,e);if(t instanceof Ur)return function(r,i){if(!IM(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=No(a,i.bu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=$e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ux(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=qe.fromDate(r);return{timestampValue:sa(i.serializer,o)}}if(r instanceof qe){let o=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:sa(i.serializer,o)}}if(r instanceof Ao)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fr)return{bytesValue:vx(i.serializer,r._byteString)};if(r instanceof Pe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:K_(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Zf(r)}`)}(t,e)}function TM(t,e){let n={};return zS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mo(t,(r,i)=>{let o=No(i,e.pu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function bM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qe||t instanceof Ao||t instanceof fr||t instanceof Pe||t instanceof Ur)}function _I(t,e,n){if(!bM(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Zf(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function O_(t,e,n){if((e=$e(e))instanceof Bn)return e._internalPath;if(typeof e=="string")return II(t,e);throw Bf("Field path arguments must be of type string or ",t,!1,void 0,n)}var y$=new RegExp("[~\\*/\\[\\]]");function II(t,e,n){if(e.search(y$)>=0)throw Bf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bn(...e.split("."))._internalPath}catch{throw Bf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(R.INVALID_ARGUMENT,a+t+u)}function CM(t,e){return t.some(n=>n.isEqual(e))}var So=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new F_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Xf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},F_=class extends So{data(){return super.data()}};function Xf(t,e){return typeof e=="string"?II(t,e):e instanceof Bn?e._internalPath:e._delegate._internalPath}function AM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fc=class{},xo=class extends Fc{};function qr(t,e,...n){let r=[];e instanceof Fc&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof L_).length,a=o.filter(u=>u instanceof $f).length;if(s>1||s>0&&a>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var $f=class t extends xo{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return LM(e._query,n),new wt(e.firestore,e.converter,pw(e._query,n))}_parse(e){let n=Ro(e.firestore);return function(o,s,a,u,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){MS(f,d);let y=[];for(let b of f)y.push(xS(u,o,b));g={arrayValue:{values:y}}}else g=xS(u,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||MS(f,d),g=DM(a,s,f,d==="in"||d==="not-in");return he.create(l,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function SM(t,e,n){let r=e,i=Xf("where",t);return $f._create(i,r,n)}var L_=class t extends Fc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Te.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)LM(s,u),s=pw(s,u)}(e._query,n),new wt(e.firestore,e.converter,pw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var V_=class t extends xo{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Io(o,s)}(e._query,this._field,this._direction);return new wt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new jn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function xM(t,e="asc"){let n=e,r=Xf("orderBy",t);return V_._create(r,n)}var qf=class t extends xo{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new wt(e.firestore,e.converter,uf(e._query,this._limit,this._limitType))}};function MM(t){return aM("limit",t),qf._create("limit",t,"F")}function RM(t){return aM("limitToLast",t),qf._create("limitToLast",t,"L")}var zf=class t extends xo{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=FM(e,this.type,this._docOrFields,this._inclusive);return new wt(e.firestore,e.converter,function(i,o){return new jn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function NM(...t){return zf._create("startAt",t,!0)}function PM(...t){return zf._create("startAfter",t,!1)}var Hf=class t extends xo{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=FM(e,this.type,this._docOrFields,this._inclusive);return new wt(e.firestore,e.converter,function(i,o){return new jn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function kM(...t){return Hf._create("endBefore",t,!1)}function OM(...t){return Hf._create("endAt",t,!0)}function FM(t,e,n,r){if(n[0]=$e(n[0]),n[0]instanceof So)return function(o,s,a,u,l){if(!u)throw new k(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Js(o))if(f.field.isKeyField())d.push(_o(s,u.key));else{let g=u.data.field(f.field);if(Wf(g))throw new k(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let y=f.field.canonicalString();throw new k(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new dr(d,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Ro(t.firestore);return function(s,a,u,l,d,f){let g=s.explicitOrderBy;if(d.length>g.length)throw new k(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let b=0;b<d.length;b++){let S=d[b];if(g[b].field.isKeyField()){if(typeof S!="string")throw new k(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof S}`);if(!G_(s)&&S.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${S}' contains a slash.`);let C=s.path.child(me.fromString(S));if(!U.isDocumentKey(C))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);let P=new U(C);y.push(_o(a,P))}else{let C=DM(u,l,S);y.push(C)}}return new dr(y,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function xS(t,e,n){if(typeof(n=$e(n))=="string"){if(n==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!G_(e)&&n.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(me.fromString(n));if(!U.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _o(t,new U(r))}if(n instanceof Pe)return _o(t,n._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zf(n)}.`)}function MS(t,e){if(!Array.isArray(t)||t.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LM(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var ma=class{convertValue(e,n="none"){switch(wo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Mo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Ao(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=z_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(vc(e));default:return null}}convertTimestamp(e){let n=Lr(e);return new qe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=me.fromString(e);K(xx(r));let i=new bi(r.get(1),r.get(3)),o=new U(r.popFirst(5));return i.isEqual(n)||Ye(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function ep(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var j_=class extends ma{constructor(e){super(),this.firestore=e}convertBytes(e){return new fr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}};var Fr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},In=class extends So{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ii(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Xf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ii=class extends In{data(e={}){return super.data(e)}},$n=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ii(this._firestore,this._userDataWriter,r.key,r,new Fr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ii(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ii(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:v$(a.type),doc:u,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function v$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function EI(t,e){return t instanceof In&&e instanceof In?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof $n&&e instanceof $n&&t._firestore===e._firestore&&yI(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function VM(t){t=ye(t,Pe);let e=ye(t.firestore,Be);return iM(lt(e),t._key).then(n=>CI(e,t,n))}var Br=class extends ma{constructor(e){super(),this.firestore=e}convertBytes(e){return new fr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pe(this.firestore,null,n)}};function jM(t){t=ye(t,Pe);let e=ye(t.firestore,Be),n=lt(e),r=new Br(e);return d$(n,t._key).then(i=>new In(e,r,t._key,i,new Fr(i!==null&&i.hasLocalMutations,!0),t.converter))}function UM(t){t=ye(t,Pe);let e=ye(t.firestore,Be);return iM(lt(e),t._key,{source:"server"}).then(n=>CI(e,t,n))}function BM(t){t=ye(t,wt);let e=ye(t.firestore,Be),n=lt(e),r=new Br(e);return AM(t._query),oM(n,t._query).then(i=>new $n(e,r,t,i))}function $M(t){t=ye(t,wt);let e=ye(t.firestore,Be),n=lt(e),r=new Br(e);return h$(n,t._query).then(i=>new $n(e,r,t,i))}function qM(t){t=ye(t,wt);let e=ye(t.firestore,Be),n=lt(e),r=new Br(e);return oM(n,t._query,{source:"server"}).then(i=>new $n(e,r,t,i))}function DI(t,e,n){t=ye(t,Pe);let r=ye(t.firestore,Be),i=ep(t.converter,e,n);return Da(r,[Jf(Ro(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,We.none())])}function TI(t,e,n,...r){t=ye(t,Pe);let i=ye(t.firestore,Be),o=Ro(i),s;return s=typeof(e=$e(e))=="string"||e instanceof Bn?wI(o,"updateDoc",t._key,e,n,r):vI(o,"updateDoc",t._key,e),Da(i,[s.toMutation(t._key,We.exists(!0))])}function zM(t){return Da(ye(t.firestore,Be),[new Mi(t._key,We.none())])}function HM(t,e){let n=ye(t.firestore,Be),r=qc(t),i=ep(t.converter,e);return Da(n,[Jf(Ro(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,We.exists(!1))]).then(()=>r)}function bI(t,...e){var n,r,i;t=$e(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||A_(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(A_(e[s])){let f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,d;if(t instanceof Pe)l=ye(t.firestore,Be),d=va(t._key.path),u={next:f=>{e[s]&&e[s](CI(l,t,f))},error:e[s+1],complete:e[s+2]};else{let f=ye(t,wt);l=ye(f.firestore,Be),d=f._query;let g=new Br(l);u={next:y=>{e[s]&&e[s](new $n(l,g,f,y))},error:e[s+1],complete:e[s+2]},AM(t._query)}return function(g,y,b,S){let C=new pa(S),P=new Nc(y,C,b);return g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return tI(yield ga(g),P)})),()=>{C.$a(),g.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return nI(yield ga(g),P)}))}}(lt(l),d,a,u)}function GM(t,e){return f$(lt(t=ye(t,Be)),A_(e)?e:{next:e})}function Da(t,e){return function(r,i){let o=new st;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return GB(yield dI(r),i,o)})),o.promise}(lt(t),e)}function CI(t,e,n){let r=n.docs.get(e._key),i=new Br(t);return new In(t,i,e._key,r,new Fr(n.hasPendingWrites,n.fromCache),e.converter)}var w$={maxAttempts:5};var Gf=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ro(e)}set(e,n,r){this._verifyNotCommitted();let i=wi(e,this._firestore),o=ep(i.converter,n,r),s=Jf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,We.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=wi(e,this._firestore),s;return s=typeof(n=$e(n))=="string"||n instanceof Bn?wI(this._dataReader,"WriteBatch.update",o._key,n,r,i):vI(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,We.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=wi(e,this._firestore);return this._mutations=this._mutations.concat(new Mi(n._key,We.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function wi(t,e){if((t=$e(t)).firestore!==e)throw new k(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var U_=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ro(n)}get(n){let r=wi(n,this._firestore),i=new j_(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new So(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new So(this._firestore,i,r._key,null,r.converter);throw z()})}set(n,r,i){let o=wi(n,this._firestore),s=ep(o.converter,r,i),a=Jf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=wi(n,this._firestore),a;return a=typeof(r=$e(r))=="string"||r instanceof Bn?wI(this._dataReader,"Transaction.update",s._key,r,i,o):vI(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=wi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=wi(e,this._firestore),r=new Br(this._firestore);return super.get(e).then(i=>new In(this._firestore,r,n._key,i._document,new Fr(!1,!1),n.converter))}};function WM(t,e,n){t=ye(t,Be);let r=Object.assign(Object.assign({},w$),n);return function(o){if(o.maxAttempts<1)throw new k(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new st;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield u$(o);new D_(o.asyncQueue,l,a,s,u).Xa()})),u.promise}(lt(t),i=>e(new U_(t,i)),r)}function KM(){return new Oc("deleteField")}function QM(){return new R_("serverTimestamp")}function YM(...t){return new N_("arrayUnion",t)}function ZM(...t){return new P_("arrayRemove",t)}function JM(t){return new k_("increment",t)}(function(e,n=!0){(function(i){ya=i})(GE),Wa(new ji("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Be(new Hv(r.getProvider("auth-internal")),new Qv(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bi(l.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),sn(RA,"4.6.4",e),sn(RA,"4.6.4","esm2017")})();var _$="@firebase/firestore-compat",I$="0.3.33";function NI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function XM(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function eR(){if(!HS())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var tp=class t{constructor(e){this._delegate=e}static fromBase64String(e){return eR(),new t(fr.fromBase64String(e))}static fromUint8Array(e){return XM(),new t(fr.fromUint8Array(e))}toBase64(){return eR(),this._delegate.toBase64()}toUint8Array(){return XM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function AI(t){return E$(t,["next","error","complete"])}function E$(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var SI=class{enableIndexedDbPersistence(e,n){return dM(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return hM(e._delegate)}clearIndexedDbPersistence(e){return pM(e._delegate)}},np=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof bi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&wn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){pI(this._delegate,e,n,r)}enableNetwork(){return mM(this._delegate)}disableNetwork(){return yM(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,fI("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return gM(this._delegate)}onSnapshotsInSync(e){return GM(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ca(this,gI(this._delegate,e))}catch(n){throw $t(n,"collection()","Firestore.collection()")}}doc(e){try{return new pr(this,qc(this._delegate,e))}catch(n){throw $t(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Fo(this,uM(this._delegate,e))}catch(n){throw $t(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return WM(this._delegate,n=>e(new rp(this,n)))}batch(){return lt(this._delegate),new ip(new Gf(this._delegate,e=>Da(this._delegate,e)))}loadBundle(e){return vM(this._delegate,e)}namedQuery(e){return wM(this._delegate,e).then(n=>n?new Fo(this,n):null)}},Ta=class extends ma{constructor(e){super(),this.firestore=e}convertBytes(e){return new tp(new fr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return pr.forKey(n,this.firestore,null)}};function D$(t){RS(t)}var rp=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ta(e)}get(e){let n=Po(e);return this._delegate.get(n).then(r=>new ko(this._firestore,new In(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=Po(e);return r?(NI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Po(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Po(e);return this._delegate.delete(n),this}},ip=class{constructor(e){this._delegate=e}set(e,n,r){let i=Po(e);return r?(NI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Po(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Po(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},ba=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Ii(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Oo(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new Ta(e),n),i.set(n,o)),o}};ba.INSTANCES=new WeakMap;var pr=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ta(e)}static forPath(e,n,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Pe(n._delegate,r,new U(e)))}static forKey(e,n,r){return new t(n,new Pe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ca(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ca(this.firestore,gI(this._delegate,e))}catch(n){throw $t(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=$e(e),e instanceof Pe?mI(this._delegate,e):!1}set(e,n){n=NI("DocumentReference.set",n);try{return n?DI(this._delegate,e,n):DI(this._delegate,e)}catch(r){throw $t(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?TI(this._delegate,e):TI(this._delegate,e,n,...r)}catch(i){throw $t(i,"updateDoc()","DocumentReference.update()")}}delete(){return zM(this._delegate)}onSnapshot(...e){let n=tR(e),r=nR(e,i=>new ko(this.firestore,new In(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return bI(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=jM(this._delegate):e?.source==="server"?n=UM(this._delegate):n=VM(this._delegate),n.then(r=>new ko(this.firestore,new In(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ba.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function $t(t,e,n){return t.message=t.message.replace(e,n),t}function tR(t){for(let e of t)if(typeof e=="object"&&!AI(e))return e;return{}}function nR(t,e){var n,r;let i;return AI(t[0])?i=t[0]:AI(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ko=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new pr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return EI(this._delegate,e._delegate)}},Oo=class extends ko{data(e){let n=this._delegate.data(e);return this._delegate._converter||NS(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Fo=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ta(e)}where(e,n,r){try{return new t(this.firestore,qr(this._delegate,SM(e,n,r)))}catch(i){throw $t(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,qr(this._delegate,xM(e,n)))}catch(r){throw $t(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,qr(this._delegate,MM(e)))}catch(n){throw $t(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,qr(this._delegate,RM(e)))}catch(n){throw $t(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,qr(this._delegate,NM(...e)))}catch(n){throw $t(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,qr(this._delegate,PM(...e)))}catch(n){throw $t(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,qr(this._delegate,kM(...e)))}catch(n){throw $t(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,qr(this._delegate,OM(...e)))}catch(n){throw $t(n,"endAt()","Query.endAt()")}}isEqual(e){return yI(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=$M(this._delegate):e?.source==="server"?n=qM(this._delegate):n=BM(this._delegate),n.then(r=>new zc(this.firestore,new $n(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=tR(e),r=nR(e,i=>new zc(this.firestore,new $n(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return bI(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ba.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},xI=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Oo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},zc=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Fo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Oo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new xI(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Oo(this._firestore,r))})}isEqual(e){return EI(this._delegate,e._delegate)}},Ca=class t extends Fo{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new pr(this.firestore,e):null}doc(e){try{return e===void 0?new pr(this.firestore,qc(this._delegate)):new pr(this.firestore,qc(this._delegate,e))}catch(n){throw $t(n,"doc()","CollectionReference.doc()")}}add(e){return HM(this._delegate,e).then(n=>new pr(this.firestore,n))}isEqual(e){return mI(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ba.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Po(t){return ye(t,Pe)}var MI=class t{constructor(...e){this._delegate=new Bn(...e)}static documentId(){return new t(Ze.keyField().canonicalString())}isEqual(e){return e=$e(e),e instanceof Bn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var RI=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=QM();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=KM();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=YM(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=ZM(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=JM(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var T$={Firestore:np,GeoPoint:Ao,Timestamp:qe,Blob:tp,Transaction:rp,WriteBatch:ip,DocumentReference:pr,DocumentSnapshot:ko,Query:Fo,QueryDocumentSnapshot:Oo,QuerySnapshot:zc,CollectionReference:Ca,FieldPath:MI,FieldValue:RI,setLogLevel:D$,CACHE_SIZE_UNLIMITED:cM};function b$(t,e){t.INTERNAL.registerComponent(new ji("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},T$)))}function C$(t){b$(t,(e,n)=>new np(e,n,new SI)),t.registerVersion(_$,I$)}C$(qt);function A$(t,e=Xa){return new oe(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function rR(t,e){return A$(t,e)}function S$(t,e){return rR(t,e).pipe(Hi(void 0),tu(),X(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function OI(t,e){return rR(t,e).pipe(X(n=>({payload:n,type:"query"})))}var op=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=uR(r,n);return new ap(i,o,this.afs)}snapshotChanges(){return S$(this.ref,this.afs.schedulers.outsideAngular).pipe(jt)}valueChanges(e={}){return this.snapshotChanges().pipe(X(({payload:n})=>e.idField?Ve(G({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return ve(this.ref.get(e)).pipe(jt)}};function sp(t,e){return OI(t,e).pipe(Hi(void 0),tu(),X(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function iR(t,e,n){return sp(t,n).pipe(zi((r,i)=>x$(r,i.map(o=>o.payload),e),[]),tg(),X(r=>r.map(i=>({type:i.type,payload:i}))))}function x$(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=M$(t,r))}),t}function PI(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function M$(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return PI(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return PI(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return PI(t,e.oldIndex,1);break}return t}function oR(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var ap=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=sp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(X(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Hi(void 0),tu(),ut(([r,i])=>i.length>0||!r),X(([,r])=>r),jt)}auditTrail(e){return this.stateChanges(e).pipe(zi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=oR(e);return iR(this.query,n,this.afs.schedulers.outsideAngular).pipe(jt)}valueChanges(e={}){return OI(this.query,this.afs.schedulers.outsideAngular).pipe(X(n=>n.payload.docs.map(r=>e.idField?Ve(G({},r.data()),{[e.idField]:r.id}):r.data())),jt)}get(e){return ve(this.query.get(e)).pipe(jt)}add(e){return this.ref.add(e)}doc(e){return new op(this.ref.doc(e),this.afs)}},kI=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?sp(this.query,this.afs.schedulers.outsideAngular).pipe(jt):sp(this.query,this.afs.schedulers.outsideAngular).pipe(X(n=>n.filter(r=>e.indexOf(r.type)>-1)),ut(n=>n.length>0),jt)}auditTrail(e){return this.stateChanges(e).pipe(zi((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=oR(e);return iR(this.query,n,this.afs.schedulers.outsideAngular).pipe(jt)}valueChanges(e={}){return OI(this.query,this.afs.schedulers.outsideAngular).pipe(X(r=>r.payload.docs.map(i=>e.idField?G({[e.idField]:i.id},i.data()):i.data())),jt)}get(e){return ve(this.query.get(e)).pipe(jt)}},sR=new H("angularfire2.enableFirestorePersistence"),aR=new H("angularfire2.firestore.persistenceSettings"),R$=new H("angularfire2.firestore.settings"),N$=new H("angularfire2.firestore.use-emulator");function uR(t,e=n=>n){return{query:e(t),ref:t}}var FI=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,l,d,f,g,y,b,S,C,P,$){this.schedulers=u;let F=tc(n,a,r),q=d;f&&Rv(F,a,g,b,S,C,y,P),[this.firestore,this.persistenceEnabled$]=Fh(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let ee=a.runOutsideAngular(()=>F.firestore());if(o&&ee.settings(o),q&&ee.useEmulator(...q),i&&!ai(s)){let Q=()=>{try{return ve(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),Y(!1)}};return[ee,a.runOutsideAngular(Q)]}else return[ee,Y(!1)]},[o,q,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=uR(i,r),a=this.schedulers.ngZone.run(()=>o);return new ap(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new kI(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new op(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(L(Vs),L(js,8),L(sR,8),L(R$,8),L(ht),L(pe),L(Ls),L(aR,8),L(N$,8),L(SA,8),L(bv,8),L(Cv,8),L(Av,8),L(Sv,8),L(xv,8),L(Mv,8),L(co,8))};static \u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),IW=(()=>{class t{constructor(){qt.registerVersion("angularfire",Pr.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:sR,useValue:!0},{provide:aR,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=dn({type:t});static \u0275inj=ln({providers:[FI]})}return t})();var cR=(()=>{let e=class e{constructor(r){this._firestore=r,this._refresh$=new je}get refresh$(){return this._refresh$}crearUsuario(r){return this._firestore.collection("usuarios").add(r)}getListadoUsuario(){return this._firestore.collection("usuarios").stateChanges()}getPerfilUsuario(r){return this._firestore.collection("usuarios",i=>i.where("email","==",r)).snapshotChanges()}getEspecialistaAutorizado(r){return this._firestore.collection("usuarios",i=>i.where("email","==",r).where("aprobadoPorAdmin","==",!0)).snapshotChanges()}eliminarUsuario(r){return this._firestore.collection("usuarios").doc(r).delete()}modificarUsuario(r,i){return this._firestore.collection("usuarios").doc(r).update(i)}getUsuario(r){return this._firestore.collection("usuarios").doc(r).snapshotChanges()}habilitarCuenta(r){return console.log("servicio habilitarCuenta"),this._firestore.collection("usuarios").doc(r).update({aprobadoPorAdmin:"SI"})}deshabilitarCuenta(r){return this._firestore.collection("usuarios").doc(r).update({aprobadoPorAdmin:"NO"})}crearTurno(r){return this._firestore.collection("turnos").add(r)}getEspecialidades(){return this._firestore.collection("turnos").stateChanges()}getListaEspecialistas(){return this._firestore.collection("turnos").stateChanges()}getTurnosDrYEspecialidad(r,i){return this._firestore.collection("turnos",o=>o.where("email","==",i).where("especialidad","==",r)).snapshotChanges()}getTurnosDr(r){return this._firestore.collection("turnos",i=>i.where("email","==",r)).snapshotChanges()}eleminarHorarioLaboralTurno(r){return this._firestore.collection("turnos").doc(r).delete()}crearTurnoPacientes(r){return this._firestore.collection("turnopaciente").add(r)}getTurnoPacientes(r){return this._firestore.collection("turnopaciente",i=>i.where("emailPaciente","==",r)).snapshotChanges()}getTurnosPacienteFiltradoDrYEspecialidad(r,i){return this._firestore.collection("turnopaciente",o=>o.where("emailEspecialista","==",i).where("especialidad","==",r)).snapshotChanges()}cancelarTurnoPaciente(r,i,o){return this._firestore.collection("turnopaciente").doc(r).update({estado:i,canceladoComentario:o})}calificacionTurnoPaciente(r,i){return this._firestore.collection("turnopaciente").doc(r).update({atencion:i})}encuestaTurnoPaciente(r,i){return this._firestore.collection("turnopaciente").doc(r).update({encuesta:i})}getTurnoEspecialista(r){return this._firestore.collection("turnopaciente",i=>i.where("emailEspecialista","==",r)).snapshotChanges()}getHistoriaClinicaPaciente(r){return this._firestore.collection("turnopaciente",i=>i.where("emailPaciente","==",r)).snapshotChanges()}getVerResaniaPaciente(r){return this._firestore.collection("turnopaciente",i=>i.where("id","==",r)).snapshotChanges()}aceptarTurnoEspecialista(r,i){return this._firestore.collection("turnopaciente").doc(r).update({estado:i})}finalizadaAtencion(r,i,o,s){return this._firestore.collection("turnopaciente").doc(r).update({estado:i,resena:o,diagnostico:s})}guardarHistoriaClinicaServicio(r,i,o,s,a,u,l,d,f,g,y){return this._firestore.collection("turnopaciente").doc(r).update({altura:i,peso:o,temperatura:s,presion:a,clave1:u,valor1:l,clave2:d,valor2:f,clave3:g,valor3:y})}getHistoriaClinicaEspecialistaAlmenosUno(r){return this._firestore.collection("turnopaciente",i=>i.where("emailEspecialista","==",r).where("estado","==","FINALIZADO")).snapshotChanges()}getPerfil(r){return this._firestore.collection("usuarios",i=>i.where("email","==",r)).snapshotChanges()}};e.\u0275fac=function(i){return new(i||e)(L(FI))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function O$(t,e){if(t&1){let n=pn();Ae(0,"li",3)(1,"a",4),ct("click",function(){Wt(n);let i=Qt();return Kt(i.misTurnos())}),Re(2,"- Mis Turnos - "),Se()()}}function F$(t,e){if(t&1){let n=pn();Ae(0,"li",3)(1,"a",4),ct("click",function(){Wt(n);let i=Qt();return Kt(i.solicitarTurno())}),Re(2,"Solicitar Turno - "),Se()()}}function L$(t,e){if(t&1){let n=pn();Ae(0,"li",3)(1,"a",4),ct("click",function(){Wt(n);let i=Qt();return Kt(i.perfilPaciente())}),Re(2,"Mi Perfil"),Se()()}}function V$(t,e){if(t&1){let n=pn();Ae(0,"li",3)(1,"a",4),ct("click",function(){Wt(n);let i=Qt();return Kt(i.misTurnoEspecialista())}),Re(2,"- Mis Turnos -"),Se()()}}function j$(t,e){if(t&1){let n=pn();Ae(0,"li",3)(1,"a",4),ct("click",function(){Wt(n);let i=Qt();return Kt(i.misPacientes())}),Re(2,"Pacientes -"),Se()()}}function U$(t,e){if(t&1){let n=pn();Ae(0,"li",3)(1,"a",4),ct("click",function(){Wt(n);let i=Qt();return Kt(i.perfilEspecialista())}),Re(2,"Mi Perfil"),Se()()}}function B$(t,e){if(t&1){let n=pn();Ae(0,"li",3)(1,"a",4),ct("click",function(){Wt(n);let i=Qt();return Kt(i.turnosclinica())}),Re(2,"- Turnos -"),Se()()}}function $$(t,e){if(t&1){let n=pn();Ae(0,"li",3)(1,"a",9),ct("click",function(){Wt(n);let i=Qt();return Kt(i.solicitarTurnoAdmin())}),Re(2,"Solicitar Turno -"),Se()()}}function q$(t,e){if(t&1){let n=pn();Ae(0,"li",3)(1,"a",4),ct("click",function(){Wt(n);let i=Qt();return Kt(i.Perfil())}),Re(2,"Mi Perfil -"),Se()()}}function z$(t,e){if(t&1){let n=pn();Ae(0,"li",10)(1,"a",11),Re(2,"Usuarios"),Se(),Ae(3,"ul",12)(4,"li")(5,"a",13),ct("click",function(){Wt(n);let i=Qt();return Kt(i.habilitarInhabilitar())}),Re(6,"Habilitar/Inhabilitar Especialista"),Se()(),Ae(7,"li")(8,"a",13),ct("click",function(){Wt(n);let i=Qt();return Kt(i.usuarioAdmin())}),Re(9,"Lista Usuarios"),Se()(),Ae(10,"li")(11,"a",13),ct("click",function(){Wt(n);let i=Qt();return Kt(i.genUsuarioAdmin())}),Re(12,"Generar usuario"),Se()()()()}}function H$(t,e){if(t&1){let n=pn();Ae(0,"li",10)(1,"a",11),Re(2,"- Informes"),Se(),Ae(3,"ul",12)(4,"li")(5,"a",13),ct("click",function(){Wt(n);let i=Qt();return Kt(i.ingresos())}),Re(6,"Log de Ingresos"),Se()()()()}}var xW=(()=>{let e=class e{constructor(r,i){this.rutas=r,this.unUsuario=i,this.listPerfil=[]}ngOnInit(){this.obtener_localstorage()}inicio(){this.rutas.navigate(["bienvenido"]),window.location.reload()}ngOnChanges(r){}desloguearse(){localStorage.removeItem("user"),localStorage.removeItem("userPerfil"),localStorage.removeItem("autorizadoPerfil"),localStorage.removeItem("perfil"),this.email="",this.id="",this.perfil="",this.gralPerfil="",this.rutas.navigate(["bienvenidoLogin"])}obtener_localstorage(){let r=JSON.parse(localStorage.getItem("user"));this.email=r.email,this.id=r.uid,this.getPerfil(this.email)}misTurnos(){this.rutas.navigate(["paciente/misTurnos"])}solicitarTurno(){this.rutas.navigate(["paciente/solicitarTurno"])}cancelarTurnos(){this.rutas.navigate(["paciente/cancelarTurno"])}perfilPaciente(){this.rutas.navigate(["paciente/perfilPaciente"])}misTurnoEspecialista(){this.rutas.navigate(["especialista/misTurnoEsp"])}solicitarTurnoEspecialista(){this.rutas.navigate(["especialista/misTurnosAdm"])}rechazarTurnoEspecialista(){this.rutas.navigate(["especialista/rechazarTurnos"])}finalizarTurnoEspecialista(){this.rutas.navigate(["especialista/finalizarTurno"])}crearTurnoEspecialista(){this.rutas.navigate(["especialista/crearTurnos"])}resEspecialista(){this.rutas.navigate(["especialista/resEsp"])}perfilEspecialista(){this.rutas.navigate(["especialista/perfilEsp"])}misPacientes(){this.rutas.navigate(["especialista/misPacientes"])}genUsuarioAdmin(){this.rutas.navigate(["admin/genUsAdmin"])}solicitarTurnoAdmin(){this.rutas.navigate(["admin/misTurnosAdm"])}usuarioAdmin(){this.rutas.navigate(["admin/usuariosAdmin"])}habilitarInhabilitar(){this.rutas.navigate(["admin/habEsp"])}Perfil(){this.rutas.navigate(["admin/perfilAdm"])}turnosclinica(){this.rutas.navigate(["admin/turnosclinica"])}logreporte(){this.rutas.navigate(["admin/logReporte"])}ingresos(){this.rutas.navigate(["admin/ingresos"])}getPerfil(r){console.log("correo :",r),this.unUsuario.getPerfilUsuario(r).subscribe(i=>{i.forEach(s=>{this.listPerfil.push(G({id:s.payload.doc.id},s.payload.doc.data()))});let o={perfil:this.listPerfil[0].perfil,apellido:this.listPerfil[0].apellido,nombre:this.listPerfil[0].nombre,dni:this.listPerfil[0].dni,email:this.listPerfil[0].email,aprobadoPorAdmin:this.listPerfil[0].aprobadoPorAdmin,especialidad:this.listPerfil[0].especialidad,otraEspecialidad:this.listPerfil[0].otraEspecialidad,fotoPerfilUno:this.listPerfil[0].fotoPerfilUno,fotoPerfilDos:this.listPerfil[0].fotoPerfilDos};this.gralPerfil=o.perfil})}};e.\u0275fac=function(i){return new(i||e)(He(Ln),He(cR))},e.\u0275cmp=gs({type:e,selectors:[["app-menu-gral"]],standalone:!0,features:[no,_s],decls:30,vars:13,consts:[[1,"navbar","navbar-expand-md","navbar-dark","fixed-top","bg-dark"],["id","navbarsExampleDefault",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item","active"],[1,"nav-link",3,"click"],[1,"sr-only"],[1,"nav-link"],["class","nav-item active",4,"ngIf"],["class","nav-item active dropdown-submenu",4,"ngIf"],["onclick","this.blur();",1,"nav-link",3,"click"],[1,"nav-item","active","dropdown-submenu"],["data-toggle","dropdown",1,"nav-link"],[1,"dropdown-menu"],[1,"dropdown-item",3,"click"]],template:function(i,o){i&1&&(Ae(0,"nav",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4),ct("click",function(){return o.inicio()}),Re(5,"Bienvenido "),Ae(6,"span",5),Re(7,"(current)"),Se()()(),Ae(8,"li",3)(9,"a",6)(10,"b"),Re(11,"Perfil:"),Se(),Re(12),Ae(13,"b"),Re(14,"Usuario:"),Se(),Re(15),Se()(),iy(16,O$,3,0,"li",7)(17,F$,3,0,"li",7)(18,L$,3,0,"li",7)(19,V$,3,0,"li",7)(20,j$,3,0,"li",7)(21,U$,3,0,"li",7)(22,B$,3,0,"li",7)(23,$$,3,0,"li",7)(24,q$,3,0,"li",7)(25,z$,13,0,"li",8)(26,H$,7,0,"li",8),Ae(27,"li",3)(28,"a",4),ct("click",function(){return o.desloguearse()}),Re(29," - Desloguearse"),Se()()()()()),i&2&&(At(12),Eu(" ",o.gralPerfil," - "),At(3),Eu(" ",o.email,""),At(),Lt("ngIf",o.gralPerfil=="Paciente"),At(),Lt("ngIf",o.gralPerfil=="Paciente"),At(),Lt("ngIf",o.gralPerfil=="Paciente"),At(),Lt("ngIf",o.gralPerfil=="Especialista"),At(),Lt("ngIf",o.gralPerfil=="Especialista"),At(),Lt("ngIf",o.gralPerfil=="Especialista"),At(),Lt("ngIf",o.gralPerfil=="Administrador"),At(),Lt("ngIf",o.gralPerfil=="Administrador"),At(),Lt("ngIf",o.gralPerfil=="Administrador"),At(),Lt("ngIf",o.gralPerfil=="Administrador"),At(),Lt("ngIf",o.gralPerfil=="Administrador"))},dependencies:[Xb,dA],styles:['.dropdown-submenu[_ngcontent-%COMP%]{position:relative}.dropdown-submenu[_ngcontent-%COMP%] > .dropdown-menu[_ngcontent-%COMP%]{top:0;left:100%;margin-top:-6px;margin-left:-1px;-webkit-border-radius:0 6px 6px 6px;-moz-border-radius:0 6px 6px;border-radius:0 6px 6px}.dropdown-submenu[_ngcontent-%COMP%]:hover > .dropdown-menu[_ngcontent-%COMP%]{display:block}.dropdown-submenu[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:after{display:block;content:" ";float:right;width:0;height:0;border-color:transparent;border-style:solid;border-width:5px 0 5px 5px;border-left-color:#ccc;margin-top:5px;margin-right:-10px}.dropdown-submenu[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]:after{border-left-color:#fff}footer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding-top:80px}.texto-blanco[_ngcontent-%COMP%]{color:#fff}']});let t=e;return t})();var G$=()=>["/auth"],kW=(()=>{let e=class e{constructor(){}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=gs({type:e,selectors:[["app-menu-inicio"]],standalone:!0,features:[_s],decls:10,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarColor02","aria-controls","navbarColor02","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarColor02",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],[1,"nav-item"],[1,"nav-link",3,"routerLink"]],template:function(i,o){i&1&&(Ae(0,"nav",0)(1,"a",1),Re(2,"Bienvenidos"),Se(),Ae(3,"button",2),Iu(4,"span",3),Se(),Ae(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),Re(9,"Ingresar"),Se()()()()()),i&2&&(At(8),Lt("routerLink",kb(1,G$)))},dependencies:[oA]});let t=e;return t})();export{Ke as a,je as b,ve as c,Y as d,X as e,yN as f,Fe as g,Z as h,vT as i,W as j,ln as k,H as l,L as m,V as n,br as o,Sn as p,gs as q,dn as r,ms as s,PT as t,ii as u,rP as v,no as w,Wt as x,Kt as y,Pm as z,er as A,mu as B,Cn as C,kn as D,z3 as E,O1 as F,At as G,He as H,Ud as I,Bd as J,pe as K,K3 as L,kO as M,iy as N,oy as O,Lt as P,bb as Q,oF as R,Q3 as S,Ae as T,Se as U,Iu as V,wF as W,_F as X,pn as Y,EF as Z,ct as _,Qt as $,xF as aa,Nb as ba,MF as ca,Re as da,PF as ea,Eu as fa,kF as ga,OF as ha,FF as ia,Y3 as ja,LF as ka,Z3 as la,_s as ma,J3 as na,X3 as oa,Du as pa,Is as qa,bu as ra,Cu as sa,Es as ta,vt as ua,I6 as va,Xb as wa,E6 as xa,jL as ya,O6 as za,X6 as Aa,PV as Ba,c2 as Ca,Ln as Da,_5 as Ea,I5 as Fa,dA as Ga,Pr as Ha,R5 as Ia,Lj as Ja,co as Ka,Ls as La,hA as Ma,ec as Na,yv as Oa,B5 as Pa,$5 as Qa,X5 as Ra,SA as Sa,Z8 as Ta,FI as Ua,IW as Va,cR as Wa,xW as Xa,kW as Ya};
